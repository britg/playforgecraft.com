/*!
 * jQuery JavaScript Library v1.6.2
 * http://jquery.com/
 *
 * Copyright 2011, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2011, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Date: Thu Jun 30 14:16:56 2011 -0400
 */
function touchstart(a){_target=this.id,_dragx=this.opts.dragx,_dragy=this.opts.dragy,_resort=this.opts.resort,_animate=this.opts.animate,_xspeed=0,_yspeed=0,$(a.changedTouches).each(function(){var b=$("#"+_target).css("left")=="auto"?this.pageX:parseInt($("#"+_target).css("left")),c=$("#"+_target).css("top")=="auto"?this.pageY:parseInt($("#"+_target).css("top"));!_dragging&&!_sizing&&(_left=a.pageX-b,_top=a.pageY-c,_dragging=[_left,_top],_resort&&(_zindex=$("#"+_target).css("z-index")==_zindex?_zindex:_zindex+1,$("#"+_target).css({zIndex:_zindex})))})}function touchmove(a){if(_dragging&&!_sizing&&_animate)var b=isNaN(parseInt($("#"+_target).css("left")))?0:parseInt($("#"+_target).css("left")),c=isNaN(parseInt($("#"+_target).css("top")))?0:parseInt($("#"+_target).css("top"));$(a.changedTouches).each(function(){a.preventDefault(),_left=this.pageX-parseInt($("#"+_target).css("width"))/2,_top=this.pageY-parseInt($("#"+_target).css("height"))/2,_dragging&&!_sizing&&(_animate&&(_xspeed=Math.round((_xspeed+Math.round(_left-b))/1.5),_yspeed=Math.round((_yspeed+Math.round(_top-c))/1.5)),(_dragx||_dragy)&&$("#"+_target).css({position:"absolute"}),_dragx&&$("#"+_target).css({left:_left+"px"}),_dragy&&$("#"+_target).css({top:_top+"px"}))})}function touchend(a){$(a.changedTouches).each(function(){if(!a.targetTouches.length){_dragging=!1;if(_animate){_left=$("#"+_target).css("left")=="auto"?this.pageX:parseInt($("#"+_target).css("left")),_top=$("#"+_target).css("top")=="auto"?this.pageY:parseInt($("#"+_target).css("top"));var b=_dragx?_left+_xspeed+"px":_left+"px",c=_dragy?_top+_yspeed+"px":_top+"px";(_dragx||_dragy)&&$("#"+_target).animate({left:b,top:c},"fast")}}})}function gesturestart(a){_sizing=[$("#"+this.id).css("width"),$("#"+this.id).css("height")]}function gesturechange(a){_sizing&&(_width=this.opts.scale?Math.min(parseInt(_sizing[0])*a.scale,300):_sizing[0],_height=this.opts.scale?Math.min(parseInt(_sizing[1])*a.scale,300):_sizing[1],_rotate=this.opts.rotate?"rotate("+(_rotating+a.rotation)%360+"deg)":"0deg",$("#"+this.id).css({width:_width+"px",height:_height+"px",webkitTransform:_rotate}))}function gestureend(a){_sizing=!1,_rotating=(_rotating+a.rotation)%360}function isScrolledIntoView(a){if($(a).length<1)return!1;var b=$(window).scrollTop(),c=b+$(window).height(),d=$(a).offset().top,e=d+$(a).height();return e>=b&&d<=c}(function(a,b){function k(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(j,"$1-$2").toLowerCase();d=a.getAttribute(e);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:f.isNaN(d)?i.test(d)?f.parseJSON(d):d:parseFloat(d)}catch(g){}f.data(a,c,d)}else d=b}return d}function l(a){for(var b in a)if(b!=="toJSON")return!1;return!0}function m(a,c,d){var e=c+"defer",g=c+"queue",h=c+"mark",i=f.data(a,e,b,!0);i&&(d==="queue"||!f.data(a,g,b,!0))&&(d==="mark"||!f.data(a,h,b,!0))&&setTimeout(function(){!f.data(a,g,b,!0)&&!f.data(a,h,b,!0)&&(f.removeData(a,e,!0),i.resolve())},0)}function D(){return!1}function E(){return!0}function K(a,c,d){var e=f.extend({},d[0]);e.type=a,e.originalEvent={},e.liveFired=b,f.event.handle.call(c,e),e.isDefaultPrevented()&&d[0].preventDefault()}function M(a){var b,c,d,e,g,h,i,j,k,l,m,n,o,p=[],q=[],r=f._data(this,"events");if(a.liveFired===this||!r||!r.live||a.target.disabled||a.button&&a.type==="click")return;a.namespace&&(n=new RegExp("(^|\\.)"+a.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)")),a.liveFired=this;var s=r.live.slice(0);for(i=0;i<s.length;i++)g=s[i],g.origType.replace(x,"")===a.type?q.push(g.selector):s.splice(i--,1);e=f(a.target).closest(q,a.currentTarget);for(j=0,k=e.length;j<k;j++){m=e[j];for(i=0;i<s.length;i++){g=s[i];if(m.selector===g.selector&&(!n||n.test(g.namespace))&&!m.elem.disabled){h=m.elem,d=null;if(g.preType==="mouseenter"||g.preType==="mouseleave")a.type=g.preType,d=f(a.relatedTarget).closest(g.selector)[0],d&&f.contains(h,d)&&(d=h);(!d||d!==h)&&p.push({elem:h,handleObj:g,level:m.level})}}}for(j=0,k=p.length;j<k;j++){e=p[j];if(c&&e.level>c)break;a.currentTarget=e.elem,a.data=e.handleObj.data,a.handleObj=e.handleObj,o=e.handleObj.origHandler.apply(e.elem,arguments);if(o===!1||a.isPropagationStopped()){c=e.level,o===!1&&(b=!1);if(a.isImmediatePropagationStopped())break}}return b}function N(a,b){return(a&&a!=="*"?a+".":"")+b.replace(z,"`").replace(A,"&")}function V(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function W(a,b,c){b=b||0;if(f.isFunction(b))return f.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return f.grep(a,function(a,d){return a===b===c});if(typeof b=="string"){var d=f.grep(a,function(a){return a.nodeType===1});if(R.test(b))return f.filter(b,d,!c);b=f.filter(b,d)}return f.grep(a,function(a,d){return f.inArray(a,b)>=0===c})}function bg(a,b){return f.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function bh(a,b){if(b.nodeType!==1||!f.hasData(a))return;var c=f.expando,d=f.data(a),e=f.data(b,d);if(d=d[c]){var g=d.events;e=e[c]=f.extend({},d);if(g){delete e.handle,e.events={};for(var h in g)for(var i=0,j=g[h].length;i<j;i++)f.event.add(b,h+(g[h][i].namespace?".":"")+g[h][i].namespace,g[h][i],g[h][i].data)}}}function bi(a,b){var c;if(b.nodeType!==1)return;b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase();if(c==="object")b.outerHTML=a.outerHTML;else if(c!=="input"||a.type!=="checkbox"&&a.type!=="radio"){if(c==="option")b.selected=a.defaultSelected;else if(c==="input"||c==="textarea")b.defaultValue=a.defaultValue}else a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value);b.removeAttribute(f.expando)}function bj(a){return"getElementsByTagName"in a?a.getElementsByTagName("*"):"querySelectorAll"in a?a.querySelectorAll("*"):[]}function bk(a){if(a.type==="checkbox"||a.type==="radio")a.defaultChecked=a.checked}function bl(a){f.nodeName(a,"input")?bk(a):"getElementsByTagName"in a&&f.grep(a.getElementsByTagName("input"),bk)}function bm(a,b){b.src?f.ajax({url:b.src,async:!1,dataType:"script"}):f.globalEval((b.text||b.textContent||b.innerHTML||"").replace(be,"/*$0*/")),b.parentNode&&b.parentNode.removeChild(b)}function bA(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=b==="width"?bv:bw;if(d>0)return c!=="border"&&f.each(e,function(){c||(d-=parseFloat(f.css(a,"padding"+this))||0),c==="margin"?d+=parseFloat(f.css(a,c+this))||0:d-=parseFloat(f.css(a,"border"+this+"Width"))||0}),d+"px";d=bx(a,b,b);if(d<0||d==null)d=a.style[b]||0;return d=parseFloat(d)||0,c&&f.each(e,function(){d+=parseFloat(f.css(a,"padding"+this))||0,c!=="padding"&&(d+=parseFloat(f.css(a,"border"+this+"Width"))||0),c==="margin"&&(d+=parseFloat(f.css(a,c+this))||0)}),d+"px"}function bW(a){return function(b,c){typeof b!="string"&&(c=b,b="*");if(f.isFunction(c)){var d=b.toLowerCase().split(bN),e=0,g=d.length,h,i,j;for(;e<g;e++)h=d[e],j=/^\+/.test(h),j&&(h=h.substr(1)||"*"),i=a[h]=a[h]||[],i[j?"unshift":"push"](c)}}}function bX(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h=a[f],i=0,j=h?h.length:0,k=a===bR,l;for(;i<j&&(k||!l);i++)l=h[i](c,d,e),typeof l=="string"&&(!k||g[l]?l=b:(c.dataTypes.unshift(l),l=bX(a,c,d,e,l,g)));return(k||!l)&&!g["*"]&&(l=bX(a,c,d,e,"*",g)),l}function bY(a,b,c,d){if(f.isArray(b))f.each(b,function(b,e){c||bC.test(a)?d(a,e):bY(a+"["+(typeof e=="object"||f.isArray(e)?b:"")+"]",e,c,d)});else if(!c&&b!=null&&typeof b=="object")for(var e in b)bY(a+"["+e+"]",b[e],c,d);else d(a,b)}function bZ(a,c,d){var e=a.contents,f=a.dataTypes,g=a.responseFields,h,i,j,k;for(i in g)i in d&&(c[g[i]]=d[i]);while(f[0]==="*")f.shift(),h===b&&(h=a.mimeType||c.getResponseHeader("content-type"));if(h)for(i in e)if(e[i]&&e[i].test(h)){f.unshift(i);break}if(f[0]in d)j=f[0];else{for(i in d){if(!f[0]||a.converters[i+" "+f[0]]){j=i;break}k||(k=i)}j=j||k}if(j)return j!==f[0]&&f.unshift(j),d[j]}function b$(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var d=a.dataTypes,e={},g,h,i=d.length,j,k=d[0],l,m,n,o,p;for(g=1;g<i;g++){if(g===1)for(h in a.converters)typeof h=="string"&&(e[h.toLowerCase()]=a.converters[h]);l=k,k=d[g];if(k==="*")k=l;else if(l!=="*"&&l!==k){m=l+" "+k,n=e[m]||e["* "+k];if(!n){p=b;for(o in e){j=o.split(" ");if(j[0]===l||j[0]==="*"){p=e[j[1]+" "+k];if(p){o=e[o],o===!0?n=p:p===!0&&(n=o);break}}}}!n&&!p&&f.error("No conversion from "+m.replace(" "," to ")),n!==!0&&(c=n?n(c):p(o(c)))}}return c}function ce(){try{return new a.XMLHttpRequest}catch(b){}}function cf(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function cp(){return setTimeout(cq,0),cn=f.now()}function cq(){cn=b}function cr(a,b){var c={};return f.each(cm.concat.apply([],cm.slice(0,b)),function(){c[this]=a}),c}function cs(a){if(!cg[a]){var b=c.body,d=f("<"+a+">").appendTo(b),e=d.css("display");d.remove();if(e==="none"||e===""){ch||(ch=c.createElement("iframe"),ch.frameBorder=ch.width=ch.height=0),b.appendChild(ch);if(!ci||!ch.createElement)ci=(ch.contentWindow||ch.contentDocument).document,ci.write((c.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>"),ci.close();d=ci.createElement(a),ci.body.appendChild(d),e=f.css(d,"display"),b.removeChild(ch)}cg[a]=e}return cg[a]}function cv(a){return f.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}var c=a.document,d=a.navigator,e=a.location,f=function(){function J(){if(e.isReady)return;try{c.documentElement.doScroll("left")}catch(a){setTimeout(J,1);return}e.ready()}var e=function(a,b){return new e.fn.init(a,b,h)},f=a.jQuery,g=a.$,h,i=/^(?:[^<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,j=/\S/,k=/^\s+/,l=/\s+$/,m=/\d/,n=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,o=/^[\],:{}\s]*$/,p=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,q=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,r=/(?:^|:|,)(?:\s*\[)+/g,s=/(webkit)[ \/]([\w.]+)/,t=/(opera)(?:.*version)?[ \/]([\w.]+)/,u=/(msie) ([\w.]+)/,v=/(mozilla)(?:.*? rv:([\w.]+))?/,w=/-([a-z])/ig,x=function(a,b){return b.toUpperCase()},y=d.userAgent,z,A,B,C=Object.prototype.toString,D=Object.prototype.hasOwnProperty,E=Array.prototype.push,F=Array.prototype.slice,G=String.prototype.trim,H=Array.prototype.indexOf,I={};return e.fn=e.prototype={constructor:e,init:function(a,d,f){var g,h,j,k;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if(a==="body"&&!d&&c.body)return this.context=c,this[0]=c.body,this.selector=a,this.length=1,this;if(typeof a=="string"){a.charAt(0)==="<"&&a.charAt(a.length-1)===">"&&a.length>=3?g=[null,a,null]:g=i.exec(a);if(g&&(g[1]||!d)){if(g[1])return d=d instanceof e?d[0]:d,k=d?d.ownerDocument||d:c,j=n.exec(a),j?e.isPlainObject(d)?(a=[c.createElement(j[1])],e.fn.attr.call(a,d,!0)):a=[k.createElement(j[1])]:(j=e.buildFragment([g[1]],[k]),a=(j.cacheable?e.clone(j.fragment):j.fragment).childNodes),e.merge(this,a);h=c.getElementById(g[2]);if(h&&h.parentNode){if(h.id!==g[2])return f.find(a);this.length=1,this[0]=h}return this.context=c,this.selector=a,this}return!d||d.jquery?(d||f).find(a):this.constructor(d).find(a)}return e.isFunction(a)?f.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),e.makeArray(a,this))},selector:"",jquery:"1.6.2",length:0,size:function(){return this.length},toArray:function(){return F.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=this.constructor();return e.isArray(a)?E.apply(d,a):e.merge(d,a),d.prevObject=this,d.context=this.context,b==="find"?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")"),d},each:function(a,b){return e.each(this,a,b)},ready:function(a){return e.bindReady(),A.done(a),this},eq:function(a){return a===-1?this.slice(a):this.slice(a,+a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(F.apply(this,arguments),"slice",F.call(arguments).join(","))},map:function(a){return this.pushStack(e.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:E,sort:[].sort,splice:[].splice},e.fn.init.prototype=e.fn,e.extend=e.fn.extend=function(){var a,c,d,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;typeof i=="boolean"&&(l=i,i=arguments[1]||{},j=2),typeof i!="object"&&!e.isFunction(i)&&(i={}),k===j&&(i=this,--j);for(;j<k;j++)if((a=arguments[j])!=null)for(c in a){d=i[c],f=a[c];if(i===f)continue;l&&f&&(e.isPlainObject(f)||(g=e.isArray(f)))?(g?(g=!1,h=d&&e.isArray(d)?d:[]):h=d&&e.isPlainObject(d)?d:{},i[c]=e.extend(l,h,f)):f!==b&&(i[c]=f)}return i},e.extend({noConflict:function(b){return a.$===e&&(a.$=g),b&&a.jQuery===e&&(a.jQuery=f),e},isReady:!1,readyWait:1,holdReady:function(a){a?e.readyWait++:e.ready(!0)},ready:function(a){if(a===!0&&!--e.readyWait||a!==!0&&!e.isReady){if(!c.body)return setTimeout(e.ready,1);e.isReady=!0;if(a!==!0&&--e.readyWait>0)return;A.resolveWith(c,[e]),e.fn.trigger&&e(c).trigger("ready").unbind("ready")}},bindReady:function(){if(A)return;A=e._Deferred();if(c.readyState==="complete")return setTimeout(e.ready,1);if(c.addEventListener)c.addEventListener("DOMContentLoaded",B,!1),a.addEventListener("load",e.ready,!1);else if(c.attachEvent){c.attachEvent("onreadystatechange",B),a.attachEvent("onload",e.ready);var b=!1;try{b=a.frameElement==null}catch(d){}c.documentElement.doScroll&&b&&J()}},isFunction:function(a){return e.type(a)==="function"},isArray:Array.isArray||function(a){return e.type(a)==="array"},isWindow:function(a){return a&&typeof a=="object"&&"setInterval"in a},isNaN:function(a){return a==null||!m.test(a)||isNaN(a)},type:function(a){return a==null?String(a):I[C.call(a)]||"object"},isPlainObject:function(a){if(!a||e.type(a)!=="object"||a.nodeType||e.isWindow(a))return!1;if(a.constructor&&!D.call(a,"constructor")&&!D.call(a.constructor.prototype,"isPrototypeOf"))return!1;var c;for(c in a);return c===b||D.call(a,c)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw a},parseJSON:function(b){if(typeof b!="string"||!b)return null;b=e.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(o.test(b.replace(p,"@").replace(q,"]").replace(r,"")))return(new Function("return "+b))();e.error("Invalid JSON: "+b)},parseXML:function(b,c,d){return a.DOMParser?(d=new DOMParser,c=d.parseFromString(b,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b)),d=c.documentElement,(!d||!d.nodeName||d.nodeName==="parsererror")&&e.error("Invalid XML: "+b),c},noop:function(){},globalEval:function(b){b&&j.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(w,x)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var f,g=0,h=a.length,i=h===b||e.isFunction(a);if(d){if(i){for(f in a)if(c.apply(a[f],d)===!1)break}else for(;g<h;)if(c.apply(a[g++],d)===!1)break}else if(i){for(f in a)if(c.call(a[f],f,a[f])===!1)break}else for(;g<h;)if(c.call(a[g],g,a[g++])===!1)break;return a},trim:G?function(a){return a==null?"":G.call(a)}:function(a){return a==null?"":a.toString().replace(k,"").replace(l,"")},makeArray:function(a,b){var c=b||[];if(a!=null){var d=e.type(a);a.length==null||d==="string"||d==="function"||d==="regexp"||e.isWindow(a)?E.call(c,a):e.merge(c,a)}return c},inArray:function(a,b){if(H)return H.call(b,a);for(var c=0,d=b.length;c<d;c++)if(b[c]===a)return c;return-1},merge:function(a,c){var d=a.length,e=0;if(typeof c.length=="number")for(var f=c.length;e<f;e++)a[d++]=c[e];else while(c[e]!==b)a[d++]=c[e++];return a.length=d,a},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;f<g;f++)e=!!b(a[f],f),c!==e&&d.push(a[f]);return d},map:function(a,c,d){var f,g,h=[],i=0,j=a.length,k=a instanceof e||j!==b&&typeof j=="number"&&(j>0&&a[0]&&a[j-1]||j===0||e.isArray(a));if(k)for(;i<j;i++)f=c(a[i],i,d),f!=null&&(h[h.length]=f);else for(g in a)f=c(a[g],g,d),f!=null&&(h[h.length]=f);return h.concat.apply([],h)},guid:1,proxy:function(a,c){if(typeof c=="string"){var d=a[c];c=a,a=d}if(!e.isFunction(a))return b;var f=F.call(arguments,2),g=function(){return a.apply(c,f.concat(F.call(arguments)))};return g.guid=a.guid=a.guid||g.guid||e.guid++,g},access:function(a,c,d,f,g,h){var i=a.length;if(typeof c=="object"){for(var j in c)e.access(a,j,c[j],f,g,d);return a}if(d!==b){f=!h&&f&&e.isFunction(d);for(var k=0;k<i;k++)g(a[k],c,f?d.call(a[k],k,g(a[k],c)):d,h);return a}return i?g(a[0],c):b},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();var b=s.exec(a)||t.exec(a)||u.exec(a)||a.indexOf("compatible")<0&&v.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}e.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function d(c,d){return d&&d instanceof e&&!(d instanceof a)&&(d=a(d)),e.fn.init.call(this,c,d,b)},a.fn.init.prototype=a.fn;var b=a(c);return a},browser:{}}),e.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){I["[object "+b+"]"]=b.toLowerCase()}),z=e.uaMatch(y),z.browser&&(e.browser[z.browser]=!0,e.browser.version=z.version),e.browser.webkit&&(e.browser.safari=!0),j.test("Â ")&&(k=/^[\s\xA0]+/,l=/[\s\xA0]+$/),h=e(c),c.addEventListener?B=function(){c.removeEventListener("DOMContentLoaded",B,!1),e.ready()}:c.attachEvent&&(B=function(){c.readyState==="complete"&&(c.detachEvent("onreadystatechange",B),e.ready())}),e}(),g="done fail isResolved isRejected promise then always pipe".split(" "),h=[].slice;f.extend({_Deferred:function(){var a=[],b,c,d,e={done:function(){if(!d){var c=arguments,g,h,i,j,k;b&&(k=b,b=0);for(g=0,h=c.length;g<h;g++)i=c[g],j=f.type(i),j==="array"?e.done.apply(e,i):j==="function"&&a.push(i);k&&e.resolveWith(k[0],k[1])}return this},resolveWith:function(e,f){if(!d&&!b&&!c){f=f||[],c=1;try{while(a[0])a.shift().apply(e,f)}finally{b=[e,f],c=0}}return this},resolve:function(){return e.resolveWith(this,arguments),this},isResolved:function(){return!!c||!!b},cancel:function(){return d=1,a=[],this}};return e},Deferred:function(a){var b=f._Deferred(),c=f._Deferred(),d;return f.extend(b,{then:function(a,c){return b.done(a).fail(c),this},always:function(){return b.done.apply(b,arguments).fail.apply(this,arguments)},fail:c.done,rejectWith:c.resolveWith,reject:c.resolve,isRejected:c.isResolved,pipe:function(a,c){return f.Deferred(function(d){f.each({done:[a,"resolve"],fail:[c,"reject"]},function(a,c){var e=c[0],g=c[1],h;f.isFunction(e)?b[a](function(){h=e.apply(this,arguments),h&&f.isFunction(h.promise)?h.promise().then(d.resolve,d.reject):d[g](h)}):b[a](d[g])})}).promise()},promise:function(a){if(a==null){if(d)return d;d=a={}}var c=g.length;while(c--)a[g[c]]=b[g[c]];return a}}),b.done(c.cancel).fail(b.cancel),delete b.cancel,a&&a.call(b,b),b},when:function(a){function i(a){return function(c){b[a]=arguments.length>1?h.call(arguments,0):c,--e||g.resolveWith(g,h.call(b,0))}}var b=arguments,c=0,d=b.length,e=d,g=d<=1&&a&&f.isFunction(a.promise)?a:f.Deferred();if(d>1){for(;c<d;c++)b[c]&&f.isFunction(b[c].promise)?b[c].promise().then(i(c),g.reject):--e;e||g.resolveWith(g,b)}else g!==a&&g.resolveWith(g,d?[a]:[]);return g.promise()}}),f.support=function(){var a=c.createElement("div"),b=c.documentElement,d,e,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;a.setAttribute("className","t"),a.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",d=a.getElementsByTagName("*"),e=a.getElementsByTagName("a")[0];if(!d||!d.length||!e)return{};g=c.createElement("select"),h=g.appendChild(c.createElement("option")),i=a.getElementsByTagName("input")[0],k={leadingWhitespace:a.firstChild.nodeType===3,tbody:!a.getElementsByTagName("tbody").length,htmlSerialize:!!a.getElementsByTagName("link").length,style:/top/.test(e.getAttribute("style")),hrefNormalized:e.getAttribute("href")==="/a",opacity:/^0.55$/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,checkOn:i.value==="on",optSelected:h.selected,getSetAttribute:a.className!=="t",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},i.checked=!0,k.noCloneChecked=i.cloneNode(!0).checked,g.disabled=!0,k.optDisabled=!h.disabled;try{delete a.test}catch(v){k.deleteExpando=!1}!a.addEventListener&&a.attachEvent&&a.fireEvent&&(a.attachEvent("onclick",function(){k.noCloneEvent=!1}),a.cloneNode(!0).fireEvent("onclick")),i=c.createElement("input"),i.value="t",i.setAttribute("type","radio"),k.radioValue=i.value==="t",i.setAttribute("checked","checked"),a.appendChild(i),l=c.createDocumentFragment(),l.appendChild(a.firstChild),k.checkClone=l.cloneNode(!0).cloneNode(!0).lastChild.checked,a.innerHTML="",a.style.width=a.style.paddingLeft="1px",m=c.getElementsByTagName("body")[0],o=c.createElement(m?"div":"body"),p={visibility:"hidden",width:0,height:0,border:0,margin:0},m&&f.extend(p,{position:"absolute",left:-1e3,top:-1e3});for(t in p)o.style[t]=p[t];o.appendChild(a),n=m||b,n.insertBefore(o,n.firstChild),k.appendChecked=i.checked,k.boxModel=a.offsetWidth===2,"zoom"in a.style&&(a.style.display="inline",a.style.zoom=1,k.inlineBlockNeedsLayout=a.offsetWidth===2,a.style.display="",a.innerHTML="<div style='width:4px;'></div>",k.shrinkWrapBlocks=a.offsetWidth!==2),a.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",q=a.getElementsByTagName("td"),u=q[0].offsetHeight===0,q[0].style.display="",q[1].style.display="none",k.reliableHiddenOffsets=u&&q[0].offsetHeight===0,a.innerHTML="",c.defaultView&&c.defaultView.getComputedStyle&&(j=c.createElement("div"),j.style.width="0",j.style.marginRight="0",a.appendChild(j),k.reliableMarginRight=(parseInt((c.defaultView.getComputedStyle(j,null)||{marginRight:0}).marginRight,10)||0)===0),o.innerHTML="",n.removeChild(o);if(a.attachEvent)for(t in{submit:1,change:1,focusin:1})s="on"+t,u=s in a,u||(a.setAttribute(s,"return;"),u=typeof a[s]=="function"),k[t+"Bubbles"]=u;return o=l=g=h=m=j=a=i=null,k}(),f.boxModel=f.support.boxModel;var i=/^(?:\{.*\}|\[.*\])$/,j=/([a-z])([A-Z])/g;f.extend({cache:{},uuid:0,expando:"jQuery"+(f.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){return a=a.nodeType?f.cache[a[f.expando]]:a[f.expando],!!a&&!l(a)},data:function(a,c,d,e){if(!f.acceptData(a))return;var g=f.expando,h=typeof c=="string",i,j=a.nodeType,k=j?f.cache:a,l=j?a[f.expando]:a[f.expando]&&f.expando;if((!l||e&&l&&!k[l][g])&&h&&d===b)return;l||(j?a[f.expando]=l=++f.uuid:l=f.expando),k[l]||(k[l]={},j||(k[l].toJSON=f.noop));if(typeof c=="object"||typeof c=="function")e?k[l][g]=f.extend(k[l][g],c):k[l]=f.extend(k[l],c);return i=k[l],e&&(i[g]||(i[g]={}),i=i[g]),d!==b&&(i[f.camelCase(c)]=d),c==="events"&&!i[c]?i[g]&&i[g].events:h?i[f.camelCase(c)]||i[c]:i},removeData:function(b,c,d){if(!f.acceptData(b))return;var e=f.expando,g=b.nodeType,h=g?f.cache:b,i=g?b[f.expando]:f.expando;if(!h[i])return;if(c){var j=d?h[i][e]:h[i];if(j){delete j[c];if(!l(j))return}}if(d){delete h[i][e];if(!l(h[i]))return}var k=h[i][e];f.support.deleteExpando||h!=a?delete h[i]:h[i]=null,k?(h[i]={},g||(h[i].toJSON=f.noop),h[i][e]=k):g&&(f.support.deleteExpando?delete b[f.expando]:b.removeAttribute?b.removeAttribute(f.expando):b[f.expando]=null)},_data:function(a,b,c){return f.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=f.noData[a.nodeName.toLowerCase()];if(b)return b!==!0&&a.getAttribute("classid")===b}return!0}}),f.fn.extend({data:function(a,c){var d=null;if(typeof a=="undefined"){if(this.length){d=f.data(this[0]);if(this[0].nodeType===1){var e=this[0].attributes,g;for(var h=0,i=e.length;h<i;h++)g=e[h].name,g.indexOf("data-")===0&&(g=f.camelCase(g.substring(5)),k(this[0],g,d[g]))}}return d}if(typeof a=="object")return this.each(function(){f.data(this,a)});var j=a.split(".");return j[1]=j[1]?"."+j[1]:"",c===b?(d=this.triggerHandler("getData"+j[1]+"!",[j[0]]),d===b&&this.length&&(d=f.data(this[0],a),d=k(this[0],a,d)),d===b&&j[1]?this.data(j[0]):d):this.each(function(){var b=f(this),d=[j[0],c];b.triggerHandler("setData"+j[1]+"!",d),f.data(this,a,c),b.triggerHandler("changeData"+j[1]+"!",d)})},removeData:function(a){return this.each(function(){f.removeData(this,a)})}}),f.extend({_mark:function(a,c){a&&(c=(c||"fx")+"mark",f.data(a,c,(f.data(a,c,b,!0)||0)+1,!0))},_unmark:function(a,c,d){a!==!0&&(d=c,c=a,a=!1);if(c){d=d||"fx";var e=d+"mark",g=a?0:(f.data(c,e,b,!0)||1)-1;g?f.data(c,e,g,!0):(f.removeData(c,e,!0),m(c,d,"mark"))}},queue:function(a,c,d){if(a){c=(c||"fx")+"queue";var e=f.data(a,c,b,!0);return d&&(!e||f.isArray(d)?e=f.data(a,c,f.makeArray(d),!0):e.push(d)),e||[]}},dequeue:function(a,b){b=b||"fx";var c=f.queue(a,b),d=c.shift(),e;d==="inprogress"&&(d=c.shift()),d&&(b==="fx"&&c.unshift("inprogress"),d.call(a,function(){f.dequeue(a,b)})),c.length||(f.removeData(a,b+"queue",!0),m(a,b,"queue"))}}),f.fn.extend({queue:function(a,c){return typeof a!="string"&&(c=a,a="fx"),c===b?f.queue(this[0],a):this.each(function(){var b=f.queue(this,a,c);a==="fx"&&b[0]!=="inprogress"&&f.dequeue(this,a)})},dequeue:function(a){return this.each(function(){f.dequeue(this,a)})},delay:function(a,b){return a=f.fx?f.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(){var c=this;setTimeout(function(){f.dequeue(c,b)},a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){function m(){--h||d.resolveWith(e,[e])}typeof a!="string"&&(c=a,a=b),a=a||"fx";var d=f.Deferred(),e=this,g=e.length,h=1,i=a+"defer",j=a+"queue",k=a+"mark",l;while(g--)if(l=f.data(e[g],i,b,!0)||(f.data(e[g],j,b,!0)||f.data(e[g],k,b,!0))&&f.data(e[g],i,f._Deferred(),!0))h++,l.done(m);return m(),d.promise()}});var n=/[\n\t\r]/g,o=/\s+/,p=/\r/g,q=/^(?:button|input)$/i,r=/^(?:button|input|object|select|textarea)$/i,s=/^a(?:rea)?$/i,t=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,u=/\:|^on/,v,w;f.fn.extend({attr:function(a,b){return f.access(this,a,b,!0,f.attr)},removeAttr:function(a){return this.each(function(){f.removeAttr(this,a)})},prop:function(a,b){return f.access(this,a,b,!0,f.prop)},removeProp:function(a){return a=f.propFix[a]||a,this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,g,h,i;if(f.isFunction(a))return this.each(function(b){f(this).addClass(a.call(this,b,this.className))});if(a&&typeof a=="string"){b=a.split(o);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1)if(!e.className&&b.length===1)e.className=a;else{g=" "+e.className+" ";for(h=0,i=b.length;h<i;h++)~g.indexOf(" "+b[h]+" ")||(g+=b[h]+" ");e.className=f.trim(g)}}}return this},removeClass:function(a){var c,d,e,g,h,i,j;if(f.isFunction(a))return this.each(function(b){f(this).removeClass(a.call(this,b,this.className))});if(a&&typeof a=="string"||a===b){c=(a||"").split(o);for(d=0,e=this.length;d<e;d++){g=this[d];if(g.nodeType===1&&g.className)if(a){h=(" "+g.className+" ").replace(n," ");for(i=0,j=c.length;i<j;i++)h=h.replace(" "+c[i]+" "," ");g.className=f.trim(h)}else g.className=""}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";return f.isFunction(a)?this.each(function(c){f(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if(c==="string"){var e,g=0,h=f(this),i=b,j=a.split(o);while(e=j[g++])i=d?i:!h.hasClass(e),h[i?"addClass":"removeClass"](e)}else if(c==="undefined"||c==="boolean")this.className&&f._data(this,"__className__",this.className),this.className=this.className||a===!1?"":f._data(this,"__className__")||""})},hasClass:function(a){var b=" "+a+" ";for(var c=0,d=this.length;c<d;c++)if((" "+this[c].className+" ").replace(n," ").indexOf(b)>-1)return!0;return!1},val:function(a){var c,d,e=this[0];if(!arguments.length)return e?(c=f.valHooks[e.nodeName.toLowerCase()]||f.valHooks[e.type],c&&"get"in c&&(d=c.get(e,"value"))!==b?d:(d=e.value,typeof d=="string"?d.replace(p,""):d==null?"":d)):b;var g=f.isFunction(a);return this.each(function(d){var e=f(this),h;if(this.nodeType!==1)return;g?h=a.call(this,d,e.val()):h=a,h==null?h="":typeof h=="number"?h+="":f.isArray(h)&&(h=f.map(h,function(a){return a==null?"":a+""})),c=f.valHooks[this.nodeName.toLowerCase()]||f.valHooks[this.type];if(!c||!("set"in c)||c.set(this,h,"value")===b)this.value=h})}}),f.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c=a.selectedIndex,d=[],e=a.options,g=a.type==="select-one";if(c<0)return null;for(var h=g?c:0,i=g?c+1:e.length;h<i;h++){var j=e[h];if(j.selected&&(f.support.optDisabled?!j.disabled:j.getAttribute("disabled")===null)&&(!j.parentNode.disabled||!f.nodeName(j.parentNode,"optgroup"))){b=f(j).val();if(g)return b;d.push(b)}}return g&&!d.length&&e.length?f(e[c]).val():d},set:function(a,b){var c=f.makeArray(b);return f(a).find("option").each(function(){this.selected=f.inArray(f(this).val(),c)>=0}),c.length||(a.selectedIndex=-1),c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attrFix:{tabindex:"tabIndex"},attr:function(a,c,d,e){var g=a.nodeType;if(!a||g===3||g===8||g===2)return b;if(e&&c in f.attrFn)return f(a)[c](d);if("getAttribute"in a){var h,i,j=g!==1||!f.isXMLDoc(a);return j&&(c=f.attrFix[c]||c,i=f.attrHooks[c],i||(t.test(c)?i=w:v&&c!=="className"&&(f.nodeName(a,"form")||u.test(c))&&(i=v))),d!==b?d===null?(f.removeAttr(a,c),b):i&&"set"in i&&j&&(h=i.set(a,d,c))!==b?h:(a.setAttribute(c,""+d),d):i&&"get"in i&&j&&(h=i.get(a,c))!==null?h:(h=a.getAttribute(c),h===null?b:h)}return f.prop(a,c,d)},removeAttr:function(a,b){var c;a.nodeType===1&&(b=f.attrFix[b]||b,f.support.getSetAttribute?a.removeAttribute(b):(f.attr(a,b,""),a.removeAttributeNode(a.getAttributeNode(b))),t.test(b)&&(c=f.propFix[b]||b)in a&&(a[c]=!1))},attrHooks:{type:{set:function(a,b){if(q.test(a.nodeName)&&a.parentNode)f.error("type property can't be changed");else if(!f.support.radioValue&&b==="radio"&&f.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}},tabIndex:{get:function(a){var c=a.getAttributeNode("tabIndex");return c&&c.specified?parseInt(c.value,10):r.test(a.nodeName)||s.test(a.nodeName)&&a.href?0:b}},value:{get:function(a,b){return v&&f.nodeName(a,"button")?v.get(a,b):b in a?a.value:null},set:function(a,b,c){if(v&&f.nodeName(a,"button"))return v.set(a,b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e=a.nodeType;if(!a||e===3||e===8||e===2)return b;var g,h,i=e!==1||!f.isXMLDoc(a);return i&&(c=f.propFix[c]||c,h=f.propHooks[c]),d!==b?h&&"set"in h&&(g=h.set(a,d,c))!==b?g:a[c]=d:h&&"get"in h&&(g=h.get(a,c))!==b?g:a[c]},propHooks:{}}),w={get:function(a,c){return f.prop(a,c)?c.toLowerCase():b},set:function(a,b,c){var d;return b===!1?f.removeAttr(a,c):(d=f.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase())),c}},f.support.getSetAttribute||(f.attrFix=f.propFix,v=f.attrHooks.name=f.attrHooks.title=f.valHooks.button={get:function(a,c){var d;return d=a.getAttributeNode(c),d&&d.nodeValue!==""?d.nodeValue:b},set:function(a,b,c){var d=a.getAttributeNode(c);if(d)return d.nodeValue=b,b}},f.each(["width","height"],function(a,b){f.attrHooks[b]=f.extend(f.attrHooks[b],{set:function(a,c){if(c==="")return a.setAttribute(b,"auto"),c}})})),f.support.hrefNormalized||f.each(["href","src","width","height"],function(a,c){f.attrHooks[c]=f.extend(f.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),f.support.style||(f.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}}),f.support.optSelected||(f.propHooks.selected=f.extend(f.propHooks.selected,{get:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}})),f.support.checkOn||f.each(["radio","checkbox"],function(){f.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}}),f.each(["radio","checkbox"],function(){f.valHooks[this]=f.extend(f.valHooks[this],{set:function(a,b){if(f.isArray(b))return a.checked=f.inArray
(f(a).val(),b)>=0}})});var x=/\.(.*)$/,y=/^(?:textarea|input|select)$/i,z=/\./g,A=/ /g,B=/[^\w\s.|`]/g,C=function(a){return a.replace(B,"\\$&")};f.event={add:function(a,c,d,e){if(a.nodeType===3||a.nodeType===8)return;if(d===!1)d=D;else if(!d)return;var g,h;d.handler&&(g=d,d=g.handler),d.guid||(d.guid=f.guid++);var i=f._data(a);if(!i)return;var j=i.events,k=i.handle;j||(i.events=j={}),k||(i.handle=k=function(a){return typeof f!="undefined"&&(!a||f.event.triggered!==a.type)?f.event.handle.apply(k.elem,arguments):b}),k.elem=a,c=c.split(" ");var l,m=0,n;while(l=c[m++]){h=g?f.extend({},g):{handler:d,data:e},l.indexOf(".")>-1?(n=l.split("."),l=n.shift(),h.namespace=n.slice(0).sort().join(".")):(n=[],h.namespace=""),h.type=l,h.guid||(h.guid=d.guid);var o=j[l],p=f.event.special[l]||{};if(!o){o=j[l]=[];if(!p.setup||p.setup.call(a,e,n,k)===!1)a.addEventListener?a.addEventListener(l,k,!1):a.attachEvent&&a.attachEvent("on"+l,k)}p.add&&(p.add.call(a,h),h.handler.guid||(h.handler.guid=d.guid)),o.push(h),f.event.global[l]=!0}a=null},global:{},remove:function(a,c,d,e){if(a.nodeType===3||a.nodeType===8)return;d===!1&&(d=D);var g,h,i,j,k=0,l,m,n,o,p,q,r,s=f.hasData(a)&&f._data(a),t=s&&s.events;if(!s||!t)return;c&&c.type&&(d=c.handler,c=c.type);if(!c||typeof c=="string"&&c.charAt(0)==="."){c=c||"";for(h in t)f.event.remove(a,h+c);return}c=c.split(" ");while(h=c[k++]){r=h,q=null,l=h.indexOf(".")<0,m=[],l||(m=h.split("."),h=m.shift(),n=new RegExp("(^|\\.)"+f.map(m.slice(0).sort(),C).join("\\.(?:.*\\.)?")+"(\\.|$)")),p=t[h];if(!p)continue;if(!d){for(j=0;j<p.length;j++){q=p[j];if(l||n.test(q.namespace))f.event.remove(a,r,q.handler,j),p.splice(j--,1)}continue}o=f.event.special[h]||{};for(j=e||0;j<p.length;j++){q=p[j];if(d.guid===q.guid){if(l||n.test(q.namespace))e==null&&p.splice(j--,1),o.remove&&o.remove.call(a,q);if(e!=null)break}}if(p.length===0||e!=null&&p.length===1)(!o.teardown||o.teardown.call(a,m)===!1)&&f.removeEvent(a,h,s.handle),g=null,delete t[h]}if(f.isEmptyObject(t)){var u=s.handle;u&&(u.elem=null),delete s.events,delete s.handle,f.isEmptyObject(s)&&f.removeData(a,b,!0)}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,g){var h=c.type||c,i=[],j;h.indexOf("!")>=0&&(h=h.slice(0,-1),j=!0),h.indexOf(".")>=0&&(i=h.split("."),h=i.shift(),i.sort());if((!e||f.event.customEvent[h])&&!f.event.global[h])return;c=typeof c=="object"?c[f.expando]?c:new f.Event(h,c):new f.Event(h),c.type=h,c.exclusive=j,c.namespace=i.join("."),c.namespace_re=new RegExp("(^|\\.)"+i.join("\\.(?:.*\\.)?")+"(\\.|$)");if(g||!e)c.preventDefault(),c.stopPropagation();if(!e){f.each(f.cache,function(){var a=f.expando,b=this[a];b&&b.events&&b.events[h]&&f.event.trigger(c,d,b.handle.elem)});return}if(e.nodeType===3||e.nodeType===8)return;c.result=b,c.target=e,d=d!=null?f.makeArray(d):[],d.unshift(c);var k=e,l=h.indexOf(":")<0?"on"+h:"";do{var m=f._data(k,"handle");c.currentTarget=k,m&&m.apply(k,d),l&&f.acceptData(k)&&k[l]&&k[l].apply(k,d)===!1&&(c.result=!1,c.preventDefault()),k=k.parentNode||k.ownerDocument||k===c.target.ownerDocument&&a}while(k&&!c.isPropagationStopped());if(!c.isDefaultPrevented()){var n,o=f.event.special[h]||{};if((!o._default||o._default.call(e.ownerDocument,c)===!1)&&(h!=="click"||!f.nodeName(e,"a"))&&f.acceptData(e)){try{l&&e[h]&&(n=e[l],n&&(e[l]=null),f.event.triggered=h,e[h]())}catch(p){}n&&(e[l]=n),f.event.triggered=b}}return c.result},handle:function(c){c=f.event.fix(c||a.event);var d=((f._data(this,"events")||{})[c.type]||[]).slice(0),e=!c.exclusive&&!c.namespace,g=Array.prototype.slice.call(arguments,0);g[0]=c,c.currentTarget=this;for(var h=0,i=d.length;h<i;h++){var j=d[h];if(e||c.namespace_re.test(j.namespace)){c.handler=j.handler,c.data=j.data,c.handleObj=j;var k=j.handler.apply(this,g);k!==b&&(c.result=k,k===!1&&(c.preventDefault(),c.stopPropagation()));if(c.isImmediatePropagationStopped())break}}return c.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(a){if(a[f.expando])return a;var d=a;a=f.Event(d);for(var e=this.props.length,g;e;)g=this.props[--e],a[g]=d[g];a.target||(a.target=a.srcElement||c),a.target.nodeType===3&&(a.target=a.target.parentNode),!a.relatedTarget&&a.fromElement&&(a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement);if(a.pageX==null&&a.clientX!=null){var h=a.target.ownerDocument||c,i=h.documentElement,j=h.body;a.pageX=a.clientX+(i&&i.scrollLeft||j&&j.scrollLeft||0)-(i&&i.clientLeft||j&&j.clientLeft||0),a.pageY=a.clientY+(i&&i.scrollTop||j&&j.scrollTop||0)-(i&&i.clientTop||j&&j.clientTop||0)}return a.which==null&&(a.charCode!=null||a.keyCode!=null)&&(a.which=a.charCode!=null?a.charCode:a.keyCode),!a.metaKey&&a.ctrlKey&&(a.metaKey=a.ctrlKey),!a.which&&a.button!==b&&(a.which=a.button&1?1:a.button&2?3:a.button&4?2:0),a},guid:1e8,proxy:f.proxy,special:{ready:{setup:f.bindReady,teardown:f.noop},live:{add:function(a){f.event.add(this,N(a.origType,a.selector),f.extend({},a,{handler:M,guid:a.handler.guid}))},remove:function(a){f.event.remove(this,N(a.origType,a.selector),a)}},beforeunload:{setup:function(a,b,c){f.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}}},f.removeEvent=c.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},f.Event=function(a,b){if(!this.preventDefault)return new f.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?E:D):this.type=a,b&&f.extend(this,b),this.timeStamp=f.now(),this[f.expando]=!0},f.Event.prototype={preventDefault:function(){this.isDefaultPrevented=E;var a=this.originalEvent;if(!a)return;a.preventDefault?a.preventDefault():a.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=E;var a=this.originalEvent;if(!a)return;a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=E,this.stopPropagation()},isDefaultPrevented:D,isPropagationStopped:D,isImmediatePropagationStopped:D};var F=function(a){var b=a.relatedTarget,c=!1,d=a.type;a.type=a.data,b!==this&&(b&&(c=f.contains(this,b)),c||(f.event.handle.apply(this,arguments),a.type=d))},G=function(a){a.type=a.data,f.event.handle.apply(this,arguments)};f.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){f.event.special[a]={setup:function(c){f.event.add(this,b,c&&c.selector?G:F,a)},teardown:function(a){f.event.remove(this,b,a&&a.selector?G:F)}}}),f.support.submitBubbles||(f.event.special.submit={setup:function(a,b){if(!f.nodeName(this,"form"))f.event.add(this,"click.specialSubmit",function(a){var b=a.target,c=b.type;(c==="submit"||c==="image")&&f(b).closest("form").length&&K("submit",this,arguments)}),f.event.add(this,"keypress.specialSubmit",function(a){var b=a.target,c=b.type;(c==="text"||c==="password")&&f(b).closest("form").length&&a.keyCode===13&&K("submit",this,arguments)});else return!1},teardown:function(a){f.event.remove(this,".specialSubmit")}});if(!f.support.changeBubbles){var H,I=function(a){var b=a.type,c=a.value;return b==="radio"||b==="checkbox"?c=a.checked:b==="select-multiple"?c=a.selectedIndex>-1?f.map(a.options,function(a){return a.selected}).join("-"):"":f.nodeName(a,"select")&&(c=a.selectedIndex),c},J=function(a){var c=a.target,d,e;if(!y.test(c.nodeName)||c.readOnly)return;d=f._data(c,"_change_data"),e=I(c),(a.type!=="focusout"||c.type!=="radio")&&f._data(c,"_change_data",e);if(d===b||e===d)return;if(d!=null||e)a.type="change",a.liveFired=b,f.event.trigger(a,arguments[1],c)};f.event.special.change={filters:{focusout:J,beforedeactivate:J,click:function(a){var b=a.target,c=f.nodeName(b,"input")?b.type:"";(c==="radio"||c==="checkbox"||f.nodeName(b,"select"))&&J.call(this,a)},keydown:function(a){var b=a.target,c=f.nodeName(b,"input")?b.type:"";(a.keyCode===13&&!f.nodeName(b,"textarea")||a.keyCode===32&&(c==="checkbox"||c==="radio")||c==="select-multiple")&&J.call(this,a)},beforeactivate:function(a){var b=a.target;f._data(b,"_change_data",I(b))}},setup:function(a,b){if(this.type==="file")return!1;for(var c in H)f.event.add(this,c+".specialChange",H[c]);return y.test(this.nodeName)},teardown:function(a){return f.event.remove(this,".specialChange"),y.test(this.nodeName)}},H=f.event.special.change.filters,H.focus=H.beforeactivate}f.support.focusinBubbles||f.each({focus:"focusin",blur:"focusout"},function(a,b){function e(a){var c=f.event.fix(a);c.type=b,c.originalEvent={},f.event.trigger(c,null,c.target),c.isDefaultPrevented()&&a.preventDefault()}var d=0;f.event.special[b]={setup:function(){d++===0&&c.addEventListener(a,e,!0)},teardown:function(){--d===0&&c.removeEventListener(a,e,!0)}}}),f.each(["bind","one"],function(a,c){f.fn[c]=function(a,d,e){var g;if(typeof a=="object"){for(var h in a)this[c](h,d,a[h],e);return this}if(arguments.length===2||d===!1)e=d,d=b;c==="one"?(g=function(a){return f(this).unbind(a,g),e.apply(this,arguments)},g.guid=e.guid||f.guid++):g=e;if(a==="unload"&&c!=="one")this.one(a,d,e);else for(var i=0,j=this.length;i<j;i++)f.event.add(this[i],a,g,d);return this}}),f.fn.extend({unbind:function(a,b){if(typeof a=="object"&&!a.preventDefault)for(var c in a)this.unbind(c,a[c]);else for(var d=0,e=this.length;d<e;d++)f.event.remove(this[d],a,b);return this},delegate:function(a,b,c,d){return this.live(b,c,d,a)},undelegate:function(a,b,c){return arguments.length===0?this.unbind("live"):this.die(b,null,c,a)},trigger:function(a,b){return this.each(function(){f.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return f.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||f.guid++,d=0,e=function(c){var e=(f.data(this,"lastToggle"+a.guid)||0)%d;return f.data(this,"lastToggle"+a.guid,e+1),c.preventDefault(),b[e].apply(this,arguments)||!1};e.guid=c;while(d<b.length)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});var L={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};f.each(["live","die"],function(a,c){f.fn[c]=function(a,d,e,g){var h,i=0,j,k,l,m=g||this.selector,n=g?this:f(this.context);if(typeof a=="object"&&!a.preventDefault){for(var o in a)n[c](o,d,a[o],m);return this}if(c==="die"&&!a&&g&&g.charAt(0)===".")return n.unbind(g),this;if(d===!1||f.isFunction(d))e=d||D,d=b;a=(a||"").split(" ");while((h=a[i++])!=null){j=x.exec(h),k="",j&&(k=j[0],h=h.replace(x,""));if(h==="hover"){a.push("mouseenter"+k,"mouseleave"+k);continue}l=h,L[h]?(a.push(L[h]+k),h=h+k):h=(L[h]||h)+k;if(c==="live")for(var p=0,q=n.length;p<q;p++)f.event.add(n[p],"live."+N(h,m),{data:d,selector:m,handler:e,origType:h,origHandler:e,preType:l});else n.unbind("live."+N(h,m),e)}return this}}),f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),function(a,b){f.fn[b]=function(a,c){return c==null&&(c=a,a=null),arguments.length>0?this.bind(b,a,c):this.trigger(b)},f.attrFn&&(f.attrFn[b]=!0)}),function(){function t(a,b,c,d,e,f){for(var g=0,h=d.length;g<h;g++){var i=d[g];if(i){var j=!1;i=i[a];while(i){if(i.sizcache===c){j=d[i.sizset];break}i.nodeType===1&&!f&&(i.sizcache=c,i.sizset=g);if(i.nodeName.toLowerCase()===b){j=i;break}i=i[a]}d[g]=j}}}function u(a,b,c,d,e,f){for(var g=0,h=d.length;g<h;g++){var i=d[g];if(i){var j=!1;i=i[a];while(i){if(i.sizcache===c){j=d[i.sizset];break}if(i.nodeType===1){f||(i.sizcache=c,i.sizset=g);if(typeof b!="string"){if(i===b){j=!0;break}}else if(k.filter(b,[i]).length>0){j=i;break}}i=i[a]}d[g]=j}}}var a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d=0,e=Object.prototype.toString,g=!1,h=!0,i=/\\/g,j=/\W/;[0,0].sort(function(){return h=!1,0});var k=function(b,d,f,g){f=f||[],d=d||c;var h=d;if(d.nodeType!==1&&d.nodeType!==9)return[];if(!b||typeof b!="string")return f;var i,j,n,o,q,r,s,t,u=!0,w=k.isXML(d),x=[],y=b;do{a.exec(""),i=a.exec(y);if(i){y=i[3],x.push(i[1]);if(i[2]){o=i[3];break}}}while(i);if(x.length>1&&m.exec(b))if(x.length===2&&l.relative[x[0]])j=v(x[0]+x[1],d);else{j=l.relative[x[0]]?[d]:k(x.shift(),d);while(x.length)b=x.shift(),l.relative[b]&&(b+=x.shift()),j=v(b,j)}else{!g&&x.length>1&&d.nodeType===9&&!w&&l.match.ID.test(x[0])&&!l.match.ID.test(x[x.length-1])&&(q=k.find(x.shift(),d,w),d=q.expr?k.filter(q.expr,q.set)[0]:q.set[0]);if(d){q=g?{expr:x.pop(),set:p(g)}:k.find(x.pop(),x.length===1&&(x[0]==="~"||x[0]==="+")&&d.parentNode?d.parentNode:d,w),j=q.expr?k.filter(q.expr,q.set):q.set,x.length>0?n=p(j):u=!1;while(x.length)r=x.pop(),s=r,l.relative[r]?s=x.pop():r="",s==null&&(s=d),l.relative[r](n,s,w)}else n=x=[]}n||(n=j),n||k.error(r||b);if(e.call(n)==="[object Array]")if(!u)f.push.apply(f,n);else if(d&&d.nodeType===1)for(t=0;n[t]!=null;t++)n[t]&&(n[t]===!0||n[t].nodeType===1&&k.contains(d,n[t]))&&f.push(j[t]);else for(t=0;n[t]!=null;t++)n[t]&&n[t].nodeType===1&&f.push(j[t]);else p(n,f);return o&&(k(o,h,f,g),k.uniqueSort(f)),f};k.uniqueSort=function(a){if(r){g=h,a.sort(r);if(g)for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1)}return a},k.matches=function(a,b){return k(a,null,null,b)},k.matchesSelector=function(a,b){return k(b,null,null,[a]).length>0},k.find=function(a,b,c){var d;if(!a)return[];for(var e=0,f=l.order.length;e<f;e++){var g,h=l.order[e];if(g=l.leftMatch[h].exec(a)){var j=g[1];g.splice(1,1);if(j.substr(j.length-1)!=="\\"){g[1]=(g[1]||"").replace(i,""),d=l.find[h](g,b,c);if(d!=null){a=a.replace(l.match[h],"");break}}}}return d||(d=typeof b.getElementsByTagName!="undefined"?b.getElementsByTagName("*"):[]),{set:d,expr:a}},k.filter=function(a,c,d,e){var f,g,h=a,i=[],j=c,m=c&&c[0]&&k.isXML(c[0]);while(a&&c.length){for(var n in l.filter)if((f=l.leftMatch[n].exec(a))!=null&&f[2]){var o,p,q=l.filter[n],r=f[1];g=!1,f.splice(1,1);if(r.substr(r.length-1)==="\\")continue;j===i&&(i=[]);if(l.preFilter[n]){f=l.preFilter[n](f,j,d,i,e,m);if(!f)g=o=!0;else if(f===!0)continue}if(f)for(var s=0;(p=j[s])!=null;s++)if(p){o=q(p,f,s,j);var t=e^!!o;d&&o!=null?t?g=!0:j[s]=!1:t&&(i.push(p),g=!0)}if(o!==b){d||(j=i),a=a.replace(l.match[n],"");if(!g)return[];break}}if(a===h)if(g==null)k.error(a);else break;h=a}return j},k.error=function(a){throw"Syntax error, unrecognized expression: "+a};var l=k.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!j.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f=0,g=a.length,h;f<g;f++)if(h=a[f]){while((h=h.previousSibling)&&h.nodeType!==1);a[f]=e||h&&h.nodeName.toLowerCase()===b?h||!1:h===b}e&&k.filter(b,a,!0)},">":function(a,b){var c,d=typeof b=="string",e=0,f=a.length;if(d&&!j.test(b)){b=b.toLowerCase();for(;e<f;e++){c=a[e];if(c){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}}else{for(;e<f;e++)c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b);d&&k.filter(b,a,!0)}},"":function(a,b,c){var e,f=d++,g=u;typeof b=="string"&&!j.test(b)&&(b=b.toLowerCase(),e=b,g=t),g("parentNode",b,f,a,e,c)},"~":function(a,b,c){var e,f=d++,g=u;typeof b=="string"&&!j.test(b)&&(b=b.toLowerCase(),e=b,g=t),g("previousSibling",b,f,a,e,c)}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return c.length===0?null:c}},TAG:function(a,b){if(typeof b.getElementsByTagName!="undefined")return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(i,"")+" ";if(f)return a;for(var g=0,h;(h=b[g])!=null;g++)h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1));return!1},ID:function(a){return a[1].replace(i,"")},TAG:function(a,b){return a[1].replace(i,"").toLowerCase()},CHILD:function(a){if(a[1]==="nth"){a[2]||k.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else a[2]&&k.error(a[0]);return a[0]=d++,a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(i,"");return!f&&l.attrMap[g]&&(a[1]=l.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(i,""),a[2]==="~="&&(a[4]=" "+a[4]+" "),a},PSEUDO:function(b,c,d,e,f){if(b[1]==="not")if((a.exec(b[3])||"").length>1||/^\w/.test(b[3]))b[3]=k(b[3],null,null,c);else{var g=k.filter(b[3],c,d,!0^f);return d||e.push.apply(e,g),!1}else if(l.match.POS.test(b[0])||l.match.CHILD.test(b[0]))return!0;return b},POS:function(a){return a.unshift(!0),a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!k(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return a.nodeName.toLowerCase()==="input"&&"text"===c&&(b===c||b===null)},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&"checkbox"===a.type},file:function(a){return a.nodeName.toLowerCase()==="input"&&"file"===a.type},password:function(a){return a.nodeName.toLowerCase()==="input"&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"submit"===a.type},image:function(a){return a.nodeName.toLowerCase()==="input"&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&"button"===a.type||b==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=l.filters[e];if(f)return f(a,c,b,d);if(e==="contains")return(a.textContent||a.innerText||k.getText([a])||"").indexOf(b[3])>=0;if(e==="not"){var g=b[3];for(var h=0,i=g.length;h<i;h++)if(g[h]===a)return!1;return!0}k.error(e)},CHILD:function(a,b){var c=b[1],d=a;switch(c){case"only":case"first":while(d=d.previousSibling)if(d.nodeType===1)return!1;if(c==="first")return!0;d=a;case"last":while(d=d.nextSibling)if(d.nodeType===1)return!1;return!0;case"nth":var e=b[2],f=b[3];if(e===1&&f===0)return!0;var g=b[0],h=a.parentNode;if(h&&(h.sizcache!==g||!a.nodeIndex)){var i=0;for(d=h.firstChild;d;d=d.nextSibling)d.nodeType===1&&(d.nodeIndex=++i);h.sizcache=g}var j=a.nodeIndex-f;return e===0?j===0:j%e===0&&j/e>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=l.attrHandle[c]?l.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return d==null?f==="!=":f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=l.setFilters[e];if(f)return f(a,c,b,d)}}},m=l.match.POS,n=function(a,b){return"\\"+(b-0+1)};for(var o in l.match)l.match[o]=new RegExp(l.match[o].source+/(?![^\[]*\])(?![^\(]*\))/.source),l.leftMatch[o]=new RegExp(/(^(?:.|\r|\n)*?)/.source+l.match[o].source.replace(/\\(\d+)/g,n));var p=function(a,b){return a=Array.prototype.slice.call(a,0),b?(b.push.apply(b,a),b):a};try{Array.prototype.slice.call(c.documentElement.childNodes,0)[0].nodeType}catch(q){p=function(a,b){var c=0,d=b||[];if(e.call(a)==="[object Array]")Array.prototype.push.apply(d,a);else if(typeof a.length=="number")for(var f=a.length;c<f;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var r,s;c.documentElement.compareDocumentPosition?r=function(a,b){return a===b?(g=!0,0):!a.compareDocumentPosition||!b.compareDocumentPosition?a.compareDocumentPosition?-1:1:a.compareDocumentPosition(b)&4?-1:1}:(r=function(a,b){if(a===b)return g=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[],h=a.parentNode,i=b.parentNode,j=h;if(h===i)return s(a,b);if(!h)return-1;if(!i)return 1;while(j)e.unshift(j),j=j.parentNode;j=i;while(j)f.unshift(j),j=j.parentNode;c=e.length,d=f.length;for(var k=0;k<c&&k<d;k++)if(e[k]!==f[k])return s(e[k],f[k]);return k===c?s(a,f[k],-1):s(e[k],b,1)},s=function(a,b,c){if(a===b)return c;var d=a.nextSibling;while(d){if(d===b)return-1;d=d.nextSibling}return 1}),k.getText=function(a){var b="",c;for(var d=0;a[d];d++)c=a[d],c.nodeType===3||c.nodeType===4?b+=c.nodeValue:c.nodeType!==8&&(b+=k.getText(c.childNodes));return b},function(){var a=c.createElement("div"),d="script"+(new Date).getTime(),e=c.documentElement;a.innerHTML="<a name='"+d+"'/>",e.insertBefore(a,e.firstChild),c.getElementById(d)&&(l.find.ID=function(a,c,d){if(typeof c.getElementById!="undefined"&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]}},l.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}),e.removeChild(a),e=a=null}(),function(){var a=c.createElement("div");a.appendChild(c.createComment("")),a.getElementsByTagName("*").length>0&&(l.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++)c[e].nodeType===1&&d.push(c[e]);c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(l.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),c.querySelectorAll&&function(){var a=k,b=c.createElement("div"),d="__sizzle__";b.innerHTML="<p class='TEST'></p>";if(b.querySelectorAll&&b.querySelectorAll(".TEST").length===0)return;k=function(b,e,f,g){e=e||c;if(!g&&!k.isXML(e)){var h=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(h&&(e.nodeType===1||e.nodeType===9)){if(h[1])return p(e.getElementsByTagName(b),f);if(h[2]&&l.find.CLASS&&e.getElementsByClassName)return p(e.getElementsByClassName(h[2]),f)}if(e.nodeType===9){if(b==="body"&&e.body)return p([e.body],f);if(h&&h[3]){var i=e.getElementById(h[3]);if(!i||!i.parentNode)return p([],f);if(i.id===h[3])return p([i],f)}try{return p(e.querySelectorAll(b),f)}catch(j){}}else if(e.nodeType===1&&e.nodeName.toLowerCase()!=="object"){var m=e,n=e.getAttribute("id"),o=n||d,q=e.parentNode,r=/^\s*[+~]/.test(b);n?o=o.replace(/'/g,"\\$&"):e.setAttribute("id",o),r&&q&&(e=e.parentNode);try{if(!r||q)return p(e.querySelectorAll("[id='"+o+"'] "+b),f)}catch(s){}finally{n||m.removeAttribute("id")}}}return a(b,e,f,g)};for(var e in a)k[e]=a[e];b=null}(),function(){var a=c.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var d=!b.call(c.createElement("div"),"div"),e=!1;try{b.call(c.documentElement,"[test!='']:sizzle")}catch(f){e=!0}k.matchesSelector=function(a,c){c=c.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!k.isXML(a))try{if(e||!l.match.PSEUDO.test(c)&&!/!=/.test(c)){var f=b.call(a,c);if(f||!d||a.document&&a.document.nodeType!==11)return f}}catch(g){}return k(c,null,null,[a]).length>0}}}(),function(){var a=c.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(!a.getElementsByClassName||a.getElementsByClassName("e").length===0)return;a.lastChild.className="e";if(a.getElementsByClassName("e").length===1)return;l.order.splice(1,0,"CLASS"),l.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c)return b.getElementsByClassName(a[1])},a=null}(),c.documentElement.contains?k.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:c.documentElement.compareDocumentPosition?k.contains=function(a,b){return!!(a.compareDocumentPosition(b)&16)}:k.contains=function(){return!1},k.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1};var v=function(a,b){var c,d=[],e="",f=b.nodeType?[b]:b;while(c=l.match.PSEUDO.exec(a))e+=c[0],a=a.replace(l.match.PSEUDO,"");a=l.relative[a]?a+"*":a;for(var g=0,h=f.length;g<h;g++)k(a,f[g],d);return k.filter(e,d)};f.find=k,f.expr=k.selectors,f.expr[":"]=f.expr.filters,f.unique=k.uniqueSort,f.text=k.getText,f.isXMLDoc=k.isXML,f.contains=k.contains}();var O=/Until$/,P=/^(?:parents|prevUntil|prevAll)/,Q=/,/,R=/^.[^:#\[\.,]*$/,S=Array.prototype.slice,T=f.expr.match.POS,U={children:!0,contents:!0,next:!0,prev:!0};f.fn.extend({find:function(a){var b=this,c,d;if(typeof a!="string")return f(a).filter(function(){for(c=0,d=b.length;c<d;c++)if(f.contains(b[c],this))return!0});var e=this.pushStack("","find",a),g,h,i;for(c=0,d=this.length;c<d;c++){g=e.length,f.find(a,this[c],e);if(c>0)for(h=g;h<e.length;h++)for(i=0;i<g;i++)if(e[i]===e[h]){e.splice(h--,1);break}}return e},has:function(a){var b=f(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++)if(f.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(W(this,a,!1),"not",a)},filter:function(a){return this.pushStack(W(this,a,!0),"filter",a)},is:function(a){return!!a&&(typeof a=="string"?f.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c=[],d,e,g=this[0];if(f.isArray(a)){var h,i,j={},k=1;if(g&&a.length){for(d=0,e=a.length;d<e;d++)i=a[d],j[i]||(j[i]=T.test(i)?f(i,b||this.context):i);while(g&&g.ownerDocument&&g!==b){for(i in j)h=j[i],(h.jquery?h.index(g)>-1:f(g).is(h))&&c.push({selector:i,elem:g,level:k});g=g.parentNode,k++}}return c}var l=T.test(a)||typeof a!="string"?f(a,b||this.context):0;for(d=0,e=this.length;d<e;d++){g=this[d];while(g){if(l?l.index(g)>-1:f.find.matchesSelector(g,a)){c.push(g);break}g=g.parentNode;if(!g||!g.ownerDocument||g===b||g.nodeType===11)break}}return c=c.length>1?f.unique(c):c,this.pushStack(c,"closest",a)},index:function(a){return!a||typeof a=="string"?f.inArray(this[0],a?f(a):this.parent().children()):f.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var c=typeof a=="string"?f(a,b):f.makeArray(a&&a.nodeType?[a]:a),d=f.merge(this.get(),c);return this.pushStack(V(c[0])||V(d[0])?d:f.unique(d))},andSelf:function(){return this.add(this.prevObject)}}),f.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return f.dir(a,"parentNode")},parentsUntil:function(a,b,c){return f.dir(a,"parentNode",c)},next:function(a){return f.nth(a,2,"nextSibling")},prev:function(a){return f.nth(a,2,"previousSibling")},nextAll:function(a){return f.dir(a,"nextSibling")},prevAll:function(a){return f.dir(a,"previousSibling")},nextUntil:function(a,b,c){return f.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return f.dir(a,"previousSibling",c)},siblings:function(a){return f.sibling(a.parentNode.firstChild,a)},children:function(a){return f.sibling(a.firstChild)},contents:function(a){return f.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:f.makeArray(a.childNodes)}},function(a,b){f.fn[a]=function(c,d){var e=f.map(this,b,c),g=S.call(arguments);return O.test(a)||(d=c),d&&typeof d=="string"&&(e=f.filter(d,e)),e=this.length>1&&!U[a]?f.unique(e):e,(this.length>1||Q.test(d))&&P.test(a)&&(e=e.reverse()),this.pushStack(e,a,g.join(","))}}),f.extend({filter:function(a,b,c){return c&&(a=":not("+a+")"),b.length===1?f.find.matchesSelector(b[0],a)?[b[0]]:[]:f.find.matches(a,b)},dir:function(a,c,d){var e=[],g=a[c];while(g&&g.nodeType!==9&&(d===b||g.nodeType!==1||!f(g).is(d)))g.nodeType===1&&e.push(g),g=g[c];return e},nth:function(a,b,c,d){b=b||1;var e=0;for(;a;a=a[c])if(a.nodeType===1&&++e===b)break;return a},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}});var X=/ jQuery\d+="(?:\d+|null)"/g,Y=/^\s+/,Z=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,$=/<([\w:]+)/,_=/<tbody/i,ba=/<|&#?\w+;/,bb=/<(?:script|object|embed|option|style)/i,bc=/checked\s*(?:[^=]|=\s*.checked.)/i,bd=/\/(java|ecma)script/i,be=/^\s*<!(?:\[CDATA\[|\-\-)/,bf={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};bf.optgroup=bf.option,bf.tbody=bf.tfoot=bf.colgroup=bf.caption=bf.thead,bf.th=bf.td,f.support.htmlSerialize||(bf._default=[1,"div<div>","</div>"]),f.fn.extend({text:function(a){return f.isFunction(a)?this.each(function(b){var c=f(this);c.text(a.call(this,b,c.text()))}):typeof a!="object"&&a!==b?this.empty().append((this[0]&&this[0].ownerDocument||c).createTextNode(a)):f.text(this)},wrapAll:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapAll(a.call(this,b))});if(this[0]){var b=f(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return f.isFunction(a)?this.each(function(b){f(this).wrapInner(a.call(this,b))}):this.each(function(){var b=f(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){return this.each(function(){f(this).wrapAll(a)})},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=f(arguments[0]);return a.push.apply(a,this.toArray()),this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);return a.push.apply(a,f(arguments[0]).toArray()),a}},remove:function(a,b){for(var c=0,d;(d=this[c])!=null;c++)if(!a||f.filter(a,[d]).length)!b&&d.nodeType===1&&(f.cleanData(d.getElementsByTagName("*")),f.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d);return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++){b.nodeType===1&&f.cleanData(b.getElementsByTagName("*"));while(b.firstChild)b.removeChild(b.firstChild)}return this},clone:function(a,b){return a=a==null?!1:a,b=b==null?a:b,this.map(function(){return f.clone(this,a,b)})},html:function(a){if(a===b)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(X,""):null;if(typeof a=="string"&&!bb.test(a)&&(f.support.leadingWhitespace||!Y.test(a))&&!bf[($.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Z,"<$1></$2>");try{for(
var c=0,d=this.length;c<d;c++)this[c].nodeType===1&&(f.cleanData(this[c].getElementsByTagName("*")),this[c].innerHTML=a)}catch(e){this.empty().append(a)}}else f.isFunction(a)?this.each(function(b){var c=f(this);c.html(a.call(this,b,c.html()))}):this.empty().append(a);return this},replaceWith:function(a){return this[0]&&this[0].parentNode?f.isFunction(a)?this.each(function(b){var c=f(this),d=c.html();c.replaceWith(a.call(this,b,d))}):(typeof a!="string"&&(a=f(a).detach()),this.each(function(){var b=this.nextSibling,c=this.parentNode;f(this).remove(),b?f(b).before(a):f(c).append(a)})):this.length?this.pushStack(f(f.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,g,h,i,j=a[0],k=[];if(!f.support.checkClone&&arguments.length===3&&typeof j=="string"&&bc.test(j))return this.each(function(){f(this).domManip(a,c,d,!0)});if(f.isFunction(j))return this.each(function(e){var g=f(this);a[0]=j.call(this,e,c?g.html():b),g.domManip(a,c,d)});if(this[0]){i=j&&j.parentNode,f.support.parentNode&&i&&i.nodeType===11&&i.childNodes.length===this.length?e={fragment:i}:e=f.buildFragment(a,this,k),h=e.fragment,h.childNodes.length===1?g=h=h.firstChild:g=h.firstChild;if(g){c=c&&f.nodeName(g,"tr");for(var l=0,m=this.length,n=m-1;l<m;l++)d.call(c?bg(this[l],g):this[l],e.cacheable||m>1&&l<n?f.clone(h,!0,!0):h)}k.length&&f.each(k,bm)}return this}}),f.buildFragment=function(a,b,d){var e,g,h,i;return b&&b[0]&&(i=b[0].ownerDocument||b[0]),i.createDocumentFragment||(i=c),a.length===1&&typeof a[0]=="string"&&a[0].length<512&&i===c&&a[0].charAt(0)==="<"&&!bb.test(a[0])&&(f.support.checkClone||!bc.test(a[0]))&&(g=!0,h=f.fragments[a[0]],h&&h!==1&&(e=h)),e||(e=i.createDocumentFragment(),f.clean(a,i,e,d)),g&&(f.fragments[a[0]]=h?e:1),{fragment:e,cacheable:g}},f.fragments={},f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){f.fn[a]=function(c){var d=[],e=f(c),g=this.length===1&&this[0].parentNode;if(g&&g.nodeType===11&&g.childNodes.length===1&&e.length===1)return e[b](this[0]),this;for(var h=0,i=e.length;h<i;h++){var j=(h>0?this.clone(!0):this).get();f(e[h])[b](j),d=d.concat(j)}return this.pushStack(d,a,e.selector)}}),f.extend({clone:function(a,b,c){var d=a.cloneNode(!0),e,g,h;if((!f.support.noCloneEvent||!f.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!f.isXMLDoc(a)){bi(a,d),e=bj(a),g=bj(d);for(h=0;e[h];++h)bi(e[h],g[h])}if(b){bh(a,d);if(c){e=bj(a),g=bj(d);for(h=0;e[h];++h)bh(e[h],g[h])}}return e=g=null,d},clean:function(a,b,d,e){var g;b=b||c,typeof b.createElement=="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||c);var h=[],i;for(var j=0,k;(k=a[j])!=null;j++){typeof k=="number"&&(k+="");if(!k)continue;if(typeof k=="string")if(!ba.test(k))k=b.createTextNode(k);else{k=k.replace(Z,"<$1></$2>");var l=($.exec(k)||["",""])[1].toLowerCase(),m=bf[l]||bf._default,n=m[0],o=b.createElement("div");o.innerHTML=m[1]+k+m[2];while(n--)o=o.lastChild;if(!f.support.tbody){var p=_.test(k),q=l==="table"&&!p?o.firstChild&&o.firstChild.childNodes:m[1]==="<table>"&&!p?o.childNodes:[];for(i=q.length-1;i>=0;--i)f.nodeName(q[i],"tbody")&&!q[i].childNodes.length&&q[i].parentNode.removeChild(q[i])}!f.support.leadingWhitespace&&Y.test(k)&&o.insertBefore(b.createTextNode(Y.exec(k)[0]),o.firstChild),k=o.childNodes}var r;if(!f.support.appendChecked)if(k[0]&&typeof (r=k.length)=="number")for(i=0;i<r;i++)bl(k[i]);else bl(k);k.nodeType?h.push(k):h=f.merge(h,k)}if(d){g=function(a){return!a.type||bd.test(a.type)};for(j=0;h[j];j++)if(e&&f.nodeName(h[j],"script")&&(!h[j].type||h[j].type.toLowerCase()==="text/javascript"))e.push(h[j].parentNode?h[j].parentNode.removeChild(h[j]):h[j]);else{if(h[j].nodeType===1){var s=f.grep(h[j].getElementsByTagName("script"),g);h.splice.apply(h,[j+1,0].concat(s))}d.appendChild(h[j])}}return h},cleanData:function(a){var b,c,d=f.cache,e=f.expando,g=f.event.special,h=f.support.deleteExpando;for(var i=0,j;(j=a[i])!=null;i++){if(j.nodeName&&f.noData[j.nodeName.toLowerCase()])continue;c=j[f.expando];if(c){b=d[c]&&d[c][e];if(b&&b.events){for(var k in b.events)g[k]?f.event.remove(j,k):f.removeEvent(j,k,b.handle);b.handle&&(b.handle.elem=null)}h?delete j[f.expando]:j.removeAttribute&&j.removeAttribute(f.expando),delete d[c]}}}});var bn=/alpha\([^)]*\)/i,bo=/opacity=([^)]*)/,bp=/([A-Z]|^ms)/g,bq=/^-?\d+(?:px)?$/i,br=/^-?\d/,bs=/^[+\-]=/,bt=/[^+\-\.\de]+/g,bu={position:"absolute",visibility:"hidden",display:"block"},bv=["Left","Right"],bw=["Top","Bottom"],bx,by,bz;f.fn.css=function(a,c){return arguments.length===2&&c===b?this:f.access(this,a,c,!0,function(a,c,d){return d!==b?f.style(a,c,d):f.css(a,c)})},f.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bx(a,"opacity","opacity");return c===""?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":f.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!a||a.nodeType===3||a.nodeType===8||!a.style)return;var g,h,i=f.camelCase(c),j=a.style,k=f.cssHooks[i];c=f.cssProps[i]||i;if(d===b)return k&&"get"in k&&(g=k.get(a,!1,e))!==b?g:j[c];h=typeof d;if(h==="number"&&isNaN(d)||d==null)return;h==="string"&&bs.test(d)&&(d=+d.replace(bt,"")+parseFloat(f.css(a,c)),h="number"),h==="number"&&!f.cssNumber[i]&&(d+="px");if(!k||!("set"in k)||(d=k.set(a,d))!==b)try{j[c]=d}catch(l){}},css:function(a,c,d){var e,g;c=f.camelCase(c),g=f.cssHooks[c],c=f.cssProps[c]||c,c==="cssFloat"&&(c="float");if(g&&"get"in g&&(e=g.get(a,!0,d))!==b)return e;if(bx)return bx(a,c)},swap:function(a,b,c){var d={};for(var e in b)d[e]=a.style[e],a.style[e]=b[e];c.call(a);for(e in b)a.style[e]=d[e]}}),f.curCSS=f.css,f.each(["height","width"],function(a,b){f.cssHooks[b]={get:function(a,c,d){var e;if(c)return a.offsetWidth!==0?bA(a,b,d):(f.swap(a,bu,function(){e=bA(a,b,d)}),e)},set:function(a,b){if(!bq.test(b))return b;b=parseFloat(b);if(b>=0)return b+"px"}}}),f.support.opacity||(f.cssHooks.opacity={get:function(a,b){return bo.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle;c.zoom=1;var e=f.isNaN(b)?"":"alpha(opacity="+b*100+")",g=d&&d.filter||c.filter||"";c.filter=bn.test(g)?g.replace(bn,e):g+" "+e}}),f(function(){f.support.reliableMarginRight||(f.cssHooks.marginRight={get:function(a,b){var c;return f.swap(a,{display:"inline-block"},function(){b?c=bx(a,"margin-right","marginRight"):c=a.style.marginRight}),c}})}),c.defaultView&&c.defaultView.getComputedStyle&&(by=function(a,c){var d,e,g;c=c.replace(bp,"-$1").toLowerCase();if(!(e=a.ownerDocument.defaultView))return b;if(g=e.getComputedStyle(a,null))d=g.getPropertyValue(c),d===""&&!f.contains(a.ownerDocument.documentElement,a)&&(d=f.style(a,c));return d}),c.documentElement.currentStyle&&(bz=function(a,b){var c,d=a.currentStyle&&a.currentStyle[b],e=a.runtimeStyle&&a.runtimeStyle[b],f=a.style;return!bq.test(d)&&br.test(d)&&(c=f.left,e&&(a.runtimeStyle.left=a.currentStyle.left),f.left=b==="fontSize"?"1em":d||0,d=f.pixelLeft+"px",f.left=c,e&&(a.runtimeStyle.left=e)),d===""?"auto":d}),bx=by||bz,f.expr&&f.expr.filters&&(f.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;return b===0&&c===0||!f.support.reliableHiddenOffsets&&(a.style.display||f.css(a,"display"))==="none"},f.expr.filters.visible=function(a){return!f.expr.filters.hidden(a)});var bB=/%20/g,bC=/\[\]$/,bD=/\r?\n/g,bE=/#.*$/,bF=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bG=/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bH=/^(?:about|app|app\-storage|.+\-extension|file|widget):$/,bI=/^(?:GET|HEAD)$/,bJ=/^\/\//,bK=/\?/,bL=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bM=/^(?:select|textarea)/i,bN=/\s+/,bO=/([?&])_=[^&]*/,bP=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,bQ=f.fn.load,bR={},bS={},bT,bU;try{bT=e.href}catch(bV){bT=c.createElement("a"),bT.href="",bT=bT.href}bU=bP.exec(bT.toLowerCase())||[],f.fn.extend({load:function(a,c,d){if(typeof a!="string"&&bQ)return bQ.apply(this,arguments);if(!this.length)return this;var e=a.indexOf(" ");if(e>=0){var g=a.slice(e,a.length);a=a.slice(0,e)}var h="GET";c&&(f.isFunction(c)?(d=c,c=b):typeof c=="object"&&(c=f.param(c,f.ajaxSettings.traditional),h="POST"));var i=this;return f.ajax({url:a,type:h,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a}),i.html(g?f("<div>").append(c.replace(bL,"")).find(g):c)),d&&i.each(d,[c,b,a])}}),this},serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?f.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||bM.test(this.nodeName)||bG.test(this.type))}).map(function(a,b){var c=f(this).val();return c==null?null:f.isArray(c)?f.map(c,function(a,c){return{name:b.name,value:a.replace(bD,"\r\n")}}):{name:b.name,value:c.replace(bD,"\r\n")}}).get()}}),f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){f.fn[b]=function(a){return this.bind(b,a)}}),f.each(["get","post"],function(a,c){f[c]=function(a,d,e,g){return f.isFunction(d)&&(g=g||e,e=d,d=b),f.ajax({type:c,url:a,data:d,success:e,dataType:g})}}),f.extend({getScript:function(a,c){return f.get(a,b,c,"script")},getJSON:function(a,b,c){return f.get(a,b,c,"json")},ajaxSetup:function(a,b){b?f.extend(!0,a,f.ajaxSettings,b):(b=a,a=f.extend(!0,f.ajaxSettings,b));for(var c in{context:1,url:1})c in b?a[c]=b[c]:c in f.ajaxSettings&&(a[c]=f.ajaxSettings[c]);return a},ajaxSettings:{url:bT,isLocal:bH.test(bU[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":"*/*"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML}},ajaxPrefilter:bW(bR),ajaxTransport:bW(bS),ajax:function(a,c){function w(a,c,l,m){if(s===2)return;s=2,q&&clearTimeout(q),p=b,n=m||"",v.readyState=a?4:0;var o,r,u,w=l?bZ(d,v,l):b,x,y;if(a>=200&&a<300||a===304){if(d.ifModified){if(x=v.getResponseHeader("Last-Modified"))f.lastModified[k]=x;if(y=v.getResponseHeader("Etag"))f.etag[k]=y}if(a===304)c="notmodified",o=!0;else try{r=b$(d,w),c="success",o=!0}catch(z){c="parsererror",u=z}}else{u=c;if(!c||a)c="error",a<0&&(a=0)}v.status=a,v.statusText=c,o?h.resolveWith(e,[r,c,v]):h.rejectWith(e,[v,c,u]),v.statusCode(j),j=b,t&&g.trigger("ajax"+(o?"Success":"Error"),[v,d,o?r:u]),i.resolveWith(e,[v,c]),t&&(g.trigger("ajaxComplete",[v,d]),--f.active||f.event.trigger("ajaxStop"))}typeof a=="object"&&(c=a,a=b),c=c||{};var d=f.ajaxSetup({},c),e=d.context||d,g=e!==d&&(e.nodeType||e instanceof f)?f(e):f.event,h=f.Deferred(),i=f._Deferred(),j=d.statusCode||{},k,l={},m={},n,o,p,q,r,s=0,t,u,v={readyState:0,setRequestHeader:function(a,b){if(!s){var c=a.toLowerCase();a=m[c]=m[c]||a,l[a]=b}return this},getAllResponseHeaders:function(){return s===2?n:null},getResponseHeader:function(a){var c;if(s===2){if(!o){o={};while(c=bF.exec(n))o[c[1].toLowerCase()]=c[2]}c=o[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){return s||(d.mimeType=a),this},abort:function(a){return a=a||"abort",p&&p.abort(a),w(0,a),this}};h.promise(v),v.success=v.done,v.error=v.fail,v.complete=i.done,v.statusCode=function(a){if(a){var b;if(s<2)for(b in a)j[b]=[j[b],a[b]];else b=a[v.status],v.then(b,b)}return this},d.url=((a||d.url)+"").replace(bE,"").replace(bJ,bU[1]+"//"),d.dataTypes=f.trim(d.dataType||"*").toLowerCase().split(bN),d.crossDomain==null&&(r=bP.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]==bU[1]&&r[2]==bU[2]&&(r[3]||(r[1]==="http:"?80:443))==(bU[3]||(bU[1]==="http:"?80:443)))),d.data&&d.processData&&typeof d.data!="string"&&(d.data=f.param(d.data,d.traditional)),bX(bR,d,c,v);if(s===2)return!1;t=d.global,d.type=d.type.toUpperCase(),d.hasContent=!bI.test(d.type),t&&f.active++===0&&f.event.trigger("ajaxStart");if(!d.hasContent){d.data&&(d.url+=(bK.test(d.url)?"&":"?")+d.data),k=d.url;if(d.cache===!1){var x=f.now(),y=d.url.replace(bO,"$1_="+x);d.url=y+(y===d.url?(bK.test(d.url)?"&":"?")+"_="+x:"")}}(d.data&&d.hasContent&&d.contentType!==!1||c.contentType)&&v.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(k=k||d.url,f.lastModified[k]&&v.setRequestHeader("If-Modified-Since",f.lastModified[k]),f.etag[k]&&v.setRequestHeader("If-None-Match",f.etag[k])),v.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+(d.dataTypes[0]!=="*"?", */*; q=0.01":""):d.accepts["*"]);for(u in d.headers)v.setRequestHeader(u,d.headers[u]);if(!d.beforeSend||d.beforeSend.call(e,v,d)!==!1&&s!==2){for(u in{success:1,error:1,complete:1})v[u](d[u]);p=bX(bS,d,c,v);if(!p)w(-1,"No Transport");else{v.readyState=1,t&&g.trigger("ajaxSend",[v,d]),d.async&&d.timeout>0&&(q=setTimeout(function(){v.abort("timeout")},d.timeout));try{s=1,p.send(l,w)}catch(z){status<2?w(-1,z):f.error(z)}}return v}return v.abort(),!1},param:function(a,c){var d=[],e=function(a,b){b=f.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=f.ajaxSettings.traditional);if(f.isArray(a)||a.jquery&&!f.isPlainObject(a))f.each(a,function(){e(this.name,this.value)});else for(var g in a)bY(g,a[g],c,e);return d.join("&").replace(bB,"+")}}),f.extend({active:0,lastModified:{},etag:{}});var b_=f.now(),ca=/(\=)\?(&|$)|\?\?/i;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return f.expando+"_"+b_++}}),f.ajaxPrefilter("json jsonp",function(b,c,d){var e=b.contentType==="application/x-www-form-urlencoded"&&typeof b.data=="string";if(b.dataTypes[0]==="jsonp"||b.jsonp!==!1&&(ca.test(b.url)||e&&ca.test(b.data))){var g,h=b.jsonpCallback=f.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,i=a[h],j=b.url,k=b.data,l="$1"+h+"$2";return b.jsonp!==!1&&(j=j.replace(ca,l),b.url===j&&(e&&(k=k.replace(ca,l)),b.data===k&&(j+=(/\?/.test(j)?"&":"?")+b.jsonp+"="+h))),b.url=j,b.data=k,a[h]=function(a){g=[a]},d.always(function(){a[h]=i,g&&f.isFunction(i)&&a[h](g[0])}),b.converters["script json"]=function(){return g||f.error(h+" was not called"),g[0]},b.dataTypes[0]="json","script"}}),f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){return f.globalEval(a),a}}}),f.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),f.ajaxTransport("script",function(a){if(a.crossDomain){var d,e=c.head||c.getElementsByTagName("head")[0]||c.documentElement;return{send:function(f,g){d=c.createElement("script"),d.async="async",a.scriptCharset&&(d.charset=a.scriptCharset),d.src=a.url,d.onload=d.onreadystatechange=function(a,c){if(c||!d.readyState||/loaded|complete/.test(d.readyState))d.onload=d.onreadystatechange=null,e&&d.parentNode&&e.removeChild(d),d=b,c||g(200,"success")},e.insertBefore(d,e.firstChild)},abort:function(){d&&d.onload(0,1)}}}});var cb=a.ActiveXObject?function(){for(var a in cd)cd[a](0,1)}:!1,cc=0,cd;f.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&ce()||cf()}:ce,function(a){f.extend(f.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})}(f.ajaxSettings.xhr()),f.support.ajax&&f.ajaxTransport(function(c){if(!c.crossDomain||f.support.cors){var d;return{send:function(e,g){var h=c.xhr(),i,j;c.username?h.open(c.type,c.url,c.async,c.username,c.password):h.open(c.type,c.url,c.async);if(c.xhrFields)for(j in c.xhrFields)h[j]=c.xhrFields[j];c.mimeType&&h.overrideMimeType&&h.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(j in e)h.setRequestHeader(j,e[j])}catch(k){}h.send(c.hasContent&&c.data||null),d=function(a,e){var j,k,l,m,n;try{if(d&&(e||h.readyState===4)){d=b,i&&(h.onreadystatechange=f.noop,cb&&delete cd[i]);if(e)h.readyState!==4&&h.abort();else{j=h.status,l=h.getAllResponseHeaders(),m={},n=h.responseXML,n&&n.documentElement&&(m.xml=n),m.text=h.responseText;try{k=h.statusText}catch(o){k=""}!j&&c.isLocal&&!c.crossDomain?j=m.text?200:404:j===1223&&(j=204)}}}catch(p){e||g(-1,p)}m&&g(j,k,m,l)},!c.async||h.readyState===4?d():(i=++cc,cb&&(cd||(cd={},f(a).unload(cb)),cd[i]=d),h.onreadystatechange=d)},abort:function(){d&&d(0,1)}}}});var cg={},ch,ci,cj=/^(?:toggle|show|hide)$/,ck=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,cl,cm=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],cn,co=a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame;f.fn.extend({show:function(a,b,c){var d,e;if(a||a===0)return this.animate(cr("show",3),a,b,c);for(var g=0,h=this.length;g<h;g++)d=this[g],d.style&&(e=d.style.display,!f._data(d,"olddisplay")&&e==="none"&&(e=d.style.display=""),e===""&&f.css(d,"display")==="none"&&f._data(d,"olddisplay",cs(d.nodeName)));for(g=0;g<h;g++){d=this[g];if(d.style){e=d.style.display;if(e===""||e==="none")d.style.display=f._data(d,"olddisplay")||""}}return this},hide:function(a,b,c){if(a||a===0)return this.animate(cr("hide",3),a,b,c);for(var d=0,e=this.length;d<e;d++)if(this[d].style){var g=f.css(this[d],"display");g!=="none"&&!f._data(this[d],"olddisplay")&&f._data(this[d],"olddisplay",g)}for(d=0;d<e;d++)this[d].style&&(this[d].style.display="none");return this},_toggle:f.fn.toggle,toggle:function(a,b,c){var d=typeof a=="boolean";return f.isFunction(a)&&f.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:f(this).is(":hidden");f(this)[b?"show":"hide"]()}):this.animate(cr("toggle",3),a,b,c),this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=f.speed(b,c,d);return f.isEmptyObject(a)?this.each(e.complete,[!1]):(a=f.extend({},a),this[e.queue===!1?"each":"queue"](function(){e.queue===!1&&f._mark(this);var b=f.extend({},e),c=this.nodeType===1,d=c&&f(this).is(":hidden"),g,h,i,j,k,l,m,n,o;b.animatedProperties={};for(i in a){g=f.camelCase(i),i!==g&&(a[g]=a[i],delete a[i]),h=a[g],f.isArray(h)?(b.animatedProperties[g]=h[1],h=a[g]=h[0]):b.animatedProperties[g]=b.specialEasing&&b.specialEasing[g]||b.easing||"swing";if(h==="hide"&&d||h==="show"&&!d)return b.complete.call(this);c&&(g==="height"||g==="width")&&(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],f.css(this,"display")==="inline"&&f.css(this,"float")==="none"&&(f.support.inlineBlockNeedsLayout?(j=cs(this.nodeName),j==="inline"?this.style.display="inline-block":(this.style.display="inline",this.style.zoom=1)):this.style.display="inline-block"))}b.overflow!=null&&(this.style.overflow="hidden");for(i in a)k=new f.fx(this,b,i),h=a[i],cj.test(h)?k[h==="toggle"?d?"show":"hide":h]():(l=ck.exec(h),m=k.cur(),l?(n=parseFloat(l[2]),o=l[3]||(f.cssNumber[i]?"":"px"),o!=="px"&&(f.style(this,i,(n||1)+o),m=(n||1)/k.cur()*m,f.style(this,i,m+o)),l[1]&&(n=(l[1]==="-="?-1:1)*n+m),k.custom(m,n,o)):k.custom(m,h,""));return!0}))},stop:function(a,b){return a&&this.queue([]),this.each(function(){var a=f.timers,c=a.length;b||f._unmark(!0,this);while(c--)a[c].elem===this&&(b&&a[c](!0),a.splice(c,1))}),b||this.dequeue(),this}}),f.each({slideDown:cr("show",1),slideUp:cr("hide",1),slideToggle:cr("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){f.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),f.extend({speed:function(a,b,c){var d=a&&typeof a=="object"?f.extend({},a):{complete:c||!c&&b||f.isFunction(a)&&a,duration:a,easing:c&&b||b&&!f.isFunction(b)&&b};return d.duration=f.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in f.fx.speeds?f.fx.speeds[d.duration]:f.fx.speeds._default,d.old=d.complete,d.complete=function(a){f.isFunction(d.old)&&d.old.call(this),d.queue!==!1?f.dequeue(this):a!==!1&&f._unmark(this)},d},easing:{linear:function(a,b,c,d){return c+d*a},swing:function(a,b,c,d){return(-Math.cos(a*Math.PI)/2+.5)*d+c}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{}}}),f.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(f.fx.step[this.prop]||f.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]==null||!!this.elem.style&&this.elem.style[this.prop]!=null){var a,b=f.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a}return this.elem[this.prop]},custom:function(a,b,c){function h(a){return d.step(a)}var d=this,e=f.fx,g;this.startTime=cn||cp(),this.start=a,this.end=b,this.unit=c||this.unit||(f.cssNumber[this.prop]?"":"px"),this.now=this.start,this.pos=this.state=0,h.elem=this.elem,h()&&f.timers.push(h)&&!cl&&(co?(cl=!0,g=function(){cl&&(co(g),e.tick())},co(g)):cl=setInterval(e.tick,e.interval))},show:function(){this.options.orig[this.prop]=f.style(this.elem,this.prop),this.options.show=!0,this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),f(this.elem).show()},hide:function(){this.options.orig[this.prop]=f.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var b=cn||cp(),c=!0,d=this.elem,e=this.options,g,h;if(a||b>=e.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),e.animatedProperties[this.prop]=!0;for(g in e.animatedProperties)e.animatedProperties[g]!==!0&&(c=!1);if(c){e.overflow!=null&&!f.support.shrinkWrapBlocks&&f.each(["","X","Y"],function(a,b){d.style["overflow"+b]=e.overflow[a]}),e.hide&&f(d).hide();if(e.hide||e.show)for(var i in e.animatedProperties)f.style(d,i,e.orig[i]);e.complete.call(d)}return!1}return e.duration==Infinity?this.now=b:(h=b-this.startTime,this.state=h/e.duration,this.pos=f.easing[e.animatedProperties[this.prop]](this.state,h,0,1,e.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},f.extend(f.fx,{tick:function(){for(var a=f.timers,b=0;b<a.length;++b)a[b]()||a.splice(b--,1);a.length||f.fx.stop()},interval:13,stop:function(){clearInterval(cl),cl=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){f.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=(a.prop==="width"||a.prop==="height"?Math.max(0,a.now):a.now)+a.unit:a.elem[a.prop]=a.now}}}),f.expr&&f.expr.filters&&(f.expr.filters.animated=function(a){return f.grep(f.timers,function(b){return a===b.elem}).length});var ct=/^t(?:able|d|h)$/i,cu=/^(?:body|html)$/i;"getBoundingClientRect"in c.documentElement?f.fn.offset=function(a){var b=this[0],c;if(a)return this.each(function(b){f.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return f.offset.bodyOffset(b);try{c=b.getBoundingClientRect()}catch(d){}var e=b.ownerDocument,g=e.documentElement;if(!c||!f.contains(g,b))return c?{top:c.top,left:c.left}:{top:0,left:0};var h=e.body,i=cv(e),j=g.clientTop||h.clientTop||0,k=g.clientLeft||h.clientLeft||0,l=i.pageYOffset||f.support.boxModel&&g.scrollTop||h.scrollTop,m=i.pageXOffset||f.support.boxModel&&g.scrollLeft||h.scrollLeft,n=c.top+l-j,o=c.left+m-k;return{top:n,left:o}}:f.fn.offset=function(a){var b=this[0];if(a)return this.each(function(b){f.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return f.offset.bodyOffset(b);f.offset.initialize();var c,d=b.offsetParent,e=b,g=b.ownerDocument,h=g.documentElement,i=g.body,j=g.defaultView,k=j?j.getComputedStyle(b,null):b.currentStyle,l=b.offsetTop,m=b.offsetLeft;while((b=b.parentNode)&&b!==i&&b!==h){if(f.offset.supportsFixedPosition&&k.position==="fixed")break;c=j?j.getComputedStyle(b,null):b.currentStyle,l-=b.scrollTop,m-=b.scrollLeft,b===d&&(l+=b.offsetTop,m+=b.offsetLeft,f.offset.doesNotAddBorder&&(!f.offset.doesAddBorderForTableAndCells||!ct.test(b.nodeName))&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),e=d,d=b.offsetParent),f.offset.subtractsBorderForOverflowNotVisible&&c.overflow!=="visible"&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),k=c}if(k.position==="relative"||k.position==="static")l+=i.offsetTop,m+=i.offsetLeft;return f.offset.supportsFixedPosition&&k.position==="fixed"&&(l+=Math.max(h.scrollTop,i.scrollTop),m+=Math.max(h.scrollLeft,i.scrollLeft)),{top:l,left:m}},f.offset={initialize:function(){var a=c.body,b=c.createElement("div"),d,e,g,h,i=parseFloat(f.css(a,"marginTop"))||0,j="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";f.extend(b.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"}),b.innerHTML=j,a.insertBefore(b,a.firstChild),d=b.firstChild,e=d.firstChild,h=d.nextSibling.firstChild.firstChild,this.doesNotAddBorder=e.offsetTop!==5,this.doesAddBorderForTableAndCells=h.offsetTop===5,e.style.position="fixed",e.style.top="20px",this.supportsFixedPosition=e.offsetTop===20||e.offsetTop===15,e.style.position=e.style.top="",d.style.overflow="hidden",d.style.position="relative",this.subtractsBorderForOverflowNotVisible=e.offsetTop===-5,this.doesNotIncludeMarginInBodyOffset=a.offsetTop!==i,a.removeChild(b),f.offset.initialize=f.noop},bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;return f.offset.initialize(),f.offset.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(f.css(a,"marginTop"))||0,c+=parseFloat(f.css(a,"marginLeft"))||0),{top:b,left:c}},setOffset:function(a,b,c){var d=f.css(a,"position");d==="static"&&(a.style.position="relative");var e=f(a),g=e.offset(),h=f.css(a,"top"),i=f.css(a,"left"),j=(d==="absolute"||d==="fixed")&&f.inArray("auto",[h,i])>-1,k={},l={},m,n;j?(l=e.position(),m=l.top,n=l.left):(m=parseFloat(h)||0,n=parseFloat(i)||0),f.isFunction(b)&&(b=b.call(a,c,g)),b.top!=null&&(k.top=b.top-g.top+m),b.left!=null&&(k.left=b.left-g.left+n),"using"in b?b.using.call(a,k):e.css(k)}},f.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),c=this.offset(),d=cu.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat(f.css(a,"marginTop"))||0,c.left-=parseFloat(f.css(a,"marginLeft"))||0,d.top+=parseFloat(f.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(f.css(b[0],"borderLeftWidth"))||0,{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||c.body;while(a&&!cu.test(a.nodeName)&&f.css(a,"position")==="static")a=a.offsetParent;return a})}}),f.each(["Left","Top"],function(a,c){var d="scroll"+c;f.fn[d]=function(c){var e,g;return c===b?(e=this[0],e?(g=cv(e),g?"pageXOffset"in g?g[a?"pageYOffset":"pageXOffset"]:f.support.boxModel&&g.document.documentElement[d]||g.document.body[d]:e[d]):null):this.each(function(){g=cv(this),g?g.scrollTo(a?f(g).scrollLeft():c,a?c:f(g).scrollTop()):this[d]=c})}}),f.each(["Height","Width"],function(a,c){var d=c.toLowerCase();f.fn["inner"+c]=function(){var a=this[0];return a&&a.style?parseFloat(f.css(a,d,"padding")):null},f.fn["outer"+c]=function(a){var b=this[0];return b&&b.style?parseFloat(f.css(b,d,a?"margin":"border")):null},f.fn[d]=function(a){var e=this[0];if(!e)return a==null?null:this;if(f.isFunction(a))return this.each(function(b){var c=f(this);c[d](a.call(this,b,c[d]()))});if(f.isWindow(e)){var g=e.document.documentElement["client"+c];return e.document.compatMode==="CSS1Compat"&&g||e.document.body["client"+c]||g}if(e.nodeType===9)return Math.max(e.documentElement["client"+c],e.body["scroll"+c],e.documentElement["scroll"+c],e.body["offset"+c],e.documentElement["offset"+c]);if(a===b){var h=f.css(e,d),i=parseFloat(h);return f.isNaN(i)?h:i}return this.css(d,typeof a=="string"?a:a+"px")}}),a.jQuery=a.$=f})(window),function(a,b){var c;a.rails=c={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote]",selectChangeSelector:"select[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input:file",CSRFProtection:function(b){var c=a('meta[name="csrf-token"]').attr("content");c&&b.setRequestHeader("X-CSRF-Token",c)},fire:function(b,c,d){var e=a.Event(c);return b.trigger(e,d),e.result!==!1},confirm:function(a){return confirm(a)},ajax:function(b){return a.ajax(b)},handleRemote:function(d){var e,f,g,h=d.data("cross-domain")||null,i=d.data("type")||a.ajaxSettings&&a.ajaxSettings.dataType;if(c.fire(d,"ajax:before")){if(d.is("form")){e=d.attr("method"),f=d.attr("action"),g=d.serializeArray();var j=d.data("ujs:submit-button");j&&(g.push(j),d.data("ujs:submit-button",null))}else d.is("select")?(e=d.data("method"),f=d.data("url"),g=d.serialize(),d.data("params")&&(g=g+"&"+d.data("params"))):(e=d.data("method"),f=d.attr("href"),g=d.data("params")||null);options={type:e||"GET",data:g,dataType:i,crossDomain:h,beforeSend:function(a,e){return e.dataType===b&&a.setRequestHeader("accept","*/*;q=0.5, "+e.accepts.script),c.fire(d,"ajax:beforeSend",[a,e])},success:function(a,b,c){d.trigger("ajax:success",[a,b,c])},complete:function(a,b){d.trigger("ajax:complete",[a,b])},error:function(a,b,c){d.trigger("ajax:error",[a,b,c])}},f&&a.extend(options,{url:f}),c.ajax(options)}},handleMethod:function(c){var d=c.attr("href"),e=c.data("method"),f=a("meta[name=csrf-token]").attr("content"),g=a("meta[name=csrf-param]").attr("content"),h=a('<form method="post" action="'+d+'"></form>'),i='<input name="_method" value="'+e+'" type="hidden" />';g!==b&&f!==b&&(i+='<input name="'+g+'" value="'+f+'" type="hidden" />'),h.hide().append(i).appendTo("body"),h.submit()},disableFormElements:function(b){b.find(c.disableSelector).each(function(){var b=a(this),c=b.is("button")?"html":"val";b.data("ujs:enable-with",b[c]()),b[c](b.data("disable-with")),b.attr("disabled","disabled")})},enableFormElements:function(b){b.find(c.enableSelector).each(function(){var b=a(this),c=b.is("button")?"html":"val";b.data("ujs:enable-with")&&b[c](b.data("ujs:enable-with")),b.removeAttr("disabled")})},allowAction:function(a){var b=a.data("confirm"),d=!1,e;return b?(c.fire(a,"confirm")&&(d=c.confirm(b),e=c.fire(a,"confirm:complete",[d])),d&&e):!0},blankInputs:function(b,c,d){var e=a(),f,g=c||"input,textarea";return b.find(g).each(function(){f=a(this);if(d?f.val():!f.val())e=e.add(f)}),e.length?e:!1},nonBlankInputs:function(a,b){return c.blankInputs(a,b,!0)},stopEverything:function(b){return a(b.target).trigger("ujs:everythingStopped"),b.stopImmediatePropagation(),!1},callFormSubmitBindings:function(c){var d=c.data("events"),e=!0;return d!==b&&d.submit!==b&&a.each(d.submit,function(a,b){if(typeof b.handler=="function")return e=b.handler(b.data)}),e}},a.ajaxPrefilter(function(a,b,d){a.crossDomain||c.CSRFProtection(d)}),a(c.linkClickSelector).live("click.rails",function(d){var e=a(this);if(!c.allowAction(e))return c.stopEverything(d);if(e.data("remote")!==b)return c.handleRemote(e),!1;if(e.data("method"))return c.handleMethod(e),!1}),a(c.selectChangeSelector).live("change.rails",function(b){var d=a(this);return c.allowAction(d)?(c.handleRemote(d),!1):c.stopEverything(b)}),a(c.formSubmitSelector).live("submit.rails",function(d){var e=a(this),f=e.data("remote")!==b,g=c.blankInputs(e,c.requiredInputSelector),h=c.nonBlankInputs(e,c.fileInputSelector);if(!c.allowAction(e))return c.stopEverything(d);if(g&&e.attr("novalidate")==b&&c.fire(e,"ajax:aborted:required",[g]))return c.stopEverything(d);if(f)return h?c.fire(e,"ajax:aborted:file",[h]):!a.support.submitBubbles&&c.callFormSubmitBindings(e)===!1?c.stopEverything(d):(c.handleRemote(e),!1);setTimeout(function(){c.disableFormElements(e)},13)}),a(c.formInputClickSelector).live("click.rails",function(b){var d=a(this);if(!c.allowAction(d))return c.stopEverything(b);var e=d.attr("name"),f=e?{name:e,value:d.val()}:null;d.closest("form").data("ujs:submit-button",f)}),a(c.formSubmitSelector).live("ajax:beforeSend.rails",function(b){this==b.target&&c.disableFormElements(a(this))}),a(c.formSubmitSelector
).live("ajax:complete.rails",function(b){this==b.target&&c.enableFormElements(a(this))})}(jQuery),function(){var a=this,b=a._,c={},d=Array.prototype,e=Object.prototype,f=Function.prototype,g=d.slice,h=d.unshift,i=e.toString,j=e.hasOwnProperty,k=d.forEach,l=d.map,m=d.reduce,n=d.reduceRight,o=d.filter,p=d.every,q=d.some,r=d.indexOf,s=d.lastIndexOf,t=Array.isArray,u=Object.keys,v=f.bind,w=function(a){return new B(a)};typeof module!="undefined"&&module.exports?(module.exports=w,w._=w):a._=w,w.VERSION="1.1.7";var x=w.each=w.forEach=function(a,b,d){if(a==null)return;if(k&&a.forEach===k)a.forEach(b,d);else if(a.length===+a.length){for(var e=0,f=a.length;e<f;e++)if(e in a&&b.call(d,a[e],e,a)===c)return}else for(var g in a)if(j.call(a,g)&&b.call(d,a[g],g,a)===c)return};w.map=function(a,b,c){var d=[];return a==null?d:l&&a.map===l?a.map(b,c):(x(a,function(a,e,f){d[d.length]=b.call(c,a,e,f)}),d)},w.reduce=w.foldl=w.inject=function(a,b,c,d){var e=c!==void 0;a==null&&(a=[]);if(m&&a.reduce===m)return d&&(b=w.bind(b,d)),e?a.reduce(b,c):a.reduce(b);x(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)});if(!e)throw new TypeError("Reduce of empty array with no initial value");return c},w.reduceRight=w.foldr=function(a,b,c,d){a==null&&(a=[]);if(n&&a.reduceRight===n)return d&&(b=w.bind(b,d)),c!==void 0?a.reduceRight(b,c):a.reduceRight(b);var e=(w.isArray(a)?a.slice():w.toArray(a)).reverse();return w.reduce(e,b,c,d)},w.find=w.detect=function(a,b,c){var d;return y(a,function(a,e,f){if(b.call(c,a,e,f))return d=a,!0}),d},w.filter=w.select=function(a,b,c){var d=[];return a==null?d:o&&a.filter===o?a.filter(b,c):(x(a,function(a,e,f){b.call(c,a,e,f)&&(d[d.length]=a)}),d)},w.reject=function(a,b,c){var d=[];return a==null?d:(x(a,function(a,e,f){b.call(c,a,e,f)||(d[d.length]=a)}),d)},w.every=w.all=function(a,b,d){var e=!0;return a==null?e:p&&a.every===p?a.every(b,d):(x(a,function(a,f,g){if(!(e=e&&b.call(d,a,f,g)))return c}),e)};var y=w.some=w.any=function(a,b,d){b=b||w.identity;var e=!1;return a==null?e:q&&a.some===q?a.some(b,d):(x(a,function(a,f,g){if(e|=b.call(d,a,f,g))return c}),!!e)};w.include=w.contains=function(a,b){var c=!1;return a==null?c:r&&a.indexOf===r?a.indexOf(b)!=-1:(y(a,function(a){if(c=a===b)return!0}),c)},w.invoke=function(a,b){var c=g.call(arguments,2);return w.map(a,function(a){return(b.call?b||a:a[b]).apply(a,c)})},w.pluck=function(a,b){return w.map(a,function(a){return a[b]})},w.max=function(a,b,c){if(!b&&w.isArray(a))return Math.max.apply(Math,a);var d={computed:-Infinity};return x(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g>=d.computed&&(d={value:a,computed:g})}),d.value},w.min=function(a,b,c){if(!b&&w.isArray(a))return Math.min.apply(Math,a);var d={computed:Infinity};return x(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g<d.computed&&(d={value:a,computed:g})}),d.value},w.sortBy=function(a,b,c){return w.pluck(w.map(a,function(a,d,e){return{value:a,criteria:b.call(c,a,d,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;return c<d?-1:c>d?1:0}),"value")},w.groupBy=function(a,b){var c={};return x(a,function(a,d){var e=b(a,d);(c[e]||(c[e]=[])).push(a)}),c},w.sortedIndex=function(a,b,c){c||(c=w.identity);var d=0,e=a.length;while(d<e){var f=d+e>>1;c(a[f])<c(b)?d=f+1:e=f}return d},w.toArray=function(a){return a?a.toArray?a.toArray():w.isArray(a)?g.call(a):w.isArguments(a)?g.call(a):w.values(a):[]},w.size=function(a){return w.toArray(a).length},w.first=w.head=function(a,b,c){return b!=null&&!c?g.call(a,0,b):a[0]},w.rest=w.tail=function(a,b,c){return g.call(a,b==null||c?1:b)},w.last=function(a){return a[a.length-1]},w.compact=function(a){return w.filter(a,function(a){return!!a})},w.flatten=function(a){return w.reduce(a,function(a,b){return w.isArray(b)?a.concat(w.flatten(b)):(a[a.length]=b,a)},[])},w.without=function(a){return w.difference(a,g.call(arguments,1))},w.uniq=w.unique=function(a,b,c){var d=c?w.map(a,c):a,e=[];return w.reduce(d,function(c,d,f){if(0==f||(b===!0?w.last(c)!=d:!w.include(c,d)))c[c.length]=d,e[e.length]=a[f];return c},[]),e},w.union=function(){return w.uniq(w.flatten(arguments))},w.intersection=w.intersect=function(a){var b=g.call(arguments,1);return w.filter(w.uniq(a),function(a){return w.every(b,function(b){return w.indexOf(b,a)>=0})})},w.difference=function(a,b){return w.filter(a,function(a){return!w.include(b,a)})},w.zip=function(){var a=g.call(arguments),b=w.max(w.pluck(a,"length")),c=Array(b);for(var d=0;d<b;d++)c[d]=w.pluck(a,""+d);return c},w.indexOf=function(a,b,c){if(a==null)return-1;var d,e;if(c)return d=w.sortedIndex(a,b),a[d]===b?d:-1;if(r&&a.indexOf===r)return a.indexOf(b);for(d=0,e=a.length;d<e;d++)if(a[d]===b)return d;return-1},w.lastIndexOf=function(a,b){if(a==null)return-1;if(s&&a.lastIndexOf===s)return a.lastIndexOf(b);var c=a.length;while(c--)if(a[c]===b)return c;return-1},w.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=Array(d);while(e<d)f[e++]=a,a+=c;return f},w.bind=function(a,b){if(a.bind===v&&v)return v.apply(a,g.call(arguments,1));var c=g.call(arguments,2);return function(){return a.apply(b,c.concat(g.call(arguments)))}},w.bindAll=function(a){var b=g.call(arguments,1);return b.length==0&&(b=w.functions(a)),x(b,function(b){a[b]=w.bind(a[b],a)}),a},w.memoize=function(a,b){var c={};return b||(b=w.identity),function(){var d=b.apply(this,arguments);return j.call(c,d)?c[d]:c[d]=a.apply(this,arguments)}},w.delay=function(a,b){var c=g.call(arguments,2);return setTimeout(function(){return a.apply(a,c)},b)},w.defer=function(a){return w.delay.apply(w,[a,1].concat(g.call(arguments,1)))};var z=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,a.apply(e,f)};c&&clearTimeout(d);if(c||!d)d=setTimeout(g,b)}};w.throttle=function(a,b){return z(a,b,!1)},w.debounce=function(a,b){return z(a,b,!0)},w.once=function(a){var b=!1,c;return function(){return b?c:(b=!0,c=a.apply(this,arguments))}},w.wrap=function(a,b){return function(){var c=[a].concat(g.call(arguments));return b.apply(this,c)}},w.compose=function(){var a=g.call(arguments);return function(){var b=g.call(arguments);for(var c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},w.after=function(a,b){return function(){if(--a<1)return b.apply(this,arguments)}},w.keys=u||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)j.call(a,c)&&(b[b.length]=c);return b},w.values=function(a){return w.map(a,w.identity)},w.functions=w.methods=function(a){var b=[];for(var c in a)w.isFunction(a[c])&&b.push(c);return b.sort()},w.extend=function(a){return x(g.call(arguments,1),function(b){for(var c in b)b[c]!==void 0&&(a[c]=b[c])}),a},w.defaults=function(a){return x(g.call(arguments,1),function(b){for(var c in b)a[c]==null&&(a[c]=b[c])}),a},w.clone=function(a){return w.isArray(a)?a.slice():w.extend({},a)},w.tap=function(a,b){return b(a),a},w.isEqual=function(a,b){if(a===b)return!0;var c=typeof a,d=typeof b;if(c!=d)return!1;if(a==b)return!0;if(!a&&b||a&&!b)return!1;a._chain&&(a=a._wrapped),b._chain&&(b=b._wrapped);if(a.isEqual)return a.isEqual(b);if(b.isEqual)return b.isEqual(a);if(w.isDate(a)&&w.isDate(b))return a.getTime()===b.getTime();if(w.isNaN(a)&&w.isNaN(b))return!1;if(w.isRegExp(a)&&w.isRegExp(b))return a.source===b.source&&a.global===b.global&&a.ignoreCase===b.ignoreCase&&a.multiline===b.multiline;if(c!=="object")return!1;if(a.length&&a.length!==b.length)return!1;var e=w.keys(a),f=w.keys(b);if(e.length!=f.length)return!1;for(var g in a)if(!(g in b)||!w.isEqual(a[g],b[g]))return!1;return!0},w.isEmpty=function(a){if(w.isArray(a)||w.isString(a))return a.length===0;for(var b in a)if(j.call(a,b))return!1;return!0},w.isElement=function(a){return!!a&&a.nodeType==1},w.isArray=t||function(a){return i.call(a)==="[object Array]"},w.isObject=function(a){return a===Object(a)},w.isArguments=function(a){return!!a&&!!j.call(a,"callee")},w.isFunction=function(a){return!!(a&&a.constructor&&a.call&&a.apply)},w.isString=function(a){return!!(a===""||a&&a.charCodeAt&&a.substr)},w.isNumber=function(a){return!!(a===0||a&&a.toExponential&&a.toFixed)},w.isNaN=function(a){return a!==a},w.isBoolean=function(a){return a===!0||a===!1},w.isDate=function(a){return!!(a&&a.getTimezoneOffset&&a.setUTCFullYear)},w.isRegExp=function(a){return!(!(a&&a.test&&a.exec)||!a.ignoreCase&&a.ignoreCase!==!1)},w.isNull=function(a){return a===null},w.isUndefined=function(a){return a===void 0},w.noConflict=function(){return a._=b,this},w.identity=function(a){return a},w.times=function(a,b,c){for(var d=0;d<a;d++)b.call(c,d)},w.mixin=function(a){x(w.functions(a),function(b){D(b,w[b]=a[b])})};var A=0;w.uniqueId=function(a){var b=A++;return a?a+b:b},w.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g},w.template=function(a,b){var c=w.templateSettings,d="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+a.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(c.interpolate,function(a,b){return"',"+b.replace(/\\'/g,"'")+",'"}).replace(c.evaluate||null,function(a,b){return"');"+b.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",e=new Function("obj",d);return b?e(b):e};var B=function(a){this._wrapped=a};w.prototype=B.prototype;var C=function(a,b){return b?w(a).chain():a},D=function(a,b){B.prototype[a]=function(){var a=g.call(arguments);return h.call(a,this._wrapped),C(b.apply(w,a),this._chain)}};w.mixin(w),x(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=d[a];B.prototype[a]=function(){return b.apply(this._wrapped,arguments),C(this._wrapped,this._chain)}}),x(["concat","join","slice"],function(a){var b=d[a];B.prototype[a]=function(){return C(b.apply(this._wrapped,arguments),this._chain)}}),B.prototype.chain=function(){return this._chain=!0,this},B.prototype.value=function(){return this._wrapped}}(),function(){var a=this,b=a.Backbone,c;typeof exports!="undefined"?c=exports:c=a.Backbone={},c.VERSION="0.5.3";var d=a._;!d&&typeof require!="undefined"&&(d=require("underscore")._);var e=a.jQuery||a.Zepto||a.ender;c.noConflict=function(){return a.Backbone=b,this},c.emulateHTTP=!1,c.emulateJSON=!1,c.Events={bind:function(a,b,c){var d=this._callbacks||(this._callbacks={}),e=d[a]||(d[a]=[]);return e.push([b,c]),this},unbind:function(a,b){var c;if(!a)this._callbacks={};else if(c=this._callbacks)if(!b)c[a]=[];else{var d=c[a];if(!d)return this;for(var e=0,f=d.length;e<f;e++)if(d[e]&&b===d[e][0]){d[e]=null;break}}return this},trigger:function(a){var b,c,d,e,f,g=2;if(!(c=this._callbacks))return this;while(g--){d=g?a:"all";if(b=c[d])for(var h=0,i=b.length;h<i;h++)(e=b[h])?(f=g?Array.prototype.slice.call(arguments,1):arguments,e[0].apply(e[1]||this,f)):(b.splice(h,1),h--,i--)}return this}},c.Model=function(a,b){var c;a||(a={});if(c=this.defaults)d.isFunction(c)&&(c=c.call(this)),a=d.extend({},c,a);this.attributes={},this._escapedAttributes={},this.cid=d.uniqueId("c"),this.set(a,{silent:!0}),this._changed=!1,this._previousAttributes=d.clone(this.attributes),b&&b.collection&&(this.collection=b.collection),this.initialize(a,b)},d.extend(c.Model.prototype,c.Events,{_previousAttributes:null,_changed:!1,idAttribute:"id",initialize:function(){},toJSON:function(){return d.clone(this.attributes)},get:function(a){return this.attributes[a]},escape:function(a){var b;if(b=this._escapedAttributes[a])return b;var c=this.attributes[a];return this._escapedAttributes[a]=w(c==null?"":""+c)},has:function(a){return this.attributes[a]!=null},set:function(a,b){b||(b={});if(!a)return this;a.attributes&&(a=a.attributes);var c=this.attributes,e=this._escapedAttributes;if(!b.silent&&this.validate&&!this._performValidation(a,b))return!1;this.idAttribute in a&&(this.id=a[this.idAttribute]);var f=this._changing;this._changing=!0;for(var g in a){var h=a[g];d.isEqual(c[g],h)||(c[g]=h,delete e[g],this._changed=!0,b.silent||this.trigger("change:"+g,this,h,b))}return!f&&!b.silent&&this._changed&&this.change(b),this._changing=!1,this},unset:function(a,b){if(a in this.attributes){b||(b={});var c=this.attributes[a],d={};return d[a]=void 0,!b.silent&&this.validate&&!this._performValidation(d,b)?!1:(delete this.attributes[a],delete this._escapedAttributes[a],a==this.idAttribute&&delete this.id,this._changed=!0,b.silent||(this.trigger("change:"+a,this,void 0,b),this.change(b)),this)}return this},clear:function(a){a||(a={});var b,c=this.attributes,d={};for(b in c)d[b]=void 0;if(!a.silent&&this.validate&&!this._performValidation(d,a))return!1;this.attributes={},this._escapedAttributes={},this._changed=!0;if(!a.silent){for(b in c)this.trigger("change:"+b,this,void 0,a);this.change(a)}return this},fetch:function(a){a||(a={});var b=this,d=a.success;return a.success=function(c,e,f){if(!b.set(b.parse(c,f),a))return!1;d&&d(b,c)},a.error=v(a.error,b,a),(this.sync||c.sync).call(this,"read",this,a)},save:function(a,b){b||(b={});if(a&&!this.set(a,b))return!1;var d=this,e=b.success;b.success=function(a,c,f){if(!d.set(d.parse(a,f),b))return!1;e&&e(d,a,f)},b.error=v(b.error,d,b);var f=this.isNew()?"create":"update";return(this.sync||c.sync).call(this,f,this,b)},destroy:function(a){a||(a={});if(this.isNew())return this.trigger("destroy",this,this.collection,a);var b=this,d=a.success;return a.success=function(c){b.trigger("destroy",b,b.collection,a),d&&d(b,c)},a.error=v(a.error,b,a),(this.sync||c.sync).call(this,"delete",this,a)},url:function(){var a=t(this.collection)||this.urlRoot||u();return this.isNew()?a:a+(a.charAt(a.length-1)=="/"?"":"/")+encodeURIComponent(this.id)},parse:function(a,b){return a},clone:function(){return new this.constructor(this)},isNew:function(){return this.id==null},change:function(a){this.trigger("change",this,a),this._previousAttributes=d.clone(this.attributes),this._changed=!1},hasChanged:function(a){return a?this._previousAttributes[a]!=this.attributes[a]:this._changed},changedAttributes:function(a){a||(a=this.attributes);var b=this._previousAttributes,c=!1;for(var e in a)d.isEqual(b[e],a[e])||(c=c||{},c[e]=a[e]);return c},previous:function(a){return!a||!this._previousAttributes?null:this._previousAttributes[a]},previousAttributes:function(){return d.clone(this._previousAttributes)},_performValidation:function(a,b){var c=this.validate(a);return c?(b.error?b.error(this,c,b):this.trigger("error",this,c,b),!1):!0}}),c.Collection=function(a,b){b||(b={}),b.comparator&&(this.comparator=b.comparator),d.bindAll(this,"_onModelEvent","_removeReference"),this._reset(),a&&this.reset(a,{silent:!0}),this.initialize.apply(this,arguments)},d.extend(c.Collection.prototype,c.Events,{model:c.Model,initialize:function(){},toJSON:function(){return this.map(function(a){return a.toJSON()})},add:function(a,b){if(d.isArray(a))for(var c=0,e=a.length;c<e;c++)this._add(a[c],b);else this._add(a,b);return this},remove:function(a,b){if(d.isArray(a))for(var c=0,e=a.length;c<e;c++)this._remove(a[c],b);else this._remove(a,b);return this},get:function(a){return a==null?null:this._byId[a.id!=null?a.id:a]},getByCid:function(a){return a&&this._byCid[a.cid||a]},at:function(a){return this.models[a]},sort:function(a){a||(a={});if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return this.models=this.sortBy(this.comparator),a.silent||this.trigger("reset",this,a),this},pluck:function(a){return d.map(this.models,function(b){return b.get(a)})},reset:function(a,b){return a||(a=[]),b||(b={}),this.each(this._removeReference),this._reset(),this.add(a,{silent:!0}),b.silent||this.trigger("reset",this,b),this},fetch:function(a){a||(a={});var b=this,d=a.success;return a.success=function(c,e,f){b[a.add?"add":"reset"](b.parse(c,f),a),d&&d(b,c)},a.error=v(a.error,b,a),(this.sync||c.sync).call(this,"read",this,a)},create:function(a,b){var c=this;b||(b={}),a=this._prepareModel(a,b);if(!a)return!1;var d=b.success;return b.success=function(a,e,f){c.add(a,b),d&&d(a,e,f)},a.save(null,b),a},parse:function(a,b){return a},chain:function(){return d(this.models).chain()},_reset:function(a){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(a,b){if(a instanceof c.Model)a.collection||(a.collection=this);else{var d=a;a=new this.model(d,{collection:this}),a.validate&&!a._performValidation(d,b)&&(a=!1)}return a},_add:function(a,b){b||(b={}),a=this._prepareModel(a,b);if(!a)return!1;var c=this.getByCid(a);if(c)throw new Error(["Can't add the same model to a set twice",c.id]);this._byId[a.id]=a,this._byCid[a.cid]=a;var d=b.at!=null?b.at:this.comparator?this.sortedIndex(a,this.comparator):this.length;return this.models.splice(d,0,a),a.bind("all",this._onModelEvent),this.length++,b.silent||a.trigger("add",a,this,b),a},_remove:function(a,b){return b||(b={}),a=this.getByCid(a)||this.get(a),a?(delete this._byId[a.id],delete this._byCid[a.cid],this.models.splice(this.indexOf(a),1),this.length--,b.silent||a.trigger("remove",a,this,b),this._removeReference(a),a):null},_removeReference:function(a){this==a.collection&&delete a.collection,a.unbind("all",this._onModelEvent)},_onModelEvent:function(a,b,c,d){if(a!="add"&&a!="remove"||c==this)a=="destroy"&&this._remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],this._byId[b.id]=b),this.trigger.apply(this,arguments);else return}});var f=["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","rest","last","without","indexOf","lastIndexOf","isEmpty","groupBy"];d.each(f,function(a){c.Collection.prototype[a]=function(){return d[a].apply(d,[this.models].concat(d.toArray(arguments)))}}),c.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)};var g=/:([\w\d]+)/g,h=/\*([\w\d]+)/g,i=/[-[\]{}()+?.,\\^$|#\s]/g;d.extend(c.Router.prototype,c.Events,{initialize:function(){},route:function(a,b,e){c.history||(c.history=new c.History),d.isRegExp(a)||(a=this._routeToRegExp(a)),c.history.route(a,d.bind(function(c){var d=this._extractParameters(a,c);e.apply(this,d),this.trigger.apply(this,["route:"+b].concat(d))},this))},navigate:function(a,b){c.history.navigate(a,b)},_bindRoutes:function(){if(!this.routes)return;var a=[];for(var b in this.routes)a.unshift([b,this.routes[b]]);for(var c=0,d=a.length;c<d;c++)this.route(a[c][0],a[c][1],this[a[c][1]])},_routeToRegExp:function(a){return a=a.replace(i,"\\$&").replace(g,"([^/]*)").replace(h,"(.*?)"),new RegExp("^"+a+"$")},_extractParameters:function(a,b){return a.exec(b).slice(1)}}),c.History=function(){this.handlers=[],d.bindAll(this,"checkUrl")};var j=/^#*/,k=/msie [\w.]+/,l=!1;d.extend(c.History.prototype,{interval:50,getFragment:function(a,b){if(a==null)if(this._hasPushState||b){a=window.location.pathname;var c=window.location.search;c&&(a+=c),a.indexOf(this.options.root)==0&&(a=a.substr(this.options.root.length))}else a=window.location.hash;return decodeURIComponent(a.replace(j,""))},start:function(a){if(l)throw new Error("Backbone.history has already been started");this.options=d.extend({},{root:"/"},this.options,a),this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&window.history&&window.history.pushState);var b=this.getFragment(),c=document.documentMode,f=k.exec(navigator.userAgent.toLowerCase())&&(!c||c<=7);f&&(this.iframe=e('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(b)),this._hasPushState?e(window).bind("popstate",this.checkUrl):"onhashchange"in window&&!f?e(window).bind("hashchange",this.checkUrl):setInterval(this.checkUrl,this.interval),this.fragment=b,l=!0;var g=window.location,h=g.pathname==this.options.root;if(this._wantsPushState&&!this._hasPushState&&!h)return this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&h&&g.hash&&(this.fragment=g.hash.replace(j,""),window.history.replaceState({},document.title,g.protocol+"//"+g.host+this.options.root+this.fragment));if(!this.options.silent)return this.loadUrl()},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(a){var b=this.getFragment();b==this.fragment&&this.iframe&&(b=this.getFragment(this.iframe.location.hash));if(b==this.fragment||b==decodeURIComponent(this.fragment))return!1;this.iframe&&this.navigate(b),this.loadUrl()||this.loadUrl(window.location.hash)},loadUrl:function(a){var b=this.fragment=this.getFragment(a),c=d.any(this.handlers,function(a){if(a.route.test(b))return a.callback(b),!0});return c},navigate:function(a,b){var c=(a||"").replace(j,"");if(this.fragment==c||this.fragment==decodeURIComponent(c))return;if(this._hasPushState){var d=window.location;c.indexOf(this.options.root)!=0&&(c=this.options.root+c),this.fragment=c,window.history.pushState({},document.title,d.protocol+"//"+d.host+c)}else window.location.hash=this.fragment=c,this.iframe&&c!=this.getFragment(this.iframe.location.hash)&&(this.iframe.document.open().close(),this.iframe.location.hash=c);b&&this.loadUrl(a)}}),c.View=function(a){this.cid=d.uniqueId("view"),this._configure(a||{}),this._ensureElement(),this.delegateEvents(),this.initialize.apply(this,arguments)};var m=function(a){return e(a,this.el)},n=/^(\S+)\s*(.*)$/,o=["model","collection","el","id","attributes","className","tagName"];d.extend(c.View.prototype,c.Events,{tagName:"div",$:m,initialize:function(){},render:function(){return this},remove:function(){return e(this.el).remove(),this},make:function(a,b,c){var d=document.createElement(a);return b&&e(d).attr(b),c&&e(d).html(c),d},delegateEvents:function(a){if(!a&&!(a=this.events))return;d.isFunction(a)&&(a=a.call(this)),e(this.el).unbind(".delegateEvents"+this.cid);for(var b in a){var c=this[a[b]];if(!c)throw new Error('Event "'+a[b]+'" does not exist');var f=b.match(n),g=f[1],h=f[2];c=d.bind(c,this),g+=".delegateEvents"+this.cid,h===""?e(this.el).bind(g,c):e(this.el).delegate(h,g,c)}},_configure:function(a){this.options&&(a=d.extend({},this.options,a));for(var b=0,c=o.length;b<c;b++){var e=o[b];a[e]&&(this[e]=a[e])}this.options=a},_ensureElement:function(){if(!this.el){var a=this.attributes||{};this.id&&(a.id=this.id),this.className&&(a["class"]=this.className),this.el=this.make(this.tagName,a)}else d.isString(this.el)&&(this.el=e(this.el).get(0))}});var p=function(a,b){var c=s(this,a,b);return c.extend=this.extend,c};c.Model.extend=c.Collection.extend=c.Router.extend=c.View.extend=p;var q={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};c.sync=function(a,b,f){var g=q[a],h=d.extend({type:g,dataType:"json"},f);return h.url||(h.url=t(b)||u()),!h.data&&b&&(a=="create"||a=="update")&&(h.contentType="application/json",h.data=JSON.stringify(b.toJSON())),c.emulateJSON&&(h.contentType="application/x-www-form-urlencoded",h.data=h.data?{model:h.data}:{}),c.emulateHTTP&&(g==="PUT"||g==="DELETE")&&(c.emulateJSON&&(h.data._method=g),h.type="POST",h.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",g)}),h.type!=="GET"&&!c.emulateJSON&&(h.processData=!1),e.ajax(h)};var r=function(){},s=function(a,b,c){var e;return b&&b.hasOwnProperty("constructor")?e=b.constructor:e=function(){return a.apply(this,arguments)},d.extend(e,a),r.prototype=a.prototype,e.prototype=new r,b&&d.extend(e.prototype,b),c&&d.extend(e,c),e.prototype.constructor=e,e.__super__=a.prototype,e},t=function(a){return!a||!a.url?null:d.isFunction(a.url)?a.url():a.url},u=function(){throw new Error('A "url" property or function must be specified')},v=function(a,b,c){return function(d){a?a(b,d,c):b.trigger("error",b,d,c)}},w=function(a){return a.replace(/&(?!\w+;|#\d+;|#x[\da-f]+;)/gi,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")}}.call(this),function(){var a={create:"POST",update:"PUT","delete":"DELETE",read:"GET"},b=function(a){return!a||!a.url?null:_.isFunction(a.url)?a.url():a.url},c=function(){throw new Error("A 'url' property or function must be specified")};Backbone.sync=function(d,e,f){var g=a[d],h=_.extend({type:g,dataType:"json",beforeSend:function(a){var b=$('meta[name="csrf-token"]').attr("content");b&&a.setRequestHeader("X-CSRF-Token",b)}},f);h.url||(h.url=b(e)||c());if(!h.data&&e&&(d=="create"||d=="update")){h.contentType="application/json";var i={};e.paramRoot?i[e.paramRoot]=e.toJSON():i=e.toJSON(),h.data=JSON.stringify(i)}return h.type!=="GET"&&(h.processData=!1),$.ajax(h)}}.call(this),function(a){return a.extend(a.fn,{backboneLink:function(b){return a(this).find(":input").each(function(){var c,d;return c=a(this),d=c.attr("name"),b.bind("change:"+d,function(){return c.val(b.get(d))}),a(this).bind("change",function(){var d;return c=a(this),d={},d[c.attr("name")]=c.val(),b.set(d)})})}})}(jQuery);var Audia=function(){var a=!0;if(typeof AudioContext=="function")var b=new AudioContext;else if(typeof webkitAudioContext=="function")var b=new webkitAudioContext;else a=!1;var c=function(a,b,c){return a<b?b:a>c?c:a},d={},e={},f=0,g=function(){this._id=++f,this._currentTime=0,this._duration=0,this._gain=null,this._onendedTimeout=null,this._muted=!1,this._playing=!1,this._source=null,this._startTime=null,this._volume=1;var a=arguments[0];if(typeof a=="string")this.src=a;else if(typeof a=="object")for(var b in a)this[b]=a[b];e[this._id]=this};return g.__defineGetter__("version",function(){return.1}),g.__defineGetter__("supported",function(){return a}),a?(g.muteAll=function(){for(var a in e)e[a].mute()},g.unmuteAll=function(){for(var a in e)e[a].unmute()},g.prototype.__defineGetter__("currentTime",function(){if(this._playing){var a=b.currentTime-this._startTime+this._currentTime;return a>this._duration?this._duration:a}return this._currentTime}),g.prototype.__defineSetter__("currentTime",function(a){var a=c(a,0,this._duration);if(this.currentTime!=a){var b=this._playing;this._stop(),this._currentTime=a,b&&this.play()}}),g.prototype.__defineGetter__("duration",function(){return this._duration}),g.prototype.__defineGetter__("muted",function(){return this._muted}),g.prototype.__defineGetter__("playing",function(){return this._playing}),g.prototype.__defineGetter__("src",function(){return this._src}),g.prototype.__defineSetter__("src",function(a){this._src=a;var c=this,e=b.createGainNode();e.connect(b.destination),e.gain.value=this._volume;var f=b.createBufferSource();f.connect(e),this._gain=e,this._source=f;if(a in d){f.buffer=d[a];return}var g=new XMLHttpRequest;g.open("GET",a,!0),g.responseType="arraybuffer",g.onload=function(){var e=b.createBuffer(g.response,!1);f.buffer=e,d[a]=e,c._duration=e.duration,c.onload()},g.send()}),g.prototype.__defineGetter__("volume",function(){return this._volume}),g.prototype.__defineSetter__("volume",function(a){var a=c(a,0,10);this._volume=a,this._gain.gain.value=a}),g.prototype.onended=function(){},g.prototype.onload=function(){},g.prototype.play=function(){if(this._playing)return;this._regenerateBuffer();var a=.01,c=this._duration-this._currentTime-a;this._source.noteGrainOn(0,this._currentTime,c),this._playing=!0,this._startTime=b.currentTime;var d=this;this._onendedTimeout=setTimeout(function(){d.onended(),d._stop(),d.currentTime=0,d.loop&&d.play()},c*1e3)},g.prototype.pause=function(){this._stop()},g.prototype.stop=function(){this._stop(),this._currentTime=0},g.prototype._stop=function(){if(!this._playing)return;this._onendedTimeout&&(clearTimeout(this._onendedTimeout),this._onendedTimeout=null),this._source.noteOff(0),this._expireBuffer(),this._currentTime+=b.currentTime-this._startTime,this._playing=!1},g.prototype._expireBuffer=function(){this._source=null},g.prototype.mute=function(){this._muted=!0,this._gain.gain.value=0},g.prototype.unmute=function(){this._muted=!1,this._gain.gain.value=this._volume},g.prototype._regenerateBuffer=function(){this.src=this._src},g):g}();!function(a){"use strict";var b;a(document).ready(function(){a.support.transition=function(){var a=document.body||document.documentElement,b=a.style,c=b.transition!==undefined||b.WebkitTransition!==undefined||b.MozTransition!==undefined||b.MsTransition!==undefined||b.OTransition!==undefined;return c}(),a.support.transition&&(b="TransitionEnd",a.browser.webkit?b="webkitTransitionEnd":a.browser.mozilla?b="transitionend":a.browser.opera&&(b="oTransitionEnd"))});var c=function(b,c){this.settings=a.extend({},a.fn.alert.defaults,c),this.$element=a(b).delegate(this.settings.selector,"click",this.close)};c.prototype={close:function(c){function e(){d.remove()}var d=a(this).parent(".alert-message");c&&c.preventDefault(),d.removeClass("in"),a.support.transition&&d.hasClass("fade")?d.bind(b,e):e()}},a.fn.alert=function(b){return b===!0?this.data("alert"):this.each(function(){var d=a(this);if(typeof b=="string")return d.data("alert")[b]();a(this).data("alert",new c(this,b))})},a.fn.alert.defaults={selector:".close"},a(document).ready(function(){new c(a("body"),{selector:".alert-message[data-alert] .close"})})}(window.jQuery||window.ender),!function(a){function d(a,b,c){return typeof a=="function"?a.apply(b,c):a}"use strict";var b;a(document).ready(function(){a.support.transition=function(){var a=document.body||document.documentElement,b=a.style,c=b.transition!==undefined||b.WebkitTransition!==undefined||b.MozTransition!==undefined||b.MsTransition!==undefined||b.OTransition!==undefined;return c}(),a.support.transition&&(b="TransitionEnd",a.browser.webkit?b="webkitTransitionEnd":a.browser.mozilla?b="transitionend":a.browser.opera&&(b="oTransitionEnd"))});var c=function(b,c){this.$element=a(b),this.options=c,this.enabled=!0,this.fixTitle()};c.prototype={show:function(){var b,c,e,f,g,h;if(this.hasContent()&&this.enabled){g=this.tip(),this.setContent(),this.options.animate&&g.addClass("fade"),g.remove().css({top:0,left:0,display:"block"}).prependTo(document.body),b=a.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight}),c=g[0].offsetWidth,e=g[0].offsetHeight,f=d(this.options.placement,this,[g[0],this.$element[0]]);switch(f){case"below":h={top:b.top+b.height+this.options.offset,left:b.left+b.width/2-c/2};break;case"above":h={top:b.top-e-this.options.offset,left:b.left+b.width/2-c/2};break;case"left":h={top:b.top+b.height/2-e/2,left:b.left-c-this.options.offset};break;case"right":h={top:b.top+b.height/2-e/2,left:b.left+b.width+this.options.offset}}g.css(h).addClass(f).addClass("in")}},setContent:function(){var a=this.tip();a.find(".twipsy-inner")[this.options.html?"html":"text"](this.getTitle()),a[0].className="twipsy"},hide:function(){function e(){d.remove()}var c=this,d=this.tip();d.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?d.bind(b,e):e()},fixTitle:function(){var a=this.$element;(a.attr("title")||typeof a.attr("data-original-title")!="string")&&a.attr("data-original-title",a.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getTitle:function(){var a,b=this.$element,c=this.options;return this.fixTitle(),typeof c.title=="string"?a=b.attr(c.title=="title"?"data-original-title":c.title):typeof c.title=="function"&&(a=c.title.call(b[0])),a=(""+a).replace(/(^\s*|\s*$)/,""),a||c.fallback},tip:function(){return this.$tip=this.$tip||a('<div class="twipsy" />').html(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?"hide":"show"]()}},a.fn.twipsy=function(b){return a.fn.twipsy.initWith.call(this,b,c,"twipsy"),this},a.fn.twipsy.initWith=function(b,c,d){function i(e){var f=a.data(e,d);return f||(f=new c(e,a.fn.twipsy.elementOptions(e,b)),a.data(e,d,f)),f}function j(){var a=i(this);a.hoverState="in",b.delayIn==0?a.show():(a.fixTitle(),setTimeout(function(){a.hoverState=="in"&&a.show()},b.delayIn))}function k(){var a=i(this);a.hoverState="out",b.delayOut==0?a.hide():setTimeout(function(){a.hoverState=="out"&&a.hide()},b.delayOut)}var e,f,g,h;return b===!0?this.data(d):typeof b=="string"?(e=this.data(d),e&&e[b](),this):(b=a.extend({},a.fn[d].defaults,b),b.live||this.each(function(){i(this)}),b.trigger!="manual"&&(f=b.live?"live":"bind",g=b.trigger=="hover"?"mouseenter":"focus",h=b.trigger=="hover"?"mouseleave":"blur",this[f](g,j)[f](h,k)),this)},a.fn.twipsy.Twipsy=c,a.fn.twipsy.defaults={animate:!0,delayIn:0,delayOut:0,fallback:"",placement:"above",html:!1,live:!1,offset:0,title:"title",trigger:"hover",template:'<div class="twipsy-arrow"></div><div class="twipsy-inner"></div>'},a.fn.twipsy.rejectAttrOptions=
["title"],a.fn.twipsy.elementOptions=function(b,c){var d=a(b).data(),e=a.fn.twipsy.rejectAttrOptions,f=e.length;while(f--)delete d[e[f]];return a.extend({},c,d)}}(window.jQuery||window.ender),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=c,this.enabled=!0,this.fixTitle()};b.prototype=a.extend({},a.fn.twipsy.Twipsy.prototype,{setContent:function(){var a=this.tip();a.find(".title")[this.options.html?"html":"text"](this.getTitle()),a.find(".content p")[this.options.html?"html":"text"](this.getContent()),a[0].className="popover"},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var a,b=this.$element,c=this.options;return typeof this.options.content=="string"?a=b.attr(this.options.content):typeof this.options.content=="function"&&(a=this.options.content.call(this.$element[0])),a},tip:function(){return this.$tip||(this.$tip=a('<div class="popover" />').html(this.options.template)),this.$tip}}),a.fn.popover=function(c){return typeof c=="object"&&(c=a.extend({},a.fn.popover.defaults,c)),a.fn.twipsy.initWith.call(this,c,b,"popover"),this},a.fn.popover.defaults=a.extend({},a.fn.twipsy.defaults,{placement:"right",content:"data-content",template:'<div class="arrow"></div><div class="inner"><h3 class="title"></h3><div class="content"><p></p></div></div>'}),a.fn.twipsy.rejectAttrOptions.push("content")}(window.jQuery||window.ender),function(a,b){function t(){var a=d++;return a in h?t():a}function u(a){if(a===null||typeof a!="object")return a;var b=a.constructor();for(var c in a)b[c]=u(a[c]);return b}var c=function(a){return new c.fn.init(a)},d=1,e=50,f=1,g={},h={},i={},j=[],k,l,m,n=0,o=1e3/e,p=(new Date).getTime(),q=Array.prototype.slice,r=/\s*,\s*/,s=/\s+/;c.fn=c.prototype={init:function(a){if(typeof a!="string")return a||(a=0,a in h||(h[a]=this)),a in h?(this[0]=a,this.length=1,this.__c||(this.__c={}),h[a]||(h[a]=this),h[a]):(this.length=0,this);var b=0,c,d,e=!1,f=!1,i,j,k,l,m;if(a==="*"){for(c in h)this[+c]=h[c],b++;return this.length=b,this}a.indexOf(",")!==-1?(f=!0,i=r):a.indexOf(" ")!==-1&&(e=!0,i=s);for(c in h){if(!h.hasOwnProperty(c))continue;d=h[c];if(e||f){j=a.split(i),l=0,m=j.length,k=0;for(;l<m;l++)d.__c[j[l]]&&k++;if(e&&k===m||f&&k>0)this[b++]=+c}else d.__c[a]&&(this[b++]=+c)}b>0&&!e&&!f&&this.extend(g[a]);if(j&&e)for(l=0;l<m;l++)this.extend(g[j[l]]);return this.length=b,this},addComponent:function(a){var b=[],c=0,d,e=0,f,h;if(arguments.length>1){f=arguments.length;for(;e<f;e++)this.__c[arguments[e]]=!0,b.push(arguments[e])}else if(a.indexOf(",")!==-1){h=a.split(r),f=h.length;for(;e<f;e++)this.__c[h[e]]=!0,b.push(h[e])}else this.__c[a]=!0,b.push(a);d=b.length;for(;c<d;c++)comp=g[b[c]],this.extend(comp),comp&&"init"in comp&&comp.init.call(this);return this.trigger("NewComponent",d),this},requires:function(a){var b=a.split(r),c=0,d=b.length,e;for(;c<d;++c)e=b[c],this.has(e)||this.addComponent(e);return this},removeComponent:function(a,b){if(b===!1){var c=g[a],d;for(d in c)delete this[d]}return delete this.__c[a],this.trigger("RemoveComponent",a),this},has:function(a){return!!this.__c[a]},attr:function(a,b){if(arguments.length===1)return typeof a=="string"?this[a]:(this.extend(a),this.trigger("Change",a),this);this[a]=b;var c={};return c[a]=b,this.trigger("Change",c),this},toArray:function(){return q.call(this,0)},delay:function(a,b){return this.each(function(){var c=this;setTimeout(function(){a.call(c)},b)}),this},bind:function(a,b){if(this.length===1){i[a]||(i[a]={});var c=i[a];return c[this[0]]||(c[this[0]]=[]),c[this[0]].push(b),this}return this.each(function(){i[a]||(i[a]={});var c=i[a];c[this[0]]||(c[this[0]]=[]),c[this[0]].push(b)}),this},unbind:function(a,b){return this.each(function(){var c=i[a],d=0,e,f;if(c&&c[this[0]])e=c[this[0]].length;else return this;if(!b)return delete c[this[0]],this;for(;d<e;d++)f=c[this[0]],f[d]==b&&(f.splice(d,1),d--)}),this},trigger:function(a,b){if(this.length===1){if(i[a]&&i[a][this[0]]){var c=i[a][this[0]],d=0,e=c.length;for(;d<e;d++)c[d].call(this,b)}return this}return this.each(function(){if(i[a]&&i[a][this[0]]){var c=i[a][this[0]],d=0,e=c.length;for(;d<e;d++)c[d].call(this,b)}}),this},each:function(a){var b=0,c=this.length;for(;b<c;b++){if(!h[this[b]])continue;a.call(h[this[b]],b)}return this},clone:function(){var a=this.__c,b,d,e=c.e();for(b in a)e.addComponent(b);for(d in this)e[d]=this[d];return e},setter:function(a,b){return c.support.setter?this.__defineSetter__(a,b):c.support.defineProperty?Object.defineProperty(this,a,{set:b,configurable:!0}):m.push({prop:a,obj:this,fn:b}),this},destroy:function(){this.each(function(){this.trigger("Remove");for(var a in i)this.unbind(a);delete h[this[0]]})}},c.fn.init.prototype=c.fn,c.extend=c.fn.extend=function(a){var b=this,c;if(!a)return b;for(c in a){if(b===a[c])continue;b[c]=a[c]}return b},c.extend({init:function(a,b){return c.viewport.init(a,b),this.trigger("Load"),this.timer.init(),this},stop:function(){return this.timer.stop(),c.stage.elem.parentNode.removeChild(c.stage.elem),this},pause:function(){return this._paused?(this.trigger("Unpause"),this._paused=!1,c.timer.init()):(this.trigger("Pause"),this._paused=!0,c.timer.stop(),c.keydown={}),this},timer:{prev:+(new Date),current:+(new Date),fps:0,init:function(){var b=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||null;b?(k=function(){c.timer.step(),l=b(k)},k()):k=setInterval(c.timer.step,1e3/e)},stop:function(){c.trigger("CraftyStop"),typeof k=="number"&&clearInterval(k);var b=a.cancelRequestAnimationFrame||a.webkitCancelRequestAnimationFrame||a.mozCancelRequestAnimationFrame||a.oCancelRequestAnimationFrame||a.msCancelRequestAnimationFrame||null;b&&b(l),k=null},step:function(){n=0;var a=(new Date).getTime();a-p>60*o&&(p=a-o);while(a>p)c.trigger("EnterFrame",{frame:f++}),p+=o,n++;n&&c.DrawManager.draw()},getFPS:function(){return this.fps}},e:function(){var a=t(),b;return h[a]=null,h[a]=b=c(a),arguments.length>0&&b.addComponent.apply(b,arguments),b.addComponent("obj"),b},c:function(a,b){g[a]=b},trigger:function(a,b){var d=i[a],e,f,g;for(e in d){if(!d.hasOwnProperty(e))continue;for(f=0,g=d[e].length;f<g;f++)d[e]&&d[e][f]&&(h[e]?d[e][f].call(c(+e),b):d[e][f].call(c,b))}},bind:function(a,b){i[a]||(i[a]={});var c=i[a];return c.global||(c.global=[]),c.global.push(b)-1},unbind:function(a,b){var c=i[a],d,e,f;for(d in c){if(!c.hasOwnProperty(d))continue;if(typeof b=="number")return delete c[d][b],!0;for(e=0,f=c[d].length;e<f;e++)if(c[d][e]===b)return delete c[d][e],!0}return!1},frame:function(){return f},components:function(){return g},isComp:function(a){return a in g},debug:function(){return h},settings:function(){var a={},b={};return{register:function(a,c){b[a]=c},modify:function(c,d){if(!b[c])return;b[c].call(a[c],d),a[c]=d},get:function(b){return a[b]}}}(),clone:u}),c.bind("Load",function(){!c.support.setter&&c.support.defineProperty&&(m=[],c.bind("EnterFrame",function(){var a=0,b=m.length,c;for(;a<b;++a)c=m[a],c.obj[c.prop]!==c.obj["_"+c.prop]&&c.fn.call(c.obj,c.obj[c.prop])}))}),a.Crafty=c}(window),function(a,b,c){function j(b){if(this._numProps<=0)return;var c,d;for(d in this._step)c=this._step[d],this[d]+=c.val,c.rem--==0&&(this.trigger("TweenEnd",d),delete this._step[d],this._numProps--);if(this.has("Mouse")){var e=a.over,f=a.mousePos;e&&e[0]==this[0]&&!this.isAt(f.x,f.y)?(this.trigger("MouseOut",a.lastEvent),a.over=null):(!e||e[0]!=this[0])&&this.isAt(f.x,f.y)&&(a.over=this,this.trigger("MouseOver",a.lastEvent))}}(function(a){function e(a,b,c){this.keys=a,this.map=c,this.obj=b}var b,c=function(a){b=a||64,this.map={}},d=" ";c.prototype={insert:function(a){var b=c.key(a),f=new e(b,a,this),g=0,h,i;for(g=b.x1;g<=b.x2;g++)for(h=b.y1;h<=b.y2;h++)i=g+d+h,this.map[i]||(this.map[i]=[]),this.map[i].push(a);return f},search:function(a,b){var e=c.key(a),f,g,h,i=[];b===undefined&&(b=!0);for(f=e.x1;f<=e.x2;f++)for(g=e.y1;g<=e.y2;g++)h=f+d+g,this.map[h]&&(i=i.concat(this.map[h]));if(b){var j,k,m=[],n={};for(f=0,l=i.length;f<l;f++){j=i[f];if(!j)continue;k=j[0],!n[k]&&j.x<a._x+a._w&&j._x+j._w>a._x&&j.y<a._y+a._h&&j._h+j._y>a._y&&(n[k]=i[f])}for(j in n)m.push(n[j]);return m}return i},remove:function(a,b){var e=0,f,g;arguments.length==1&&(b=a,a=c.key(b));for(e=a.x1;e<=a.x2;e++)for(f=a.y1;f<=a.y2;f++){g=e+d+f;if(this.map[g]){var h=this.map[g],i=0,j=h.length;for(;i<j;i++)h[i]&&h[i][0]===b[0]&&h.splice(i,1)}}},boundaries:function(){var a={x:0,y:0},c={x:0,y:0};for(var d in this.map){if(!this.map[d].length)continue;var e=d.split(" ");e[0]>a.x&&(a.x=e[0]),e[0]<c.x&&(c.x=e[0]),e[1]>a.y&&(a.y=e[1]),e[1]<c.y&&(c.y=e[1])}return a.x*=b,a.y*=b,c.x*=b,c.y*=b,{max:a,min:c}}},c.key=function(a){a.hasOwnProperty("mbr")&&(a=a.mbr());var c=~~(a._x/b),d=~~(a._y/b),e=~~((a._w+a._x)/b),f=~~((a._h+a._y)/b);return{x1:c,y1:d,x2:e,y2:f}},c.hash=function(a){return a.x1+d+a.y1+d+a.x2+d+a.y2},e.prototype={update:function(a){if(c.hash(c.key(a))!=c.hash(this.keys)){this.map.remove(this.keys,this.obj);var b=this.map.insert(this.obj);this.keys=b.keys}}},a.HashMap=c})(a),a.map=new a.HashMap;var d=Math,e=d.cos,f=d.sin,g=d.PI,h=g/180;a.c("2D",{_x:0,_y:0,_w:0,_h:0,_z:0,_rotation:0,_alpha:1,_visible:!0,_global:null,_origin:null,_mbr:null,_entry:null,_children:null,_parent:null,_changed:!1,init:function(){this._global=this[0],this._origin={x:0,y:0},this._children=[],a.support.setter?(this.__defineSetter__("x",function(a){this._attr("_x",a)}),this.__defineSetter__("y",function(a){this._attr("_y",a)}),this.__defineSetter__("w",function(a){this._attr("_w",a)}),this.__defineSetter__("h",function(a){this._attr("_h",a)}),this.__defineSetter__("z",function(a){this._attr("_z",a)}),this.__defineSetter__("rotation",function(a){this._attr("_rotation",a)}),this.__defineSetter__("alpha",function(a){this._attr("_alpha",a)}),this.__defineSetter__("visible",function(a){this._attr("_visible",a)}),this.__defineGetter__("x",function(){return this._x}),this.__defineGetter__("y",function(){return this._y}),this.__defineGetter__("w",function(){return this._w}),this.__defineGetter__("h",function(){return this._h}),this.__defineGetter__("z",function(){return this._z}),this.__defineGetter__("rotation",function(){return this._rotation}),this.__defineGetter__("alpha",function(){return this._alpha}),this.__defineGetter__("visible",function(){return this._visible}),this.__defineGetter__("parent",function(){return this._parent}),this.__defineGetter__("numChildren",function(){return this._children.length})):a.support.defineProperty?(Object.defineProperty(this,"x",{set:function(a){this._attr("_x",a)},get:function(){return this._x},configurable:!0}),Object.defineProperty(this,"y",{set:function(a){this._attr("_y",a)},get:function(){return this._y},configurable:!0}),Object.defineProperty(this,"w",{set:function(a){this._attr("_w",a)},get:function(){return this._w},configurable:!0}),Object.defineProperty(this,"h",{set:function(a){this._attr("_h",a)},get:function(){return this._h},configurable:!0}),Object.defineProperty(this,"z",{set:function(a){this._attr("_z",a)},get:function(){return this._z},configurable:!0}),Object.defineProperty(this,"rotation",{set:function(a){this._attr("_rotation",a)},get:function(){return this._rotation},configurable:!0}),Object.defineProperty(this,"alpha",{set:function(a){this._attr("_alpha",a)},get:function(){return this._alpha},configurable:!0}),Object.defineProperty(this,"visible",{set:function(a){this._attr("_visible",a)},get:function(){return this._visible},configurable:!0})):(this.x=this._x,this.y=this._y,this.w=this._w,this.h=this._h,this.z=this._z,this.rotation=this._rotation,this.alpha=this._alpha,this.visible=this._visible,this.bind("EnterFrame",function(){if(this.x!==this._x||this.y!==this._y||this.w!==this._w||this.h!==this._h||this.z!==this._z||this.rotation!==this._rotation||this.alpha!==this._alpha||this.visible!==this._visible){var a=this.mbr()||this.pos();if(this.rotation!==this._rotation)this._rotate(this.rotation);else{var b=this._mbr,c=!1;b&&(this.x!==this._x?(b._x-=this.x-this._x,c=!0):this.y!==this._y?(b._y-=this.y-this._y,c=!0):this.w!==this._w?(b._w-=this.w-this._w,c=!0):this.h!==this._h?(b._h-=this.h-this._h,c=!0):this.z!==this._z&&(b._z-=this.z-this._z,c=!0)),c&&this.trigger("Move",a)}this._x=this.x,this._y=this.y,this._w=this.w,this._h=this.h,this._z=this.z,this._rotation=this.rotation,this._alpha=this.alpha,this._visible=this.visible,this.trigger("Change",a),this.trigger("Move",a)}})),this._entry=a.map.insert(this),this.bind("Move",function(a){var b=this._mbr||this;this._entry.update(b),this._cascade(a)}),this.bind("Rotate",function(a){var b=this._mbr||this;this._entry.update(b),this._cascade(a)}),this.bind("Remove",function(){a.map.remove(this),this.detach()})},_rotate:function(a){var b=-1*(a%360),c=b*h,d=Math.cos(c),e=Math.sin(c),f={x:this._origin.x+this._x,y:this._origin.y+this._y};if(!b){this._mbr=null;if(!this._rotation%360)return}var g=f.x+(this._x-f.x)*d+(this._y-f.y)*e,i=f.y-(this._x-f.x)*e+(this._y-f.y)*d,j=f.x+(this._x+this._w-f.x)*d+(this._y-f.y)*e,k=f.y-(this._x+this._w-f.x)*e+(this._y-f.y)*d,l=f.x+(this._x+this._w-f.x)*d+(this._y+this._h-f.y)*e,m=f.y-(this._x+this._w-f.x)*e+(this._y+this._h-f.y)*d,n=f.x+(this._x-f.x)*d+(this._y+this._h-f.y)*e,o=f.y-(this._x-f.x)*e+(this._y+this._h-f.y)*d,p=Math.floor(Math.min(g,j,l,n)),q=Math.floor(Math.min(i,k,m,o)),r=Math.ceil(Math.max(g,j,l,n)),s=Math.ceil(Math.max(i,k,m,o));this._mbr={_x:p,_y:q,_w:r-p,_h:s-q};var t=this._rotation-a,u=t*h;this.trigger("Rotate",{cos:Math.cos(u),sin:Math.sin(u),deg:t,rad:u,o:{x:f.x,y:f.y},matrix:{M11:d,M12:e,M21:-e,M22:d}})},area:function(){return this._w*this._h},intersect:function(a,b,c,d){var e,f=this._mbr||this;return typeof a=="object"?e=a:e={x:a,y:b,w:c,h:d},f._x<e.x+e.w&&f._x+f._w>e.x&&f._y<e.y+e.h&&f._h+f._y>e.y},within:function(a,b,c,d){var e;return typeof a=="object"?e=a:e={x:a,y:b,w:c,h:d},e.x<=this.x&&e.x+e.w>=this.x+this.w&&e.y<=this.y&&e.y+e.h>=this.y+this.h},contains:function(a,b,c,d){var e;return typeof a=="object"?e=a:e={x:a,y:b,w:c,h:d},e.x>=this.x&&e.x+e.w<=this.x+this.w&&e.y>=this.y&&e.y+e.h<=this.y+this.h},pos:function(){return{_x:this._x,_y:this._y,_w:this._w,_h:this._h}},mbr:function(){return this._mbr?{_x:this._mbr._x,_y:this._mbr._y,_w:this._mbr._w,_h:this._mbr._h}:this.pos()},isAt:function(a,b){return this.map?this.map.containsPoint(a,b):this.x<=a&&this.x+this.w>=a&&this.y<=b&&this.y+this.h>=b},move:function(a,b){a.charAt(0)==="n"&&(this.y-=b),a.charAt(0)==="s"&&(this.y+=b);if(a==="e"||a.charAt(1)==="e")this.x+=b;if(a==="w"||a.charAt(1)==="w")this.x-=b;return this},shift:function(a,b,c,d){return a&&(this.x+=a),b&&(this.y+=b),c&&(this.w+=c),d&&(this.h+=d),this},_cascade:function(a){if(!a)return;var b=0,c=this._children,d=c.length,e;if(a.cos)for(;b<d;++b)e=c[b],"rotate"in e&&e.rotate(a);else{var f=this._mbr||this,g=f._x-a._x,h=f._y-a._y,i=f._w-a._w,j=f._h-a._h;for(;b<d;++b)e=c[b],e.shift(g,h,i,j)}},attach:function(){var a=0,b=arguments,c=arguments.length,d;for(;a<c;++a)d=b[a],d._parent&&d._parent.detach(d),d._parent=this,this._children.push(d);return this},detach:function(a){if(!a){for(var b=0;b<this._children.length;b++)this._children[b]._parent=null;return this._children=[],this}for(var b=0;b<this._children.length;b++)this._children[b]==a&&this._children.splice(b,1);return a._parent=null,this},origin:function(a,b){if(typeof a=="string")if(a==="centre"||a==="center"||a.indexOf(" ")===-1)a=this._w/2,b=this._h/2;else{var c=a.split(" ");if(c[0]==="top")b=0;else if(c[0]==="bottom")b=this._h;else if(c[0]==="middle"||c[1]==="center"||c[1]==="centre")b=this._h/2;c[1]==="center"||c[1]==="centre"||c[1]==="middle"?a=this._w/2:c[1]==="left"?a=0:c[1]==="right"&&(a=this._w)}return this._origin.x=a,this._origin.y=b,this},flip:function(a){a=a||"X",this["_flip"+a]=!0,this.trigger("Change")},rotate:function(a){this._origin.x=a.o.x-this._x,this._origin.y=a.o.y-this._y,this._attr("_rotation",a.theta)},_attr:function(b,c){var d=this.pos(),e=this.mbr()||d;if(b==="_rotation")this._rotate(c);else if(b==="_z")this._global=parseInt(c+a.zeroFill(this[0],5),10),this.trigger("reorder");else if(b=="_x"||b==="_y"||b==="_w"||b==="_h"){var f=this._mbr;f&&(f[b]-=this[b]-c),this[b]=c,this.trigger("Move",e)}this[b]=c,this.trigger("Change",e)}}),a.c("Physics",{_gravity:.4,_friction:.2,_bounce:.5,gravity:function(a){this._gravity=a}}),a.c("Gravity",{_gravity:.2,_gy:0,_falling:!0,_anti:null,init:function(){this.requires("2D")},gravity:function(a){return a&&(this._anti=a),this.bind("EnterFrame",this._enterframe),this},_enterframe:function(){this._falling?(this._gy+=this._gravity*2,this.y+=this._gy):this._gy=0;var b,c=!1,d=this.pos(),e,f=0,g;d._y++,d.x=d._x,d.y=d._y,d.w=d._w,d.h=d._h,e=a.map.search(d),g=e.length;for(;f<g;++f){b=e[f];if(b!==this&&b.has(this._anti)&&b.intersect(d)){c=b;break}}c?this._falling&&this.stopFalling(c):this._falling=!0},stopFalling:function(a){a&&(this.y=a._y-this._h),this._falling=!1,this._up&&(this._up=!1),this.trigger("hit")},antigravity:function(){this.unbind("EnterFrame",this._enterframe)}}),a.polygon=function(a){arguments.length>1&&(a=Array.prototype.slice.call(arguments,0)),this.points=a},a.polygon.prototype={containsPoint:function(a,b){var c=this.points,d,e,f=!1;for(d=0,e=c.length-1;d<c.length;e=d++)c[d][1]>b!=c[e][1]>b&&a<(c[e][0]-c[d][0])*(b-c[d][1])/(c[e][1]-c[d][1])+c[d][0]&&(f=!f);return f},shift:function(a,b){var c=0,d=this.points.length,e;for(;c<d;c++)e=this.points[c],e[0]+=a,e[1]+=b},rotate:function(a){var b=0,c=this.points.length,d,e,f;for(;b<c;b++)d=this.points[b],e=a.o.x+(d[0]-a.o.x)*a.cos+(d[1]-a.o.y)*a.sin,f=a.o.y-(d[0]-a.o.x)*a.sin+(d[1]-a.o.y)*a.cos,d[0]=e,d[1]=f}},a.circle=function(a,b,c){this.x=a,this.y=b,this.radius=c,this.points=[];var d;for(var e=0;e<8;e++)d=e*Math.PI/4,this.points[e]=[Math.sin(d)*c,Math.cos(d)*c]},a.circle.prototype={containsPoint:function(a,b){var c=this.radius,d=Math.sqrt,e=this.x-a,f=this.y-b;return e*e+f*f<c*c},shift:function(a,b){this.x+=a,this.y+=b;var c=0,d=this.points.length,e;for(;c<d;c++)e=this.points[c],e[0]+=a,e[1]+=b},rotate:function(){}},a.matrix=function(a){this.mtx=a,this.width=a[0].length,this.height=a.length},a.matrix.prototype={x:function(b){if(this.width!=b.height)return;var c=[];for(var d=0;d<this.height;d++){c[d]=[];for(var e=0;e<b.width;e++){var f=0;for(var g=0;g<this.width;g++)f+=this.mtx[d][g]*b.mtx[g][e];c[d][e]=f}}return new a.matrix(c)},e:function(a,b){return a<1||a>this.mtx.length||b<1||b>this.mtx[0].length?null:this.mtx[a-1][b-1]}},a.c("Collision",{init:function(){this.requires("2D")},collision:function(b){var c=this._mbr||this;return b||(b=new a.polygon([0,0],[c._w,0],[c._w,c._h],[0,c._h])),this.map=b,this.attach(this.map),this.map.shift(c._x,c._y),this},hit:function(b){var c=this._mbr||this,d=a.map.search(c,!1),e=0,f=d.length,g={},h,i,j,k,l="map"in this&&"containsPoint"in this.map,m=[];if(!f)return!1;for(;e<f;++e){i=d[e],j=i._mbr||i;if(!i)continue;h=i[0],!g[h]&&this[0]!==h&&i.__c[b]&&j._x<c._x+c._w&&j._x+j._w>c._x&&j._y<c._y+c._h&&j._h+j._y>c._y&&(g[h]=i)}for(k in g){i=g[k];if(l&&"map"in i){var n=this._SAT(this.map,i.map);n.obj=i,n.type="SAT",n&&m.push(n)}else m.push({obj:i,type:"MBR"})}return m.length?m:!1},onHit:function(a,b,c){var d=!1;return this.bind("EnterFrame",function(){var e=this.hit(a);e?(d=!0,b.call(this,e)):d&&(typeof c=="function"&&c.call(this),d=!1)}),this},_SAT:function(a,b){var c=a.points,d=b.points,e=0,f=c.length,g,h=d.length,i={x:0,y:0},j,k,l,m,n,o,p=null,q=0,r=null,s,t,u;for(;e<f;e++){t=c[e==f-1?0:e+1],u=c[e],i.x=-(t[1]-u[1]),i.y=t[0]-u[0],j=Math.sqrt(i.x*i.x+i.y*i.y),i.x/=j,i.y/=j,k=l=-1,m=n=-1;for(g=0;g<f;++g){s=c[g][0]*i.x+c[g][1]*i.y;if(s>m||m===-1)m=s;if(s<k||k===-1)k=s}for(g=0;g<h;++g){s=d[g][0]*i.x+d[g][1]*i.y;if(s>n||n===-1)n=s;if(s<l||l===-1)l=s}o=k<l?l-m:k-n;if(o>0)return!1;if(o>p||p===null)p=o,r={x:i.x,y:i.y}}for(e=0;e<h;e++){t=d[e==h-1?0:e+1],u=d[e],i.x=-(t[1]-u[1]),i.y=t[0]-u[0],j=Math.sqrt(i.x*i.x+i.y*i.y),i.x/=j,i.y/=j,k=l=-1,m=n=-1;for(g=0;g<f;++g){s=c[g][0]*i.x+c[g][1]*i.y;if(s>m||m===-1)m=s;if(s<k||k===-1)k=s}for(g=0;g<h;++g){s=d[g][0]*i.x+d[g][1]*i.y;if(s>n||n===-1)n=s;if(s<l||l===-1)l=s}o=k<l?l-m:k-n;if(o>0)return!1;if(o>p||p===null)p=o;o>q&&(q=o,r={x:i.x,y:i.y})}return{overlap:q,normal:r}}}),a.c("DOM",{_element:null,init:function(){function b(){var a=0,b=this.__c,c="";for(a in b)c+=" "+a;c=c.substr(1),this._element.className=c}this._element=c.createElement("div"),a.stage.inner.appendChild(this._element),this._element.style.position="absolute",this._element.id="ent"+this[0],this.bind("Change",function(){this._changed||(this._changed=!0,a.DrawManager.add(this))}),this.bind("NewComponent",b).bind("RemoveComponent",b),a.support.prefix==="ms"&&a.support.version<9&&(this._filters={},this.bind("Rotate",function(a){var b=a.matrix,c=this._element.style,d=b.M11.toFixed(8),e=b.M12.toFixed(8),f=b.M21.toFixed(8),g=b.M22.toFixed(8);this._filters.rotation="progid:DXImageTransform.Microsoft.Matrix(M11="+d+", M12="+e+", M21="+f+", M22="+g+",sizingMethod='auto expand')"})),this.bind("Remove",this.undraw)},DOM:function(a){return a&&a.nodeType&&(this.undraw(),this._element=a,this._element.style.position="absolute"),this},draw:function(){var b=this._element.style,c=this.__coord||[0,0,0,0],d={x:c[0],y:c[1]},e=a.support.prefix,f=[];this._visible?b.visibility="visible":b.visibility="hidden",a.support.css3dtransform?f.push("translate3d("+~~this._x+"px,"+~~this._y+"px,0)"):(b.left=~~this._x+"px",b.top=~~this._y+"px"),b.width=~~this._w+"px",b.height=~~this._h+"px",b.zIndex=this._z,b.opacity=this._alpha,b[e+"Opacity"]=this._alpha,e==="ms"&&a.support.version<9&&(a.support.version===8?this._filters.alpha="progid:DXImageTransform.Microsoft.Alpha(Opacity="+this._alpha*100+")":this._filters.alpha="alpha(opacity="+this._alpha*100+")");if(this._mbr){var g=this._origin.x+"px "+this._origin.y+"px";b.transformOrigin=g,b[e+"TransformOrigin"]=g,a.support.css3dtransform?f.push("rotateZ("+this._rotation+"deg)"):f.push("rotate("+this._rotation+"deg)")}return this._flipX&&(f.push("scaleX(-1)"),e==="ms"&&a.support.version<9&&(this._filters.flipX="fliph")),this._flipY&&(f.push("scaleY(-1)"),e==="ms"&&a.support.version<9&&(this._filters.flipY="flipv")),e==="ms"&&a.support.version<9&&this.applyFilters(),b.transform=f.join(" "),b[e+"Transform"]=f.join(" "),this.trigger("Draw",{style:b,type:"DOM",co:d}),this},applyFilters:function(){this._element.style.filter="";var a="";for(var b in this._filters){if(!this._filters.hasOwnProperty(b))continue;a+=this._filters[b]+" "}this._element.style.filter=a},undraw:function(){return a.stage.inner.removeChild(this._element),this},css:function(b,c){var d,e=this._element,f,g=e.style;if(typeof b=="object")for(d in b){if(!b.hasOwnProperty(d))continue;f=b[d],typeof f=="number"&&(f+="px"),g[a.DOM.camelize(d)]=f}else if(c)typeof c=="number"&&(c+="px"),g[a.DOM.camelize(b)]=c;else return a.DOM.getStyle(e,b);return this.trigger("Change"),this}});try{c.execCommand("BackgroundImageCache",!1,!0)}catch(i){}a.extend({DOM:{window:{init:function(){this.width=b.innerWidth||b.document.documentElement.clientWidth||b.document.body.clientWidth,this.height=b.innerHeight||b.document.documentElement.clientHeight||b.document.body.clientHeight},width:0,height:0},inner:function(a){var d=a.getBoundingClientRect(),e=d.left+(b.pageXOffset?b.pageXOffset:c.body.scrollTop),f=d.top+(b.pageYOffset?b.pageYOffset:c.body.scrollLeft),g=parseInt(this.getStyle(a,"border-left-width")||0,10)||parseInt(this.getStyle(a,"borderLeftWidth")||0,10)||0,h=parseInt(this.getStyle(a,"border-top-width")||0,10)||parseInt(this.getStyle(a,"borderTopWidth")||0,10)||0;return e+=g,f+=h,{x:e,y:f}},getStyle:function(a,d){var e;return a.currentStyle?e=a.currentStyle[this.camelize(d)]:b.getComputedStyle&&(e=c.defaultView.getComputedStyle(a,null).getPropertyValue(this.csselize(d))),e},camelize:function(a){return a.replace(/-+(.)?/g,function(a,b){return b?b.toUpperCase():""})},csselize:function(a){return a.replace(/[A-Z]/g,function(a){return a?"-"+a.toLowerCase():""})},translate:function(b,d){return{x:b-a.stage.x+c.body.scrollLeft+c.documentElement.scrollLeft-a.viewport._x,y:d-a.stage.y+c.body.scrollTop+c.documentElement.scrollTop-a.viewport._y}}}}),a.c("HTML",{inner:"",init:function(){this.requires("2D, DOM")},replace:function(a){this.inner=a,this._element.innerHTML=a},append:function(a){this.inner+=a,this._element.innerHTML+=a},prepend:function(a){this.inner=a+this.inner,this._element.innerHTML=a+this.inner}}),function(){var d=a.support={},e=navigator.userAgent.toLowerCase(),f=/(webkit)[ \/]([\w.]+)/.exec(e)||/(o)pera(?:.*version)?[ \/]([\w.]+)/.exec(e)||/(ms)ie ([\w.]+)/.exec(e)||/(moz)illa(?:.*? rv:([\w.]+))?/.exec(e)||[],g=/iPad|iPod|iPhone|Android|webOS/i.exec(e);g&&(a.mobile=g[0]),d.setter="__defineSetter__"in this&&"__defineGetter__"in this,d.defineProperty=function(){if(!1 in Object)return!1;try{Object.defineProperty({},"x",{})}catch(a){return!1}return!0}(),d.audio="Audio"in b,d.prefix=f[1]||f[0],d.prefix==="moz"&&(d.prefix="Moz"),d.prefix==="o"&&(d.prefix="O"),f[2]&&(d.versionName=f[2],d.version=+f[2].split(".")[0]),d.canvas="getContext"in c.createElement("canvas"),d.css3dtransform=typeof c.createElement("div").style[d.prefix+"Perspective"]!="undefined"}(),a.extend({randRange:function(a,b){return Math.floor(Math.random()*(b-a+1)+a)},zeroFill:function(a,b){return b-=a.toString().length,b>0?Array(b+(/\./.test(a)?2:1)).join("0")+a:a.toString()},sprite:function(b,c,d,e,f,g){var h,i,j,k,l,m,n;typeof b=="string"&&(e=d,d=c,b=1,c=1),typeof c=="string"&&(e=d,d=c,c=b),!g&&f&&(g=f),f=parseInt(f||0,10),g=parseInt(g||0,10),n=a.assets[d],n||(n=new Image,n.src=d,a.assets[d]=n,n.onload=function(){for(var b in e)a(b).each(function(){this.ready=!0,this.trigger("Change")})});for(h in e){if(!e.hasOwnProperty(h))continue;i=e[h],j=i[0]*(b+f),k=i[1]*(c+g),l=i[2]*b||b,m=i[3]*c||c,a.c(h,{ready:!1,__coord:[j,k,l,m],init:function(){this.requires("Sprite"),this.__trim=[0,0,0,0],this.__image=d,this.__coord=[this.__coord[0],this.__coord[1],this.__coord[2],this.__coord[3]],this.__tile=b,this.__tileh=c,this.__padding=[f,g],this.img=n,this.img.complete&&this.img.width>0&&(this.ready=!0,this.trigger("Change")),this.w=this.__coord[2],this.h=this.__coord[3]}})}return this},_events:{},addEvent:function(a,c,d,e){arguments.length===3&&(e=d,d=c,c=b.document);var f=function(c){var c=c||b.event;e.call(a,c)},g=a[0]||"";if(!this._events[g+c+d+e])this._events[g+c+d+e]=f;else return;c.attachEvent?c.attachEvent("on"+d,f):c.addEventListener(d,f,!1)},removeEvent:function(a,c,d,e){arguments.length===3&&(e=d,d=c,c=b.document);var f=a[0]||"",g=this._events[f+c+d+e];g&&(c.detachEvent?c.detachEvent("on"+d,g):c.removeEventListener(d,g,!1),delete this._events[f+c+d+e])},background:function(b){a.stage.elem.style.background=b},viewport:{width:0,height:0,_x:0,_y:0,scroll:function(b,c){c=Math.floor(c);var d=c-this[b],e=a.canvas.context,f=a.stage.inner.style,g;this[b]=c,b=="_x"?e&&e.translate(d,0):e&&e.translate(0,d),e&&a.DrawManager.drawAll(),f[b=="_x"?"left":"top"]=~~c+"px"},rect:function(){return{_x:-this._x,_y:-this._y,_w:this.width,_h:this.height}},pan:function(){function e(d){var e=0;for(c in b){var f=b[c];f.remTime>=0?(f.current+=f.diff,f.remTime--,a.viewport[c]=Math.floor(f.current),e++):delete b[c]}e&&a.viewport._clamp()}var b={},c,d=!1;return function(f,g,h){if(f=="reset"){for(c in b)b[c].remTime=0;return}a.viewport.follow(),b[f]={diff:-g/h,current:a.viewport[f],remTime:h},d||(a.bind("EnterFrame",e),d=!0)}}(),follow:function(){function e(){var e=b.x,f=b.y,g=b.w/2,h=b.h/2,i=a.viewport.width/2,j=a.viewport.height/2,k=e+g-i-c,l=f+h-j-d;a.viewport.x-=k,a.viewport.y-=l}var b,c,d;return function(f,g,h){f&&f.has("2D")&&(a.viewport.pan("reset"),f.bind("Change",e)),b&&b.unbind("Change",e),b=f,c=typeof g!="undefined"?g:0,d=typeof h!="undefined"?h:0}}(),centerOn:function(b,c){var d=b.x,e=b.y,f=b.w/2,g=b.h/2,h=a.viewport.width/2,i=a.viewport.height/2,j=d+f-h,k=e+g-i;a.viewport.pan("reset"),a.viewport.pan("x",j,c),a.viewport.pan("y",k,c)},zoom:function(){function e(){}var b=1,c={},d=a.support.prefix+"Transform";return function(c,e,f,g){var h=a.stage.inner.clientWidth,i=a.stage.inner.clientHeight,j=e/h,k=f/i,l=b*c,m=(l-b)/g;a.viewport.pan("reset"),a.stage.inner.style[d]="scale("+l+")"}}(),mouselook:function(){var b=!1,c=!1,d={};return function(e,f){if(typeof e=="boolean"){b=e,b?a.mouseObjs++:a.mouseObjs=Math.max(0,a.mouseObjs-1);return}if(!b)return;switch(e){case"move":case"drag":if(!c)return;diff={x:f.clientX-d.x,y:f.clientY-d.y},a.viewport.x=diff.x,a.viewport.y=diff.y,a.viewport._clamp();break;case"start":d.x=f.clientX-a.viewport.x,d.y=f.clientY-a.viewport.y,c=!0;break;case"stop":c=!1}}}(),_clamp:function(){var b=a.map.boundaries();b.max.x-=a.viewport.width,b.max.y-=a.viewport.height,a.viewport.x>b.max.x?a.viewport.x=-b.max.x:a.viewport.x<b.min.x&&(a.viewport.x=-b.min.x),a.viewport.y>b.max.y?a.viewport.y=-b.max.y:a.viewport.y<b.min.y&&(a.viewport.y=-b.min.y),console.log(a.viewport.y+" - ("+b.max.y+" "+b.min.y+")")},init:function(d,e){a.DOM.window.init(),this.width=!d||a.mobile?a.DOM.window.width:d,this.height=!e||a.mobile?a.DOM.window.height:e;var f=c.getElementById("cr-stage");a.stage={x:0,y:0,fullscreen:!1,elem:f?f:c.createElement("div"),inner:c.createElement("div")};if(!d&&!e||a.mobile)c.body.style.overflow="hidden",a.stage.fullscreen=!0;a.addEvent(this,b,"resize",function(){a.DOM.window.init();var b=a.DOM.window.width,c=a.DOM.window.height,d;a.stage.fullscreen&&(this.width=b,this.height=c,a.stage.elem.style.width=b+"px",a.stage.elem.style.height=c+"px",a._canvas&&(a._canvas.width=b+"px",a._canvas.height=c+"px",a.DrawManager.drawAll())),d=a.DOM.inner(a.stage.elem),a.stage.x=d.x,a.stage.y=d.y}),a.addEvent(this,b,"blur",function(){a.settings.get("autoPause")&&a.pause()}),a.addEvent(this,b,"focus",function(){a._paused&&a.settings.get("autoPause")&&a.pause()}),a.settings.register("stageSelectable",function(b){a.stage.elem.onselectstart=b?function(){return!0}:function(){return!1}}),a.settings.modify("stageSelectable",!1),a.settings.register("stageContextMenu",function(b){a.stage.elem.oncontextmenu=b?function(){return!0}:function(){return!1}}),a.settings.modify("stageContextMenu",!1),a.settings.register("autoPause",function(){}),a.settings.modify("autoPause",!1),f||(c.body.appendChild(a.stage.elem),a.stage.elem.id="cr-stage");var g=a.stage.elem.style,h;a.stage.elem.appendChild(a.stage.inner),a.stage.inner.style.position="absolute",a.stage.inner.style.zIndex="1",g.width=this.width+"px",g.height=this.height+"px",g.overflow="hidden";if(a.mobile){g.position="absolute",g.left="0px",g.top="0px";var i=c.createElement("meta"),j=c.getElementsByTagName("HEAD")[0];i.setAttribute("name","viewport"),i.setAttribute("content","width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"),j.appendChild(i),i=c.createElement("meta"),i.setAttribute("name","apple-mobile-web-app-capable"),i.setAttribute("content","yes"),j.appendChild(i),setTimeout(function(){b.scrollTo(0,1)},0),a.addEvent(this,b,"touchmove",function(a){a.preventDefault()}),a.stage.x=0,a.stage.y=0}else g.position="relative",h=a.DOM.inner(a.stage.elem),a.stage.x=h.x,a.stage.y=h.y;a.support.setter?(this.__defineSetter__("x",function(a){this.scroll("_x",a)}),this.__defineSetter__("y",function(a){this.scroll("_y",a)}),this.__defineGetter__("x",function(){return-this._x}),this.__defineGetter__("y",function(){return-this._y})):a.support.defineProperty?(Object.defineProperty(this,"x",{set:function(a){this.scroll("_x",a)},get:function(){return-this._x}}),Object.defineProperty(this,"y",{set:function(a){this.scroll("_y",a)},get:function(){return-this._y}})):(this.x=this._x,this.y=this._y,a.e("viewport"))}},keys:{BACKSPACE:8,TAB:9,ENTER:13,PAUSE:19,CAPS:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,MULTIPLY:106,ADD:107,SUBSTRACT:109,DECIMAL:110,DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SHIFT:16,CTRL:17,ALT:18,PLUS:187,COMMA:188,MINUS:189,PERIOD:190}}),a.c("viewport",{init:function(){this.bind("EnterFrame",function(){a.viewport._x!==a.viewport.x&&a.viewport.scroll("_x",a.viewport.x),a.viewport._y!==a.viewport.y&&a.viewport.scroll("_y",a.viewport.y)})}}),a.c("Sprite",{__image:"",__tile:0,__tileh:0,__padding:null,__trim:null,img:null,ready:!1,init:function(){this.__trim=[0,0,0,0];var a=function(a){var b=a.co,c=a.pos,d=a.ctx
;a.type==="canvas"?d.drawImage(this.img,b.x,b.y,b.w,b.h,c._x,c._y,c._w,c._h):a.type==="DOM"&&(this._element.style.background="url('"+this.__image+"') no-repeat -"+b.x+"px -"+b.y+"px")};this.bind("Draw",a).bind("RemoveComponent",function(b){b==="Sprite"&&this.unbind("Draw",a)})},sprite:function(a,b,c,d){return this.__coord=[a*this.__tile+this.__padding[0]+this.__trim[0],b*this.__tileh+this.__padding[1]+this.__trim[1],this.__trim[2]||c*this.__tile||this.__tile,this.__trim[3]||d*this.__tileh||this.__tileh],this.trigger("Change"),this},crop:function(a,b,c,d){var e=this._mbr||this.pos();return this.__trim=[],this.__trim[0]=a,this.__trim[1]=b,this.__trim[2]=c,this.__trim[3]=d,this.__coord[0]+=a,this.__coord[1]+=b,this.__coord[2]=c,this.__coord[3]=d,this._w=c,this._h=d,this.trigger("Change",e),this}}),a.c("Canvas",{init:function(){a.canvas.context||a.canvas.init(),a.DrawManager.total2D++,this.bind("Change",function(b){this._changed===!1?this._changed=a.DrawManager.add(b||this,this):b&&(this._changed=a.DrawManager.add(b,this))}),this.bind("Remove",function(){a.DrawManager.total2D--,a.DrawManager.add(this,this)})},draw:function(b,c,d,e,f){if(!this.ready)return;arguments.length===4&&(f=e,e=d,d=c,c=b,b=a.canvas.context);var g={_x:this._x+(c||0),_y:this._y+(d||0),_w:e||this._w,_h:f||this._h},h=b||a.canvas.context,i=this.__coord||[0,0,0,0],j={x:i[0]+(c||0),y:i[1]+(d||0),w:e||i[2],h:f||i[3]};this._mbr&&(h.save(),h.translate(this._origin.x+this._x,this._origin.y+this._y),g._x=-this._origin.x,g._y=-this._origin.y,h.rotate(this._rotation%360*(Math.PI/180)));if(this._alpha<1){var k=h.globalAlpha;h.globalAlpha=this._alpha}return this.trigger("Draw",{type:"canvas",pos:g,co:j,ctx:h}),this._mbr&&h.restore(),k&&(h.globalAlpha=k),this}}),a.extend({canvas:{context:null,elem:null,init:function(){if(!a.support.canvas){a.trigger("NoCanvas"),a.stop();return}var b;b=c.createElement("canvas"),b.width=a.viewport.width,b.height=a.viewport.height,b.style.position="absolute",b.style.left="0px",b.style.top="0px",a.stage.elem.appendChild(b),a.canvas.context=b.getContext("2d"),a.canvas._canvas=b}}}),a.extend({over:null,mouseObjs:0,mousePos:{},lastEvent:null,keydown:{},mouseDispatch:function(b){if(!a.mouseObjs)return;a.lastEvent=b;var c=-1,d,e,f=0,g,h=a.DOM.translate(b.clientX,b.clientY),i,j,k={},l=b.target?b.target:b.srcElement,m=b.type;m==="touchstart"?m="mousedown":m==="touchmove"?m="mousemove":m==="touchend"&&(m="mouseup"),b.realX=i=a.mousePos.x=h.x,b.realY=j=a.mousePos.y=h.y;if(l.nodeName!="CANVAS"){while(typeof l.id!="string"&&l.id.indexOf("ent")==-1)l=l.parentNode;ent=a(parseInt(l.id.replace("ent",""))),ent.has("Mouse")&&ent.isAt(i,j)&&(d=ent)}if(!d){e=a.map.search({_x:i,_y:j,_w:1,_h:1},!1);for(g=e.length;f<g;++f){if(!e[f].__c.Mouse||!e[f]._visible)continue;var n=e[f],o=!1;if(k[n[0]])continue;k[n[0]]=!0,n.map?n.map.containsPoint(i,j)&&(o=!0):n.isAt(i,j)&&(o=!0);if(o&&(n._z>=c||c===-1)){if(n._z===c&&n[0]<d[0])continue;c=n._z,d=n}}}d?m==="mousedown"?d.trigger("MouseDown",b):m==="mouseup"?d.trigger("MouseUp",b):m=="dblclick"?d.trigger("DoubleClick",b):m=="click"?d.trigger("Click",b):m==="mousemove"?this.over!==d&&(this.over&&(this.over.trigger("MouseOut",b),this.over=null),this.over=d,d.trigger("MouseOver",b)):d.trigger(m,b):(m==="mousemove"&&this.over&&(this.over.trigger("MouseOut",b),this.over=null),m==="mousedown"?a.viewport.mouselook("start",b):m==="mousemove"?a.viewport.mouselook("drag",b):m=="mouseup"&&a.viewport.mouselook("stop")),m==="mousemove"&&(this.lastEvent=b)},keyboardDispatch:function(b){b.key=b.keyCode||b.which,b.type==="keydown"?a.keydown[b.key]!==!0&&(a.keydown[b.key]=!0,a.trigger("KeyDown",b)):b.type==="keyup"&&(delete a.keydown[b.key],a.trigger("KeyUp",b))}}),a.bind("Load",function(){a.addEvent(this,"keydown",a.keyboardDispatch),a.addEvent(this,"keyup",a.keyboardDispatch),a.addEvent(this,a.stage.elem,"mousedown",a.mouseDispatch),a.addEvent(this,a.stage.elem,"mouseup",a.mouseDispatch),a.addEvent(this,a.stage.elem,"mousemove",a.mouseDispatch),a.addEvent(this,a.stage.elem,"click",a.mouseDispatch),a.addEvent(this,a.stage.elem,"dblclick",a.mouseDispatch),a.addEvent(this,a.stage.elem,"touchstart",a.mouseDispatch),a.addEvent(this,a.stage.elem,"touchmove",a.mouseDispatch),a.addEvent(this,a.stage.elem,"touchend",a.mouseDispatch)}),a.c("Mouse",{init:function(){a.mouseObjs++,this.bind("Remove",function(){a.mouseObjs--})},areaMap:function(b){if(arguments.length>1){var c=Array.prototype.slice.call(arguments,0);b=new a.polygon(c)}return b.shift(this._x,this._y),this.map=b,this.attach(this.map),this}}),a.c("Draggable",{_startX:0,_startY:0,_dragging:!1,_ondrag:null,_ondown:null,_onup:null,init:function(){this.requires("Mouse"),this._ondrag=function(b){var c=a.DOM.translate(b.clientX,b.clientY);this.x=c.x-this._startX,this.y=c.y-this._startY,this.trigger("Dragging",b)},this._ondown=function(b){if(b.button!==0)return;this._startX=b.realX-this._x,this._startY=b.realY-this._y,this._dragging=!0,a.addEvent(this,a.stage.elem,"mousemove",this._ondrag),a.addEvent(this,a.stage.elem,"mouseup",this._onup),this.trigger("StartDrag",b)},this._onup=function b(b){a.removeEvent(this,a.stage.elem,"mousemove",this._ondrag),a.removeEvent(this,a.stage.elem,"mouseup",this._onup),this._dragging=!1,this.trigger("StopDrag",b)},this.enableDrag()},stopDrag:function(){return a.removeEvent(this,a.stage.elem,"mousemove",this._ondrag),a.removeEvent(this,a.stage.elem,"mouseup",this._onup),this._dragging=!1,this.trigger("StopDrag"),this},startDrag:function(){return this._dragging||(this._dragging=!0,a.addEvent(this,a.stage.elem,"mousemove",this._ondrag)),this},enableDrag:function(){return this.bind("MouseDown",this._ondown),a.addEvent(this,a.stage.elem,"mouseup",this._onup),this},disableDrag:function(){return this.unbind("MouseDown",this._ondown),this.stopDrag(),this}}),a.c("Keyboard",{isDown:function(b){return typeof b=="string"&&(b=a.keys[b]),!!a.keydown[b]}}),a.c("Multiway",{_speed:3,init:function(){this._keyDirection={},this._keys={},this._movement={x:0,y:0}},multiway:function(b,c){c?this._speed=b:c=b,this._keyDirection=c,this.speed(this._speed),this.bind("KeyDown",function(a){this._keys[a.key]&&(this._movement.x=Math.round((this._movement.x+this._keys[a.key].x)*1e3)/1e3,this._movement.y=Math.round((this._movement.y+this._keys[a.key].y)*1e3)/1e3,this.trigger("NewDirection",this._movement))}).bind("KeyUp",function(a){this._keys[a.key]&&(this._movement.x=Math.round((this._movement.x-this._keys[a.key].x)*1e3)/1e3,this._movement.y=Math.round((this._movement.y-this._keys[a.key].y)*1e3)/1e3,this.trigger("NewDirection",this._movement))}).bind("EnterFrame",function(){if(this.disableControls)return;this._movement.x!==0&&(this.x+=this._movement.x,this.trigger("Moved",{x:this.x-this._movement.x,y:this.y})),this._movement.y!==0&&(this.y+=this._movement.y,this.trigger("Moved",{x:this.x,y:this.y-this._movement.y}))});for(var d in c)a.keydown[a.keys[d]]&&this.trigger("KeyDown",{key:a.keys[d]});return this},speed:function(b){for(var c in this._keyDirection){var d=a.keys[c]||c;this._keys[d]={x:Math.round(Math.cos(this._keyDirection[c]*(Math.PI/180))*1e3*b)/1e3,y:Math.round(Math.sin(this._keyDirection[c]*(Math.PI/180))*1e3*b)/1e3}}return this}}),a.c("Fourway",{init:function(){this.requires("Multiway")},fourway:function(a){return this.multiway(a,{UP_ARROW:-90,DOWN_ARROW:90,RIGHT_ARROW:0,LEFT_ARROW:180,W:-90,S:90,D:0,A:180}),this}}),a.c("Twoway",{_speed:3,_up:!1,init:function(){this.requires("Keyboard")},twoway:function(a,b){return a&&(this._speed=a),b=b||this._speed*2,this.bind("EnterFrame",function(){if(this.disableControls)return;if(this.isDown("RIGHT_ARROW")||this.isDown("D"))this.x+=this._speed;if(this.isDown("LEFT_ARROW")||this.isDown("A"))this.x-=this._speed;this._up&&(this.y-=b,this._falling=!0)}).bind("KeyDown",function(){if(this.isDown("UP_ARROW")||this.isDown("W"))this._up=!0}),this}}),a.c("Animation",{_reel:null,init:function(){this._reel={}},addAnimation:function(a,b){var c,d=0,e=0,f,g,h,i,j={},k,l,m=[];for(c in b){g=b[c],h=b[d]||this,j={};for(i in g){if(typeof g[i]!="number"){j[i]=g[i];continue}j[i]=(g[i]-h[i])/(c-d)}for(e=+d+1,f=1;e<=+c;++e,++f){l={};for(k in j)typeof j[k]=="number"?l[k]=h[k]+j[k]*f:l[k]=j[k];m[e]=l}d=c}return this._reel[a]=m,this},playAnimation:function(a){var b=this._reel[a],c=0,d=b.length,e;this.bind("EnterFrame",function f(){for(e in b[c])this[e]=b[c][e];c++,c>d&&(this.trigger("AnimationEnd"),this.unbind("EnterFrame",f))})}}),a.c("SpriteAnimation",{_reels:null,_frame:null,_current:null,init:function(){this._reels={}},animate:function(a,b,c,d){var e,f,g,h,i,j;if(arguments.length<4&&typeof b=="number")return this._current=a,e=this._reels[a],i=b,this._frame={reel:e,frameTime:Math.ceil(i/e.length),frame:0,current:0,repeat:0},arguments.length===3&&typeof c=="number"&&(c===-1?this._frame.repeatInfinitly=!0:this._frame.repeat=c),j=this._frame.reel[0],this.__coord[0]=j[0],this.__coord[1]=j[1],this.bind("EnterFrame",this.drawFrame),this;if(typeof b=="number"){f=b,e=[],g=this.__tile,h=this.__tileh;if(d>b)for(;f<=d;f++)e.push([f*g,c*h]);else for(;f>=d;f--)e.push([f*g,c*h]);this._reels[a]=e}else if(typeof b=="object"){f=0,e=[],d=b.length-1,g=this.__tile,h=this.__tileh;for(;f<=d;f++)j=b[f],e.push([j[0]*g,j[1]*h]);this._reels[a]=e}return this},drawFrame:function(a){var b=this._frame;if(this._frame.current++===b.frameTime){var c=b.reel[b.frame++];this.__coord[0]=c[0],this.__coord[1]=c[1],this._frame.current=0}if(b.frame===b.reel.length&&this._frame.current===b.frameTime){b.frame=0;if(this._frame.repeatInfinitly===!0||this._frame.repeat>0)this._frame.repeat&&this._frame.repeat--,this._frame.current=0,this._frame.frame=0;else{this.trigger("AnimationEnd",{reel:b.reel}),this.stop();return}}this.trigger("Change")},stop:function(){return this.unbind("EnterFrame",this.drawFrame),this.unbind("AnimationEnd"),this._current=null,this._frame=null,this},reset:function(){if(!this._frame)return this;var a=this._frame.reel[0];return this.__coord[0]=a[0],this.__coord[1]=a[1],this.stop(),this},isPlaying:function(a){return a?this._current===a:!!this._interval}}),a.c("Tween",{_step:null,_numProps:0,tween:function(a,b){return this.each(function(){this._step==null&&(this._step={},this.bind("EnterFrame",j),this.bind("RemoveComponent",function(a){a=="Tween"&&this.unbind("EnterFrame",j)}));for(var c in a)this._step[c]={val:(a[c]-this[c])/b,rem:b},this._numProps++}),this}}),a.c("Color",{_color:"",ready:!0,init:function(){this.bind("Draw",function(a){a.type==="DOM"?(a.style.background=this._color,a.style.lineHeight=0):a.type==="canvas"&&(this._color&&(a.ctx.fillStyle=this._color),a.ctx.fillRect(a.pos._x,a.pos._y,a.pos._w,a.pos._h))})},color:function(a){return this._color=a,this.trigger("Change"),this}}),a.c("Tint",{_color:null,_strength:1,init:function(){var b=function c(b){var c=b.ctx||a.canvas.context;c.fillStyle=this._color||"rgb(0,0,0)",c.fillRect(b.pos._x,b.pos._y,b.pos._w,b.pos._h)};this.bind("Draw",b).bind("RemoveComponent",function(a){a==="Tint"&&this.unbind("Draw",b)})},tint:function(b,c){return this._strength=c,this._color=a.toRGB(b,this._strength),this.trigger("Change"),this}}),a.c("Image",{_repeat:"repeat",ready:!1,init:function(){var a=function(a){if(a.type==="canvas"){if(!this.ready||!this._pattern)return;var b=a.ctx;b.fillStyle=this._pattern,b.fillRect(this._x,this._y,this._w,this._h)}else a.type==="DOM"&&this.__image&&(a.style.background="url("+this.__image+") "+this._repeat)};this.bind("Draw",a).bind("RemoveComponent",function(b){b==="Image"&&this.unbind("Draw",a)})},image:function(b,c){this.__image=b,this._repeat=c||"no-repeat",this.img=a.assets[b];if(!this.img){this.img=new Image,a.assets[b]=this.img,this.img.src=b;var d=this;return this.img.onload=function(){d.has("Canvas")&&(d._pattern=a.canvas.context.createPattern(d.img,d._repeat)),d.ready=!0,d._repeat==="no-repeat"&&(d.w=d.img.width,d.h=d.img.height),d.trigger("Change")},this}return this.ready=!0,this.has("Canvas")&&(this._pattern=a.canvas.context.createPattern(this.img,this._repeat)),this._repeat==="no-repeat"&&(this.w=this.img.width,this.h=this.img.height),this.trigger("Change"),this}}),a.extend({_scenes:[],_current:null,scene:function(b,c){if(arguments.length===1){a("2D").each(function(){this.has("Persist")||this.destroy()}),this._scenes[b].call(this);var d=this._current;this._current=b,a.trigger("SceneChange",{oldScene:d,newScene:b});return}this._scenes[b]=c;return},rgbLookup:{},toRGB:function(a,b){var c=this.rgbLookup[a];if(c)return c;var a=a.charAt(0)==="#"?a.substr(1):a,d=[],e;return d[0]=parseInt(a.substr(0,2),16),d[1]=parseInt(a.substr(2,2),16),d[2]=parseInt(a.substr(4,2),16),e=b===undefined?"rgb("+d.join(",")+")":"rgba("+d.join(",")+","+b+")",c=e,e}}),a.DrawManager=function(){var b=[],c=[];return{total2D:a("2D").length,onScreen:function(b){return a.viewport._x+b._x+b._w>0&&a.viewport._y+b._y+b._h>0&&a.viewport._x+b._x<a.viewport.width&&a.viewport._y+b._y<a.viewport.height},merge:function(b){do{var c=[],d=!1,e=0,f=b.length,g,h,i;while(e<f)g=b[e],h=b[e+1],e<f-1&&g._x<h._x+h._w&&g._x+g._w>h._x&&g._y<h._y+h._h&&g._h+g._y>h._y?(i={_x:~~Math.min(g._x,h._x),_y:~~Math.min(g._y,h._y),_w:Math.max(g._x,h._x)+Math.max(g._w,h._w),_h:Math.max(g._y,h._y)+Math.max(g._h,h._h)},i._w=i._w-i._x,i._h=i._h-i._y,i._w=i._w==~~i._w?i._w:i._w+1|0,i._h=i._h==~~i._h?i._h:i._h+1|0,c.push(i),e++,d=!0):c.push(g),e++;b=c.length?a.clone(c):b,d&&(e=0)}while(d);return b},add:function d(a,d){if(!d){c.push(a);return}var e,f=a._mbr||a,g=d._mbr||d;return a===d?e=a.mbr()||a.pos():(e={_x:~~Math.min(f._x,g._x),_y:~~Math.min(f._y,g._y),_w:Math.max(f._w,g._w)+Math.max(f._x,g._x),_h:Math.max(f._h,g._h)+Math.max(f._y,g._y)},e._w=e._w-e._x,e._h=e._h-e._y),e._w===0||e._h===0||!this.onScreen(e)?!1:(e._x=~~e._x,e._y=~~e._y,e._w=e._w===~~e._w?e._w:e._w+1|0,e._h=e._h===~~e._h?e._h:e._h+1|0,b.push(e),!0)},debug:function(){console.log(b,c)},drawAll:function(b){var b=b||a.viewport.rect(),c,d=0,e,f=a.canvas.context,g;c=a.map.search(b),e=c.length,f.clearRect(b._x,b._y,b._w,b._h),c.sort(function(a,b){return a._global-b._global});for(;d<e;d++)g=c[d],g._visible&&g.__c.Canvas&&(g.draw(),g._changed=!1)},boundingRect:function(a){if(!a||!a.length)return;var b=[],c=1,d=a.length,e,f=a[0],g;f=[f._x,f._y,f._x+f._w,f._y+f._h];while(c<d)e=a[c],g=[e._x,e._y,e._x+e._w,e._y+e._h],g[0]<f[0]&&(f[0]=g[0]),g[1]<f[1]&&(f[1]=g[1]),g[2]>f[2]&&(f[2]=g[2]),g[3]>f[3]&&(f[3]=g[3]),c++;return g=f,f={_x:g[0],_y:g[1],_w:g[2]-g[0],_h:g[3]-g[1]},f},draw:function e(){if(!b.length&&!c.length)return;var d=0,e=b.length,f=c.length,g,h,i,j,k,l,m,n=[],o=a.canvas.context;for(;d<f;++d)c[d].draw()._changed=!1;c.length=d=0;if(!e)return;if(e/this.total2D>.6){this.drawAll(),b.length=0;return}b=this.merge(b);for(;d<e;++d){g=b[d];if(!g)continue;h=a.map.search(g,!1),k={};for(i=0,j=h.length;i<j;++i){l=h[i];if(k[l[0]]||!l._visible||!l.__c.Canvas)continue;k[l[0]]=!0,n.push({obj:l,rect:g})}o.clearRect(g._x,g._y,g._w,g._h)}n.sort(function(a,b){return a.obj._global-b.obj._global});if(!n.length)return;for(d=0,e=n.length;d<e;++d){l=n[d],g=l.rect,m=l.obj;var p=m._mbr||m,q=g._x-p._x<=0?0:~~(g._x-p._x),r=g._y-p._y<0?0:~~(g._y-p._y),s=~~Math.min(p._w-q,g._w-(p._x-g._x),g._w,p._w),t=~~Math.min(p._h-r,g._h-(p._y-g._y),g._h,p._h);if(t===0||s===0)continue;o.save(),o.beginPath(),o.moveTo(g._x,g._y),o.lineTo(g._x+g._w,g._y),o.lineTo(g._x+g._w,g._h+g._y),o.lineTo(g._x,g._h+g._y),o.lineTo(g._x,g._y),o.clip(),m.draw(),o.closePath(),o.restore(),m._changed=!1}b.length=0,merged={}}}}(),a.extend({isometric:{_tile:0,_z:0,size:function(a){return this._tile=a,this},place:function(b,c,d,e){var f=b*this._tile+(c&1)*(this._tile/2),g=c*this._tile/4,g=g-d*(this._tile/2);return e.attr({x:f+a.viewport._x,y:g+a.viewport._y}).z+=d,this}}}),a.extend({audio:{_elems:{},_muted:!1,MAX_CHANNELS:5,type:{mp3:"audio/mpeg;",ogg:'audio/ogg; codecs="vorbis"',wav:'audio/wav; codecs="1"',mp4:'audio/mp4; codecs="mp4a.40.2"'},add:function(b,c){if(!a.support.audio)return this;var d,e,f=new Audio,g,h=0,i=[];if(arguments.length===1&&typeof b=="object"){for(e in b){if(!b.hasOwnProperty(e))continue;if(typeof b[e]!="string"){var j=b[e],h=0,k=j.length,l;for(;h<k;++h){l=j[h],ext=l.substr(l.lastIndexOf(".")+1,3).toLowerCase(),g=f.canPlayType(this.type[ext]);if(g!==""&&g!=="no"){c=l;break}}}else c=b[e];for(;h<this.MAX_CHANNELS;h++)f=new Audio(c),f.preload="auto",f.load(),i.push(f);this._elems[e]=i,a.assets[c]||(a.assets[c]=this._elems[e][0])}return this}if(typeof c!="string"){var h=0,k=c.length,l;for(;h<k;++h){l=c[h],ext=l.substr(l.lastIndexOf(".")+1,3),g=f.canPlayType(this.type[ext]);if(g!==""&&g!=="no"){c=l;break}}}for(;h<this.MAX_CHANNELS;h++)f=new Audio(c),f.preload="auto",f.load(),i.push(f);return this._elems[b]=i,a.assets[c]||(a.assets[c]=this._elems[b][0]),this},play:function(b,c){if(!a.support.audio)return;var d=this._elems[b],e,f=0,g=d.length;for(;f<g;f++){e=d[f];if(e.ended||!e.currentTime){e.play();break}f===g-1&&(e.currentTime=0,e.play())}if(typeof c=="number"){var h=0;d[f].addEventListener("ended",function(){if(c==-1||h<=c)this.currentTime=0,h++},!1)}return this},settings:function(a,b){if(!b){for(var c in this._elems)this.settings(c,a);return this}var d=this._elems[a],e,f,g=0,h=d.length;for(var f in b)for(;g<h;g++)e=d[g],e[f]=b[f];return this},mute:function(){var a,b,c,d,e;for(a in this._elems){e=this._elems[a];for(c=0,d=e.length;c<d;++c)b=e[c],!b.ended&&b.currentTime&&(this._muted?b.pause():b.play())}return this._muted=!this._muted,this}}}),a.bind("Pause",function(){a.audio.mute()}),a.bind("Unpause",function(){a.audio.mute()}),a.c("Text",{_text:"",init:function(){this.bind("Draw",function(a){if(a.type==="DOM"){var b=this._element,c=b.style;b.innerHTML=this._text}})},text:function(a){return a?(this._text=a,this.trigger("Change"),this):this._text}}),a.extend({assets:{},load:function(b,c,d,e){var f=0,g=b.length,h,i,j=g,k=0,l;for(;f<g;++f){h=b[f],l=h.substr(h.lastIndexOf(".")+1).toLowerCase();if(!a.support.audio||l!=="mp3"&&l!=="wav"&&l!=="ogg"&&l!=="mp4")if(l==="jpg"||l==="jpeg"||l==="gif"||l==="png")i=new Image,i.src=h;else{j--;continue}else i=new Audio(h),navigator.userAgent.indexOf("Chrome")!=-1&&k++;this.assets[h]=i,i.onload=function(){++k,d&&d.call(this,{loaded:k,total:j,percent:k/j*100}),k===j&&c&&c()},i.onerror=function(){e?e.call(this,{loaded:k,total:j,percent:k/j*100}):(k++,k===j&&c&&c())}}}})}(Crafty,window,window.document);var number_with_delimiter=function(a,b,c){try{var b=b||",",c=c||".",d=a.toString().split(".");return d[0]=d[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+b),d.join(c)}catch(e){return a}};(function(a){function b(b){if(a.facebox.settings.inited)return!0;a.facebox.settings.inited=!0,a(document).trigger("init.facebox"),e();var c=a.facebox.settings.imageTypes.join("|");a.facebox.settings.imageTypesRegexp=new RegExp("\\.("+c+")(\\?.*)?$","i"),b&&a.extend(a.facebox.settings,b),a("body").append(a.facebox.settings.faceboxHtml);var d=[new Image,new Image];d[0].src=a.facebox.settings.closeImage,d[1].src=a.facebox.settings.loadingImage,a("#facebox").find(".b:first, .bl").each(function(){d.push(new Image),d.slice(-1).src=a(this).css("background-image").replace(/url\((.+)\)/,"$1")}),a("#facebox .cancel").click(a.facebox.close)}function c(){var a,b;return self.pageYOffset?(b=self.pageYOffset,a=self.pageXOffset):document.documentElement&&document.documentElement.scrollTop?(b=document.documentElement.scrollTop,a=document.documentElement.scrollLeft):document.body&&(b=document.body.scrollTop,a=document.body.scrollLeft),[a,b]}function d(){var a;return self.innerHeight?a=self.innerHeight:document.documentElement&&document.documentElement.clientHeight?a=document.documentElement.clientHeight:document.body&&(a=document.body.clientHeight),a}function e(){var b=a.facebox.settings;b.loadingImage=b.loading_image||b.loadingImage,b.closeImage=b.close_image||b.closeImage,b.imageTypes=b.image_types||b.imageTypes,b.faceboxHtml=b.facebox_html||b.faceboxHtml}function f(b,c){if(b.match(/#/)){var d=window.location.href.split("#")[0],e=b.replace(d,"");if(e=="#")return;a.facebox.reveal(a(e).html(),c)}else b.match(a.facebox.settings.imageTypesRegexp)?g(b,c):h(b,c)}function g(b,c){var d=new Image;d.onload=function(){a.facebox.reveal('<div class="image"><img src="'+d.src+'" /></div>',c)},d.src=b}function h(b,c){a.get(b,function(b){a.facebox.reveal(b,c)})}function i(){return a.facebox.settings.overlay==!1||a.facebox.settings.opacity===null}function j(){if(i())return;return a("#facebox_overlay").length==0&&a("body").append('<div id="facebox_overlay" class="facebox_hide"></div>'),a("#facebox_overlay").hide().addClass("facebox_overlayBG").css("opacity",a.facebox.settings.opacity).click(function(){a(document).trigger("close.facebox")}).fadeIn(200),!1}function k(){if(i())return;return a("#facebox_overlay").fadeOut(200,function(){a("#facebox_overlay").removeClass("facebox_overlayBG"),a("#facebox_overlay").addClass("facebox_hide"),a("#facebox_overlay").remove()}),!1}a.facebox=function(b,c){a.facebox.loading(),b.ajax?h(b.ajax,c):b.image?g(b.image,c):b.div?f(b.div,c):a.isFunction(b)?b.call(a):a.facebox.reveal(b,c)},a.extend(a.facebox,{settings:{opacity:.6,overlay:!0,loadingImage:"/assets/loading.gif",closeImage:"/assets/closelabel.png",imageTypes:["png","jpg","jpeg","gif"],faceboxHtml:'    <div id="facebox" style="display:none;">       <div class="popup">         <div class="content">         </div>         <a href="#" class="cancel btn danger">Close</a>       </div>     </div>'},loading:function(){b();if(a("#facebox .loading").length==1)return!0;j(),a("#facebox .content").empty().append('<div class="loading"><img src="'+a.facebox.settings.loadingImage+'"/></div>'),a("#facebox").show().css({top:c()[1]+d()/10,left:a(window).width()/2-a("#facebox .popup").outerWidth()/2}),a(document).bind("keydown.facebox",function(b){return b.keyCode==27&&a.facebox.close(),!0}),a(document).trigger("loading.facebox")},reveal:function(b,c){a(document).trigger("beforeReveal.facebox"),c&&a("#facebox .content").addClass(c),a("#facebox .content").empty().append(b),a("#facebox .popup").children().fadeIn("normal"),a("#facebox").css("left",a(window).width()/2-a("#facebox .popup").outerWidth()/2),a(document).trigger("reveal.facebox").trigger("afterReveal.facebox")},close:function(){return a(document).trigger("close.facebox"),!1}}),a.fn.facebox=function(c){function d(){a.facebox.loading(!0);var b=this.rel.match(/facebox\[?\.(\w+)\]?/);return b&&(b=b[1]),f(this.href,b),!1}if(a(this).length==0)return;return b(c),this.bind("click.facebox",d)},a(document).bind("close.facebox",function(){a(document).unbind("keydown.facebox"),a("#facebox").fadeOut(function(){a("#facebox .content").removeClass().addClass("content"),a("#facebox .loading").remove(),a(document).trigger("afterClose.facebox")}),k()})})(jQuery),function(a){a.defaultText=function(b){function g(a){var b=a.attr("title"),c=a.val();a.removeClass(e),b===c&&a.val("")}function h(){a(c).each(function(){g(a(this))}),setTimeout(function(){a(c).trigger("focusout")},1)}var c="input:text[title],textarea[title]",d=b&&b.context?b.context:"body",e=b&&b.css?b.css:"default",f=[{selector:"form",type:"submit"}];clear_events=b&&b.clearEvents?f.concat(b.clearEvents):f,a(d).delegate(c,"focusin",function(b){b.stopPropagation(),g(a(this))}).delegate(c,"focusout",function(b){b.stopPropagation();var c=a(this),d=c.attr("title"),f=c.val();(a.trim(f)===""||f===d)&&c.val(d).addClass(e)}),a.each(clear_events,function(b,c){var d=c.type,e=a(c.selector),f=e.length;if(e.size()){var g=a.data(e.get(0),"events");if(g)for(var i=0;i<f;i++){var j=a.data(e.get(i),"events");typeof j!="undefined"&&j[d].unshift({type:d,guid:null,namespace:"",data:undefined,handler:function(){h()}})}else e.bind(d,function(){h()})}})}}(jQuery),jQuery.effects||function(a,b){function c(b){var c;return b&&b.constructor==Array&&b.length==3?b:(c=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(b))?[parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10)]:(c=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(b))?[parseFloat(c[1])*2.55,parseFloat(c[2])*2.55,parseFloat(c[3])*2.55]:(c=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(b))?[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]:(c=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(b))?[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]:(c=/rgba\(0, 0, 0, 0\)/.exec(b))?e.transparent:e[a.trim(b).toLowerCase()]}function d(b,d){var e;do{e=a.curCSS(b,d);if(e!=""&&e!="transparent"||a.nodeName(b,"body"))break;d="backgroundColor"}while(b=b.parentNode);return c(e)}function h(){var a=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,b={},c,d;if(a&&a.length&&a[0]&&a[a[0]]){var e=a.length;while(e--)c=a[e],typeof a[c]=="string"&&(d=c.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()}),b[d]=a[c])}else for(c in a)typeof a[c]=="string"&&(b[c]=a[c]);return b}function i(b){var c,d;for(c in b)d=b[c],(d==null||a.isFunction(d)||c in g||/scrollbar/.test(c)||!/color/i.test(c)&&isNaN(parseFloat(d)))&&delete b[c];return b}function j(a,b){var c={_:0},d;for(d in b)a[d]!=b[d]&&(c[d]=b[d]);return c}function k(b,c,d,e){typeof b=="object"&&(e=c,d=null,c=b,b=c.effect),a.isFunction(c)&&(e=c,d=null,c={});if(typeof c=="number"||a.fx.speeds[c])e=d,d=c,c={};return a.isFunction(d)&&(e=d,d=null),c=c||{},d=d||c.duration,d=a.fx.off?0:typeof d=="number"?d:d in a.fx.speeds?a.fx.speeds[d]:a.fx.speeds._default,e=e||c.complete,[b,c,d,e]}function l(b){return!b||typeof b=="number"||a.fx.speeds[b]?!0:typeof b=="string"&&!a.effects[b]?!0:!1}a.effects={},a.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(b,e){a.fx.step[e]=function(a){a.colorInit||(a.start=d(a.elem,e),a.end=c(a.end),a.colorInit=!0),a.elem.style[e]="rgb("+Math.max(Math.min(parseInt(a.pos*(a.end[0]-a.start[0])+a.start[0],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[1]-a.start[1])+a.start[1],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[2]-a.start[2])+a.start[2],10),255),0)+")"}});var e={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},f=["add","remove","toggle"],g={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.effects.animateClass=function(b,c,d,e){return a.isFunction(d)&&(e=d,d=null),this.queue(function(){var g=a(this),k=g.attr("style")||" ",l=i(h.call(this)),m,n=g.attr("class");a.each(f,function(a,c){b[c]&&g[c+"Class"](b[c])}),m=i(h.call(this)),g.attr("class",n),g.animate(j(l,m),{queue:!1,duration:c,easing:d,complete:function(){a.each(f,function(a,c){b[c]&&g[c+"Class"](b[c])}),typeof g.attr("style")=="object"?(g.attr("style").cssText="",g.attr("style").cssText=k):g.attr("style",k),e&&e.apply(this,arguments),a.dequeue(this)}})})},a.fn.extend({_addClass:a.fn.addClass,addClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{add:b},c,d,e]):this._addClass(b)},_removeClass:a.fn.removeClass,removeClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{remove:b},c,d,e]):this._removeClass(b)},_toggleClass:a.fn.toggleClass,toggleClass:function(c,d,e,f,g){return typeof d=="boolean"||d===b?e?a.effects.animateClass.apply(this,[d?{add:c}:{remove:c},e,f,g]):this._toggleClass(c,d):a.effects.animateClass.apply(this,[{toggle:c},d,e,f])},switchClass:function(b,c,d,e,f){return a.effects.animateClass.apply(this,[{add:c,remove:b},d,e,f])}}),a.extend(a.effects,{version:"1.8.16",save:function(a,b){for(var c=0;c<b.length;c++)b[c]!==null&&a.data("ec.storage."+b[c],a[0].style[b[c]])},restore:function(a,b){for(var c=0;c<b.length;c++)b[c]!==null&&a.css(b[c],a.data("ec.storage."+b[c]))},setMode:function(a,b){return b=="toggle"&&(b=a.is(":hidden")?"show":"hide"),b},getBaseline:function(a,b){var c,d;switch(a[0]){case"top":c=0;break;case"middle":c=.5;break;case"bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case"left":d=0;break;case"center":d=.5;break;case"right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var c={width:b.outerWidth(!0),height:b.outerHeight(!0),"float":b.css("float")},d=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e=document.activeElement;return b.wrap(d),(b[0]===e||a.contains(b[0],e))&&a(e).focus(),d=b.parent(),b.css("position")=="static"?(d.css({position:"relative"}),b.css({position:"relative"})):(a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,d){c[d]=b.css(d),isNaN(parseInt(c[d],10))&&(c[d]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),d.css(c).show()},removeWrapper:function(b){var c,d=document.activeElement;return b.parent().is(".ui-effects-wrapper")?(c=b.parent().replaceWith(b),(b[0]===d||a.contains(b[0],d))&&a(d).focus(),c):b},setTransition:function(b,c,d,e){return e=e||{},a.each(c,function(a,c){unit=b.cssUnit(c),unit[0]>0&&(e[c]=unit[0]*d+unit[1])}),e}}),a.fn.extend({effect:function(b,c,d,e){var f=k.apply(this,arguments),g={options:f[1],duration:f[2],callback:f[3]},h=g.options.mode,i=a.effects[b];return a.fx.off||!i?h?this[h](g.duration,g.callback):this.each(function(){g.callback&&g.callback.call(this)}):i.call(this,g)},_show:a.fn.show,show:function(a){if(l(a))return this._show.apply(this,arguments);var b=k.apply(this,arguments);return b[1].mode="show",this.effect.apply(this,b)},_hide:a.fn.hide,hide:function(a){if(l(a))return this._hide.apply(this,arguments);var b=k.apply(this,arguments);return b[1].mode="hide",this.effect.apply(this,b)},__toggle:a.fn.toggle,toggle:function(b){if(l(b)||typeof b=="boolean"||a.isFunction(b))return this.__toggle.apply(this,arguments);var c=k.apply(this,arguments);return c[1].mode="toggle",this.effect.apply(this,c)},cssUnit:function(b){var c=this.css(b),d=[];return a.each(["em","px","%","pt"],function(a,b){c.indexOf(b)>0&&(d=[parseFloat(c),b])}),d}}),a.easing.jswing=a.easing.swing,a.extend(a.easing,{def:"easeOutQuad",swing:function(b,c,d,e,f){return a.easing[a.easing.def](b,c,d,e,f)},easeInQuad:function(a,b,c,d,e){return d*(b/=e)*b+c},easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c},easeInOutQuad:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b+c:-d/2*(--b*(b-2)-1)+c},easeInCubic:function(a,b,c,d,e){return d*(b/=e)*b*b+c},easeOutCubic:function(a,b,c,d,e){return d*((b=b/e-1)*b*b+1)+c},easeInOutCubic:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b+c:d/2*((b-=2)*b*b+2)+c},easeInQuart:function(a,b,c,d,e){return d*(b/=e)*b*b*b+c},easeOutQuart:function(a,b,c,d,e){return-d*((b=b/e-1)*b*b*b-1)+c},easeInOutQuart:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b+c:-d/2*((b-=2)*b*b*b-2)+c},easeInQuint:function(a,b,c,d,e){return d*(b/=e)*b*b*b*b+c},easeOutQuint:function(a,b,c,d,e){return d*((b=b/e-1)*b*b*b*b+1)+c},easeInOutQuint:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b*b+c:d/2*((b-=2)*b*b*b*b+2)+c},easeInSine:function(a,b,c,d,e){return-d*Math.cos(b/e*(Math.PI/2))+d+c},easeOutSine:function(a,b,c,d,e){return d*Math.sin(b/e*(Math.PI/2))+c},easeInOutSine:function(a,b,c,d,e){return-d/2*(Math.cos(Math.PI*b/e)-1)+c},easeInExpo:function(a,b,c,d,e){return b==0?c:d*Math.pow(2,10*(b/e-1))+c},easeOutExpo:function(a,b,c,d,e){return b==e?c+d:d*(-Math.pow(2,-10*b/e)+1)+c},easeInOutExpo:function(a,b,c,d,e){return b==0?c:b==e?c+d:(b/=e/2)<1?d/2*Math.pow(2,10*(b-1))+c:d/2*(-Math.pow(2,-10*--b)+2)+c},easeInCirc:function(a,b,c,d,e){return-d*(Math.sqrt(1-(b/=e)*b)-1)+c},easeOutCirc:function(a,b,c,d,e){return d*Math.sqrt(1-(b=b/e-1)*b)+c},easeInOutCirc:function(a,b,c,d,e){return(b/=e/2)<1?-d/2*(Math.sqrt(1-b*b)-1)+c:d/2*(Math.sqrt(1-(b-=2)*b)+1)+c},easeInElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(b==0)return c;if((b/=e)==1)return c+d;g||(g=e*.3);if(h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return-(h*
Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g))+c},easeOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(b==0)return c;if((b/=e)==1)return c+d;g||(g=e*.3);if(h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return h*Math.pow(2,-10*b)*Math.sin((b*e-f)*2*Math.PI/g)+d+c},easeInOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(b==0)return c;if((b/=e/2)==2)return c+d;g||(g=e*.3*1.5);if(h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return b<1?-0.5*h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g)+c:h*Math.pow(2,-10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g)*.5+d+c},easeInBack:function(a,c,d,e,f,g){return g==b&&(g=1.70158),e*(c/=f)*c*((g+1)*c-g)+d},easeOutBack:function(a,c,d,e,f,g){return g==b&&(g=1.70158),e*((c=c/f-1)*c*((g+1)*c+g)+1)+d},easeInOutBack:function(a,c,d,e,f,g){return g==b&&(g=1.70158),(c/=f/2)<1?e/2*c*c*(((g*=1.525)+1)*c-g)+d:e/2*((c-=2)*c*(((g*=1.525)+1)*c+g)+2)+d},easeInBounce:function(b,c,d,e,f){return e-a.easing.easeOutBounce(b,f-c,0,e,f)+d},easeOutBounce:function(a,b,c,d,e){return(b/=e)<1/2.75?d*7.5625*b*b+c:b<2/2.75?d*(7.5625*(b-=1.5/2.75)*b+.75)+c:b<2.5/2.75?d*(7.5625*(b-=2.25/2.75)*b+.9375)+c:d*(7.5625*(b-=2.625/2.75)*b+.984375)+c},easeInOutBounce:function(b,c,d,e,f){return c<f/2?a.easing.easeInBounce(b,c*2,0,e,f)*.5+d:a.easing.easeOutBounce(b,c*2-f,0,e,f)*.5+e*.5+d}})}(jQuery),function(a,b){a.effects.pulsate=function(b){return this.queue(function(){var c=a(this),d=a.effects.setMode(c,b.options.mode||"show");times=(b.options.times||5)*2-1,duration=b.duration?b.duration/2:a.fx.speeds._default/2,isVisible=c.is(":visible"),animateTo=0,isVisible||(c.css("opacity",0).show(),animateTo=1),(d=="hide"&&isVisible||d=="show"&&!isVisible)&&times--;for(var e=0;e<times;e++)c.animate({opacity:animateTo},duration,b.options.easing),animateTo=(animateTo+1)%2;c.animate({opacity:animateTo},duration,b.options.easing,function(){animateTo==0&&c.hide(),b.callback&&b.callback.apply(this,arguments)}),c.queue("fx",function(){c.dequeue()}).dequeue()})}}(jQuery),function(a,b){a.effects.shake=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"effect"),f=b.options.direction||"left",g=b.options.distance||20,h=b.options.times||3,i=b.duration||b.options.duration||140;a.effects.save(c,d),c.show(),a.effects.createWrapper(c);var j=f=="up"||f=="down"?"top":"left",k=f=="up"||f=="left"?"pos":"neg",l={},m={},n={};l[j]=(k=="pos"?"-=":"+=")+g,m[j]=(k=="pos"?"+=":"-=")+g*2,n[j]=(k=="pos"?"-=":"+=")+g*2,c.animate(l,i,b.options.easing);for(var p=1;p<h;p++)c.animate(m,i,b.options.easing).animate(n,i,b.options.easing);c.animate(m,i,b.options.easing).animate(l,i/2,b.options.easing,function(){a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments)}),c.queue("fx",function(){c.dequeue()}),c.dequeue()})}}(jQuery),function($){$.fn.editable=function(a,b){if("disable"==a){$(this).data("disabled.editable",!0);return}if("enable"==a){$(this).data("disabled.editable",!1);return}if("destroy"==a){$(this).unbind($(this).data("event.editable")).removeData("disabled.editable").removeData("event.editable");return}var c=$.extend({},$.fn.editable.defaults,{target:a},b),d=$.editable.types[c.type].plugin||function(){},e=$.editable.types[c.type].submit||function(){},f=$.editable.types[c.type].buttons||$.editable.types.defaults.buttons,g=$.editable.types[c.type].content||$.editable.types.defaults.content,h=$.editable.types[c.type].element||$.editable.types.defaults.element,i=$.editable.types[c.type].reset||$.editable.types.defaults.reset,j=c.callback||function(){},k=c.onedit||function(){},l=c.onsubmit||function(){},m=c.onreset||function(){},n=c.onerror||i;return c.tooltip&&$(this).attr("title",c.tooltip),c.autowidth="auto"==c.width,c.autoheight="auto"==c.height,this.each(function(){var a=this,b=$(a).width(),o=$(a).height();$(this).data("event.editable",c.event),$.trim($(this).html())||$(this).html(c.placeholder),$(this).bind(c.event,function(m){if(!0===$(this).data("disabled.editable"))return;if(a.editing)return;if(!1===k.apply(this,[c,a]))return;m.preventDefault(),m.stopPropagation(),c.tooltip&&$(a).removeAttr("title"),0==$(a).width()?(c.width=b,c.height=o):(c.width!="none"&&(c.width=c.autowidth?$(a).width():c.width),c.height!="none"&&(c.height=c.autoheight?$(a).height():c.height)),$(this).html().toLowerCase().replace(/(;|")/g,"")==c.placeholder.toLowerCase().replace(/(;|")/g,"")&&$(this).html(""),a.editing=!0,a.revert=$(a).html(),$(a).html("");var p=$("<form />");c.cssclass&&("inherit"==c.cssclass?p.attr("class",$(a).attr("class")):p.attr("class",c.cssclass)),c.style&&("inherit"==c.style?(p.attr("style",$(a).attr("style")),p.css("display",$(a).css("display"))):p.attr("style",c.style));var q=h.apply(p,[c,a]),r;if(c.loadurl){var s=setTimeout(function(){q.disabled=!0,g.apply(p,[c.loadtext,c,a])},100),t={};t[c.id]=a.id,$.isFunction(c.loaddata)?$.extend(t,c.loaddata.apply(a,[a.revert,c])):$.extend(t,c.loaddata),$.ajax({type:c.loadtype,url:c.loadurl,data:t,async:!1,success:function(a){window.clearTimeout(s),r=a,q.disabled=!1}})}else c.data?(r=c.data,$.isFunction(c.data)&&(r=c.data.apply(a,[a.revert,c]))):r=a.revert;g.apply(p,[r,c,a]),q.attr("name",c.name),f.apply(p,[c,a]),$(a).append(p),d.apply(p,[c,a]),$(":input:visible:enabled:first",p).focus(),c.select&&q.select(),q.keydown(function(b){b.keyCode==27&&(b.preventDefault(),i.apply(p,[c,a]))});var s;"cancel"==c.onblur?q.blur(function(b){s=setTimeout(function(){i.apply(p,[c,a])},500)}):"submit"==c.onblur?q.blur(function(a){s=setTimeout(function(){p.submit()},200)}):$.isFunction(c.onblur)?q.blur(function(b){c.onblur.apply(a,[q.val(),c])}):q.blur(function(a){}),p.submit(function(b){s&&clearTimeout(s),b.preventDefault();if(!1!==l.apply(p,[c,a])&&!1!==e.apply(p,[c,a]))if($.isFunction(c.target)){var d=c.target.apply(a,[q.val(),c]);$(a).html(d),a.editing=!1,j.apply(a,[a.innerHTML,c]),$.trim($(a).html())||$(a).html(c.placeholder)}else{var f={};f[c.name]=q.val(),f[c.id]=a.id,$.isFunction(c.submitdata)?$.extend(f,c.submitdata.apply(a,[a.revert,c])):$.extend(f,c.submitdata),"PUT"==c.method&&(f._method="put"),$(a).html(c.indicator);var g={type:"POST",data:f,dataType:"html",url:c.target,success:function(b,d){g.dataType=="html"&&$(a).html(b),a.editing=!1,j.apply(a,[b,c]),$.trim($(a).html())||$(a).html(c.placeholder)},error:function(b,d,e){n.apply(p,[c,a,b])}};$.extend(g,c.ajaxoptions),$.ajax(g)}return $(a).attr("title",c.tooltip),!1})}),this.reset=function(b){this.editing&&!1!==m.apply(b,[c,a])&&($(a).html(a.revert),a.editing=!1,$.trim($(a).html())||$(a).html(c.placeholder),c.tooltip&&$(a).attr("title",c.tooltip))}})},$.editable={types:{defaults:{element:function(a,b){var c=$('<input type="hidden"></input>');return $(this).append(c),c},content:function(a,b,c){$(":input:first",this).val(a)},reset:function(a,b){b.reset(this)},buttons:function(a,b){var c=this;if(a.submit){if(a.submit.match(/>$/))var d=$(a.submit).click(function(){d.attr("type")!="submit"&&c.submit()});else{var d=$('<button type="submit" />');d.html(a.submit)}$(this).append(d)}if(a.cancel){if(a.cancel.match(/>$/))var e=$(a.cancel);else{var e=$('<button type="cancel" />');e.html(a.cancel)}$(this).append(e),$(e).click(function(d){if($.isFunction($.editable.types[a.type].reset))var e=$.editable.types[a.type].reset;else var e=$.editable.types.defaults.reset;return e.apply(c,[a,b]),!1})}}},text:{element:function(a,b){var c=$("<input />");return a.width!="none"&&c.width(a.width),a.height!="none"&&c.height(a.height),c.attr("autocomplete","off"),$(this).append(c),c}},textarea:{element:function(a,b){var c=$("<textarea />");return a.rows?c.attr("rows",a.rows):a.height!="none"&&c.height(a.height),a.cols?c.attr("cols",a.cols):a.width!="none"&&c.width(a.width),$(this).append(c),c}},select:{element:function(a,b){var c=$("<select />");return $(this).append(c),c},content:function(data,settings,original){if(String==data.constructor)eval("var json = "+data);else var json=data;for(var key in json){if(!json.hasOwnProperty(key))continue;if("selected"==key)continue;var option=$("<option />").val(key).append(json[key]);$("select",this).append(option)}$("select",this).children().each(function(){($(this).val()==json.selected||$(this).text()==$.trim(original.revert))&&$(this).attr("selected","selected")})}}},addInputType:function(a,b){$.editable.types[a]=b}},$.fn.editable.defaults={name:"value",id:"id",type:"text",width:"auto",height:"auto",event:"click.editable",onblur:"cancel",loadtype:"GET",loadtext:"Loading...",placeholder:"Click to edit",loaddata:{},submitdata:{},ajaxoptions:{}}}(jQuery),function(a,b,c){function w(){w.history=w.history||[],w.history.push(arguments);if("object"==typeof console){var a=console[console.warn?"warn":"log"],b=Array.prototype.slice.call(arguments),c;typeof arguments[0]=="string"&&(b[0]="qTip2: "+b[0]),c=a.apply?a.apply(console,b):a(b)}}function x(b){var c;if(!b||"object"!=typeof b)return e;if(b.metadata===f||"object"!=typeof b.metadata)b.metadata={type:b.metadata};if("content"in b){if(b.content===f||"object"!=typeof b.content||b.content.jquery)b.content={text:b.content};c=b.content.text||e,!a.isFunction(c)&&(!c&&!c.attr||c.length<1||"object"==typeof c&&!c.jquery)&&(b.content.text=e);if("title"in b.content){if(b.content.title===f||"object"!=typeof b.content.title)b.content.title={text:b.content.title};c=b.content.title.text||e,!a.isFunction(c)&&(!c&&!c.attr||c.length<1||"object"==typeof c&&!c.jquery)&&(b.content.title.text=e)}}return"position"in b&&(b.position===f||"object"!=typeof b.position)&&(b.position={my:b.position,at:b.position}),"show"in b&&(b.show===f||"object"!=typeof b.show)&&(b.show.jquery?b.show={target:b.show}:b.show={event:b.show}),"hide"in b&&(b.hide===f||"object"!=typeof b.hide)&&(b.hide.jquery?b.hide={target:b.hide}:b.hide={event:b.hide}),"style"in b&&(b.style===f||"object"!=typeof b.style)&&(b.style={classes:b.style}),a.each(h,function(){this.sanitize&&this.sanitize(b)}),b}function y(s,t,w,y){function I(a){var b=0,c,d=t,e=a.split(".");while(d=d[e[b++]])b<e.length&&(c=d);return[c||t,e.pop()]}function J(){var a=t.style.widget;E.toggleClass(l,a).toggleClass(o,t.style["default"]&&!a),G.content.toggleClass(l+"-content",a),G.titlebar&&G.titlebar.toggleClass(l+"-header",a),G.button&&G.button.toggleClass(k+"-icon",!a)}function K(a){G.title&&(G.titlebar.remove(),G.titlebar=G.title=G.button=f,a!==e&&z.reposition())}function L(){var b=t.content.title.button,c=typeof b=="string",d=c?b:"Close tooltip";G.button&&G.button.remove(),b.jquery?G.button=b:G.button=a("<a />",{"class":"ui-state-default ui-tooltip-close "+(t.style.widget?"":k+"-icon"),title:d,"aria-label":d}).prepend(a("<span />",{"class":"ui-icon ui-icon-close",html:"&times;"})),G.button.appendTo(G.titlebar).attr("role","button").click(function(a){return E.hasClass(m)||z.hide(a),e}),z.redraw()}function M(){var b=B+"-title";G.titlebar&&K(),G.titlebar=a("<div />",{"class":k+"-titlebar "+(t.style.widget?"ui-widget-header":"")}).append(G.title=a("<div />",{id:b,"class":k+"-title","aria-atomic":d})).insertBefore(G.content).delegate(".ui-tooltip-close","mousedown keydown mouseup keyup mouseout",function(b){a(this).toggleClass("ui-state-active ui-state-focus",b.type.substr(-4)==="down")}).delegate(".ui-tooltip-close","mouseover mouseout",function(b){a(this).toggleClass("ui-state-hover",b.type==="mouseover")}),t.content.title.button?L():z.rendered&&z.redraw()}function N(a){var b=G.button,c=G.title;if(!z.rendered)return e;a?(c||M(),L()):b.remove()}function O(b,c){var d=G.title;if(!z.rendered||!b)return e;a.isFunction(b)&&(b=b.call(s,H.event,z));if(b===e)return K(e);b.jquery&&b.length>0?d.empty().append(b.css({display:"block"})):d.html(b),z.redraw(),c!==e&&z.rendered&&E.is(":visible")&&z.reposition(H.event)}function P(b,d){function g(b){function i(c){c&&(delete h[c.src],clearTimeout(z.timers.img[c.src]),a(c).unbind(F)),a.isEmptyObject(h)&&(z.redraw(),d!==e&&z.reposition(H.event),b())}var g,h={};if((g=f.find("img:not([height]):not([width])")).length===0)return i();g.each(function(b,d){if(h[d.src]!==c)return;var e=0,f=3;(function g(){if(d.height||d.width||e>f)return i(d);e+=1,z.timers.img[d.src]=setTimeout(g,700)})(),a(d).bind("error"+F+" load"+F,function(){i(this)}),h[d.src]=d})}var f=G.content;return!z.rendered||!b?e:(a.isFunction(b)&&(b=b.call(s,H.event,z)||""),b.jquery&&b.length>0?f.empty().append(b.css({display:"block"})):f.html(b),z.rendered<0?E.queue("fx",g):(D=0,g(a.noop)),z)}function Q(){function k(a){if(E.hasClass(m))return e;clearTimeout(z.timers.show),clearTimeout(z.timers.hide);var b=function(){z.toggle(d,a)};t.show.delay>0?z.timers.show=setTimeout(b,t.show.delay):b()}function l(b){if(E.hasClass(m)||C||D)return e;var d=a(b.relatedTarget||b.target),g=d.closest(n)[0]===E[0],h=d[0]===f.show[0];clearTimeout(z.timers.show),clearTimeout(z.timers.hide);if(c.target==="mouse"&&g||t.hide.fixed&&/mouse(out|leave|move)/.test(b.type)&&(g||h)){try{b.preventDefault(),b.stopImmediatePropagation()}catch(i){}return}t.hide.delay>0?z.timers.hide=setTimeout(function(){z.hide(b)},t.hide.delay):z.hide(b)}function o(a){if(E.hasClass(m))return e;clearTimeout(z.timers.inactive),z.timers.inactive=setTimeout(function(){z.hide(a)},t.hide.inactive)}function p(a){E.is(":visible")&&z.reposition(a)}var c=t.position,f={show:t.show.target,hide:t.hide.target,viewport:a(c.viewport),document:a(document),body:a(document.body),window:a(b)},h={show:a.trim(""+t.show.event).split(" "),hide:a.trim(""+t.hide.event).split(" ")},j=a.browser.msie&&parseInt(a.browser.version,10)===6;E.bind("mouseenter"+F+" mouseleave"+F,function(a){var b=a.type==="mouseenter";b&&z.focus(a),E.toggleClass(q,b)}),t.hide.fixed&&(f.hide=f.hide.add(E),E.bind("mouseover"+F,function(){E.hasClass(m)||clearTimeout(z.timers.hide)})),/mouse(out|leave)/i.test(t.hide.event)?t.hide.leave==="window"&&f.window.bind("mouseout"+F+" blur"+F,function(a){/select|option/.test(a.target)&&!a.relatedTarget&&z.hide(a)}):/mouse(over|enter)/i.test(t.show.event)&&f.hide.bind("mouseleave"+F,function(a){clearTimeout(z.timers.show)}),(""+t.hide.event).indexOf("unfocus")>-1&&f.body.bind("mousedown"+F,function(b){var c=a(b.target),d=!E.hasClass(m)&&E.is(":visible");c[0]!==E[0]&&c.parents(n).length===0&&c.add(s).length>1&&!c.attr("disabled")&&z.hide(b)}),"number"==typeof t.hide.inactive&&(f.show.bind("qtip-"+w+"-inactive",o),a.each(g.inactiveEvents,function(a,b){f.hide.add(G.tooltip).bind(b+F+"-inactive",o)})),a.each(h.hide,function(b,c){var d=a.inArray(c,h.show),e=a(f.hide);d>-1&&e.add(f.show).length===e.length||c==="unfocus"?(f.show.bind(c+F,function(a){E.is(":visible")?l(a):k(a)}),delete h.show[d]):f.hide.bind(c+F,l)}),a.each(h.show,function(a,b){f.show.bind(b+F,k)}),"number"==typeof t.hide.distance&&f.show.add(E).bind("mousemove"+F,function(a){var b=H.origin||{},c=t.hide.distance,d=Math.abs;(d(a.pageX-b.pageX)>=c||d(a.pageY-b.pageY)>=c)&&z.hide(a)}),c.target==="mouse"&&(f.show.bind("mousemove"+F,function(a){i={pageX:a.pageX,pageY:a.pageY,type:"mousemove"}}),c.adjust.mouse&&(t.hide.event&&E.bind("mouseleave"+F,function(a){(a.relatedTarget||a.target)!==f.show[0]&&z.hide(a)}),f.document.bind("mousemove"+F,function(a){!E.hasClass(m)&&E.is(":visible")&&z.reposition(a||i)}))),(c.adjust.resize||f.viewport.length)&&(a.event.special.resize?f.viewport:f.window).bind("resize"+F,p),(f.viewport.length||j&&E.css("position")==="fixed")&&f.viewport.bind("scroll"+F,p)}function R(){var c=[t.show.target[0],t.hide.target[0],z.rendered&&G.tooltip[0],t.position.container[0],t.position.viewport[0],b,document];z.rendered?a([]).pushStack(a.grep(c,function(a){return typeof a=="object"})).unbind(F):t.show.target.unbind(F+"-create")}var z=this,A=document.body,B=k+"-"+w,C=0,D=0,E=a(),F=".qtip-"+w,G,H;z.id=w,z.rendered=e,z.elements=G={target:s},z.timers={img:{}},z.options=t,z.checks={},z.plugins={},z.cache=H={event:{},target:a(),disabled:e,attr:y},z.checks.builtin={"^id$":function(b,c,f){var h=f===d?g.nextid:f,i=k+"-"+h;h!==e&&h.length>0&&!a("#"+i).length&&(E[0].id=i,G.content[0].id=i+"-content",G.title[0].id=i+"-title")},"^content.text$":function(a,b,c){P(c)},"^content.title.text$":function(a,b,c){if(!c)return K();!G.title&&c&&M(),O(c)},"^content.title.button$":function(a,b,c){N(c)},"^position.(my|at)$":function(a,b,c){"string"==typeof c&&(a[b]=new h.Corner(c))},"^position.container$":function(a,b,c){z.rendered&&E.appendTo(c)},"^show.ready$":function(){z.rendered?z.toggle(d):z.render(1)},"^style.classes$":function(a,b,c){E.attr("class",k+" qtip ui-helper-reset "+c)},"^style.widget|content.title":J,"^events.(render|show|move|hide|focus|blur)$":function(b,c,d){E[(a.isFunction(d)?"":"un")+"bind"]("tooltip"+c,d)},"^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)":function(){var a=t.position;E.attr("tracking",a.target==="mouse"&&a.adjust.mouse),R(),Q()}},a.extend(z,{render:function(b){if(z.rendered)return z;var c=t.content.text,f=t.content.title.text,g=t.position,i=a.Event("tooltiprender");return a.attr(s[0],"aria-describedby",B),E=G.tooltip=a("<div/>",{id:B,"class":k+" qtip ui-helper-reset "+o+" "+t.style.classes+" "+k+"-pos-"+t.position.my.abbrev(),width:t.style.width||"",height:t.style.height||"",tracking:g.target==="mouse"&&g.adjust.mouse,role:"alert","aria-live":"polite","aria-atomic":e,"aria-describedby":B+"-content","aria-hidden":d}).toggleClass(m,H.disabled).data("qtip",z).appendTo(t.position.container).append(G.content=a("<div />",{"class":k+"-content",id:B+"-content","aria-atomic":d})),z.rendered=-1,D=1,C=1,f&&(M(),a.isFunction(f)||O(f,e)),a.isFunction(c)||P(c,e),z.rendered=d,J(),a.each(t.events,function(b,c){a.isFunction(c)&&E.bind(b==="toggle"?"tooltipshow tooltiphide":"tooltip"+b,c)}),a.each(h,function(){this.initialize==="render"&&this(z)}),Q(),E.queue("fx",function(a){i.originalEvent=H.event,E.trigger(i,[z]),D=0,C=0,z.redraw(),(t.show.ready||b)&&z.toggle(d,H.event,e),a()}),z},get:function(a){var b,c;switch(a.toLowerCase()){case"dimensions":b={height:E.outerHeight(),width:E.outerWidth()};break;case"offset":b=h.offset(E,t.position.container);break;default:c=I(a.toLowerCase()),b=c[0][c[1]],b=b.precedance?b.string():b}return b},set:function(b,c){function m(a,b){var c,d,e;for(c in k)for(d in k[c])if(e=(new RegExp(d,"i")).exec(a))b.push(e),k[c][d].apply(z,b)}var g=/^position\.(my|at|adjust|target|container)|style|content|show\.ready/i,h=/^content\.(title|attr)|style/i,i=e,j=e,k=z.checks,l;return"string"==typeof b?(l=b,b={},b[l]=c):b=a.extend(d,{},b),a.each(b,function(c,d){var e=I(c.toLowerCase()),f;f=e[0][e[1]],e[0][e[1]]="object"==typeof d&&d.nodeType?a(d):d,b[c]=[e[0],e[1],d,f],i=g.test(c)||i,j=h.test(c)||j}),x(t),C=D=1,a.each(b,m),C=D=0,E.is(":visible")&&z.rendered&&(i&&z.reposition(t.position.target==="mouse"?f:H.event),j&&z.redraw()),z},toggle:function(b,c){function q(){b?(a.browser.msie&&E[0].style.removeAttribute("filter"),E.css("overflow",""),"string"==typeof h.autofocus&&a(h.autofocus,E).focus(),p=a.Event("tooltipvisible"),p.originalEvent=c?H.event:f,E.trigger(p,[z]),h.target.trigger("qtip-"+w+"-inactive")):E.css({display:"",visibility:"",opacity:"",left:"",top:""})}if(!z.rendered)return b?z.render(1):z;var g=b?"show":"hide",h=t[g],j=E.is(":visible"),k=!c||t[g].target.length<2||H.target[0]===c.target,l=t.position,m=t.content,o,p;(typeof b).search("boolean|number")&&(b=!j);if(!E.is(":animated")&&j===b&&k)return z;if(c){if(/over|enter/.test(c.type)&&/out|leave/.test(H.event.type)&&c.target===t.show.target[0]&&E.has(c.relatedTarget).length)return z;H.event=a.extend({},c)}return p=a.Event("tooltip"+g),p.originalEvent=c?H.event:f,E.trigger(p,[z,90]),p.isDefaultPrevented()?z:(a.attr(E[0],"aria-hidden",!b),b?(H.origin=a.extend({},i),z.focus(c),a.isFunction(m.text)&&P(m.text,e),a.isFunction(m.title.text)&&O(m.title.text,e),!v&&l.target==="mouse"&&l.adjust.mouse&&(a(document).bind("mousemove.qtip",function(a){i={pageX:a.pageX,pageY:a.pageY,type:"mousemove"}}),v=d),z.reposition(c,arguments[2]),(p.solo=!!h.solo)&&a(n,h.solo).not(E).qtip("hide",p)):(clearTimeout(z.timers.show),delete H.origin,v&&!a(n+'[tracking="true"]:visible',h.solo).not(E).length&&(a(document).unbind("mousemove.qtip"),v=e),z.blur(c)),k&&E.stop(0,1),h.effect===e?(E[g](),q.call(E)):a.isFunction(h.effect)?(h.effect.call(E,z),E.queue("fx",function(a){q(),a()})):E.fadeTo(90,b?1:0,q),b&&h.target.trigger("qtip-"+w+"-inactive"),z)},show:function(a){return z.toggle(d,a)},hide:function(a){return z.toggle(e,a)},focus:function(b){if(!z.rendered)return z;var c=a(n),d=parseInt(E[0].style.zIndex,10),e=g.zindex+c.length,f=a.extend({},b),h,i;return E.hasClass(p)||(i=a.Event("tooltipfocus"),i.originalEvent=f,E.trigger(i,[z,e]),i.isDefaultPrevented()||(d!==e&&(c.each(function(){this.style.zIndex>d&&(this.style.zIndex=this.style.zIndex-1)}),c.filter("."+p).qtip("blur",f)),E.addClass(p)[0].style.zIndex=e)),z},blur:function(b){var c=a.extend({},b),d;return E.removeClass(p),d=a.Event("tooltipblur"),d.originalEvent=c,E.trigger(d,[z]),z},reposition:function(c,d){if(!z.rendered||C)return z;C=1;var f=t.position.target,g=t.position,j=g.my,l=g.at,m=g.adjust,n=m.method.split(" "),o=E.outerWidth(),p=E.outerHeight(),q=0,r=0,s=a.Event("tooltipmove"),u=E.css("position")==="fixed",v=g.viewport,w={left:0,top:0},x=g.container,y=e,B=z.plugins.tip,D={horizontal:n[0],vertical:n[1]=n[1]||n[0],enabled:v.jquery&&f[0]!==b&&f[0]!==A&&m.method!=="none",left:function(a){var b=D.horizontal==="shift",c=-x.offset.left+v.offset.left+v.scrollLeft,d=j.x==="left"?o:j.x==="right"?-o:-o/2,e=l.x==="left"?q:l.x==="right"?-q:-q/2,f=B&&B.size?B.size.width||0:0,g=B&&B.corner&&B.corner.precedance==="x"&&!b?f:0,h=c-a+g,i=a+o-v.width-c+g,k=d-(j.precedance==="x"||j.x===j.y?e:0),n=j.x==="center";return b?(g=B&&B.corner&&B.corner.precedance==="y"?f:0,k=(j.x==="left"?1:-1)*d-g,w.left+=h>0?h:i>0?-i:0,w.left=Math.max(-x.offset.left+v.offset.left+(g&&B.corner.x==="center"?B.offset:0),a-k,Math.min(Math.max(-x.offset.left+v.offset.left+v.width,a+k),w.left))):(h>0&&(j.x!=="left"||i>0)?w.left-=k:i>0&&(j.x!=="right"||h>0)&&(w.left-=n?-k:k),w.left!==a&&n&&(w.left-=m.x),w.left<c&&-w.left>i&&(w.left=a)),w.left-a},top:function(a){var b=D.vertical==="shift",c=-x.offset.top+v.offset.top+v.scrollTop,d=j.y==="top"?p:j.y==="bottom"?-p:-p/2,e=l.y==="top"?r:l.y==="bottom"?-r:-r/2,f=B&&B.size?B.size.height||0:0,g=B&&B.corner&&B.corner.precedance==="y"&&!b?f:0,h=c-a+g,i=a+p-v.height-c+g,k=d-(j.precedance==="y"||j.x===j.y?e:0),n=j.y==="center";return b?(g=B&&B.corner&&B.corner.precedance==="x"?f:0,k=(j.y==="top"?1:-1)*d-g,w.top+=h>0?h:i>0?-i:0,w.top=Math.max(-x.offset.top+v.offset.top+(g&&B.corner.x==="center"?B.offset:0),a-k,Math.min(Math.max(-x.offset.top+v.offset.top+v.height,a+k),w.top))):(h>0&&(j.y!=="top"||i>0)?w.top-=k:i>0&&(j.y!=="bottom"||h>0)&&(w.top-=n?-k:k),w.top!==a&&n&&(w.top-=m.y),w.top<0&&-w.top>i&&(w.top=a)),w.top-a}},F;if(a.isArray(f)&&f.length===2)l={x:"left",y:"top"},w={left:f[0],top:f[1]};else if(f==="mouse"&&(c&&c.pageX||H.event.pageX))l={x:"left",y:"top"},c=(c&&(c.type==="resize"||c.type==="scroll")?H.event:c&&c.pageX&&c.type==="mousemove"?c:i&&i.pageX&&(m.mouse||!c||!c.pageX)?{pageX:i.pageX,pageY:i.pageY}:!m.mouse&&H.origin&&H.origin.pageX?H.origin:c)||c||H.event||i||{},w={top:c.pageY,left:c.pageX};else{f==="event"?c&&c.target&&c.type!=="scroll"&&c.type!=="resize"?f=H.target=a(c.target):f=H.target:H.target=a(f),f=a(f).eq(0);if(f.length===0)return z;f[0]===document||f[0]===b?(q=h.iOS?b.innerWidth:f.width(),r=h.iOS?b.innerHeight:f.height(),f[0]===b&&(w={top:u||h.iOS?(v||f).scrollTop():0,left:u||h.iOS?(v||f).scrollLeft():0})):f.is("area")&&h.imagemap?w=h.imagemap(f,l,D.enabled?n:e):f[0].namespaceURI==="http://www.w3.org/2000/svg"&&h.svg?w=h.svg(f,l):(q=f.outerWidth(),r=f.outerHeight(),w=h.offset(f,x)),w.offset&&(q=w.width,r=w.height,y=w.flipoffset,w=w.offset);if(h.iOS<4.1&&h.iOS>3.1||h.iOS==4.3||!h.iOS&&u)F=a(b),w.left-=F.scrollLeft(),w.top-=F.scrollTop();w.left+=l.x==="right"?q:l.x==="center"?q/2:0,w.top+=l.y==="bottom"?r:l.y==="center"?r/2:0}return w.left+=m.x+(j.x==="right"?-o:j.x==="center"?-o/2:0),w.top+=m.y+(j.y==="bottom"?-p:j.y==="center"?-p/2:0),D.enabled?(v={elem:v,height:v[(v[0]===b?"h":"outerH")+"eight"](),width:v[(v[0]===b?"w":"outerW")+"idth"](),scrollLeft:u?0:v.scrollLeft(),scrollTop:u?0:v.scrollTop(),offset:v.offset()||{left:0,top:0}},x={elem:x,scrollLeft:x.scrollLeft(),scrollTop:x.scrollTop(),offset:x.offset()||{left:0,top:0}},w.adjusted={left:D.horizontal!=="none"?D.left(w.left):0,top:D.vertical!=="none"?D.top(w.top):0},w.adjusted.left+w.adjusted.top&&E.attr("class",E[0].className.replace(/ui-tooltip-pos-\w+/i,k+"-pos-"+j.abbrev())),y&&w.adjusted.left&&(w.left+=y.left),y&&w.adjusted.top&&(w.top+=y.top)):w.adjusted={left:0,top:0},s.originalEvent=a.extend({},c),E.trigger(s,[z,w,v.elem||v]),s.isDefaultPrevented()?z:(delete w.adjusted,d===e||isNaN(w.left)||isNaN(w.top)||f==="mouse"||!a.isFunction(g.effect)?E.css(w):a.isFunction(g.effect)&&(g.effect.call(E,z,a.extend({},w)),E.queue(function(b){a(this).css({opacity:"",height:""}),a.browser.msie&&this.style.removeAttribute("filter"),b()})),C=0,z)},redraw:function(){if(z.rendered<1||D)return z;var a=t.position.container,b,c,d,e;return D=1,t.style.height&&E.css("height",t.style.height),t.style.width?E.css("width",t.style.width):(E.css("width","").addClass(r),c=E.width()+1,d=E.css("max-width")||"",e=E.css("min-width")||"",b=(d+e).indexOf("%")>-1?a.width()/100:0,d=(d.indexOf("%")>-1?b:1)*parseInt(d,10)||c,e=(e.indexOf("%")>-1?b:1)*parseInt(e,10)||0,c=d+e?Math.min(Math.max(c,e),d):c,E.css("width",Math.round(c)).removeClass(r)),D=0,z},disable:function(b){return"boolean"!=typeof b&&(b=!E.hasClass(m)&&!H.disabled),z.rendered?(E.toggleClass(m,b),a.attr(E[0],"aria-disabled",b)):H.disabled=!!b,z},enable:function(){return z.disable(e)},destroy:function(){var b=s[0],c=a.attr(b,u),d=s.data("qtip");z.rendered&&(E.remove(),a.each(z.plugins,function(){this.destroy&&this.destroy()})),clearTimeout(z.timers.show),clearTimeout(z.timers.hide),R();if(!d||z===d)a.removeData(b,"qtip"),t.suppress&&c&&(a.attr(b,"title",c),s.removeAttr(u)),s.removeAttr("aria-describedby");return s.unbind(".qtip-"+w),delete j[z.id],s}})}function z(b,c){var i,j,k,l,m,n=a(this),o=a(document.body),p=this===document?o:n,q=n.metadata?n.metadata(c.metadata):f,r=c.metadata.type==="html5"&&q?q[c.metadata.name]:f,s=n.data(c.metadata.name||"qtipopts");try{s=typeof s=="string"?(new Function("return "+s))():s}catch(t){w("Unable to parse HTML5 attribute data: "+s)}l=a.extend(d,{},g.defaults,c,typeof s=="object"?x(s):f,x(r||q)),j=l.position,l.id=b;if("boolean"==typeof l.content.text){k=n.attr(l.content.attr);if(l.content.attr!==e&&k)l.content.text=k;else return w("Unable to locate content for tooltip! Aborting render of tooltip on element: ",n),e}j.container.length||(j.container=o),j.target===e&&(j.target=p),l.show.target===e&&(l.show.target=p),l.show.solo===d&&(l.show.solo=o),l.hide.target===e&&(l.hide.target=p),l.position.viewport===d&&(l.position.viewport=j.container),j.at=new h.Corner(j.at),j.my=new h.Corner(j.my);if(a.data(this,"qtip"))if(l.overwrite)n.qtip("destroy");else if(l.overwrite===e)return e;return l.suppress&&(m=a.attr(this,"title"))&&a(this).removeAttr("title").attr(u,m),i=new y(n,l,b,!!k),a.data(this,"qtip",i),n.bind("remove.qtip-"+b,function(){i.destroy()}),i}function A(b){var c=this,f=b.elements.tooltip,g=b.options.content.ajax,h=".qtip-ajax",i=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,j=d;b.checks.ajax={"^content.ajax":function(a,b,d){b==="ajax"&&(g=d),b==="once"?c.init():g&&g.url?c.load():f.unbind(h)}},a.extend(c,{init:function(){return g&&g.url&&f.unbind(h)[g.once?"one":"bind"]("tooltipshow"+h,c.load),c},load:function(d,f){function n(){l&&(b.show(d.originalEvent),f=e),a.isFunction(g.complete)&&g.complete.apply(this,arguments)}function o(c){k&&(c=a("<div/>").append(c.replace(i,"")).find(k)),b.set("content.text",c)}function p(a,c,d){if(a.status===0)return;b.set("content.text",c+": "+d)}var h=g.url.indexOf(" "),j=g.url,k,l=g.once&&!g.loading&&f;if(l)try{d.preventDefault()}catch(m){}else if(d&&d.isDefaultPrevented())return c;h>-1&&(k=j.substr(h),j=j.substr(0,h)),a.ajax(a.extend({success:o,error:p,context:b},g,{url:j,complete:n}))}}),c.init()}function B(a,b,c){var d=Math.ceil(b/2),e=Math.ceil(c/2),f={bottomright:[[0,0],[b,c],[b,0]],bottomleft:[[0,0],[b,0],[0,c]],topright:[[0,c],[b,0],[b,c]],topleft:[[0,0],[0,c],[b,c]],topcenter:[[0,c],[d,0],[b,c]],bottomcenter:[[0,0],[b,0],[d,c]],rightcenter:[[0,0],[b,e],[0,c]],leftcenter:[[b,0],[b,c],[0,e]]};return f.lefttop=f.bottomright,f.righttop=f.bottomleft,f.leftbottom=f.topright,f.rightbottom=f.topleft,f[a.string()]}function C(b,g){function t(a,f,g,h){if(!k.tip)return;var l=i.corner.clone(),n=g.adjusted,o=b.options.position.adjust.method.split(" "),p=o[0],q=o[1]||o[0],r={left:e,top:e,x:0,y:0},s,t={},u;i.corner.fixed!==d&&(p==="shift"&&l.precedance==="x"&&n.left&&l.y!=="center"?l.precedance=l.precedance==="x"?"y":"x":p==="flip"&&n.left&&(l.x=l.x==="center"?n.left>0?"left":"right":l.x==="left"?"right":"left"),q==="shift"&&l.precedance==="y"&&n.top&&l.x!=="center"?l.precedance=l.precedance==="y"?"x":"y":q==="flip"&&n.top&&(l.y=l.y==="center"?n.top>0?"top":"bottom":l.y==="top"?"bottom":"top"),l.string()!==m.corner.string()&&(m.top!==n.top||m.left!==n.left)&&i.update(l,e)),s=i.position(l,n),s.right!==c&&(s.left=-s.right),s.bottom!==c&&(s.top=-s.bottom),s.user=Math.max(0,j.offset);if(r.left=p==="shift"&&!!n.left)l.x==="center"?t["margin-left"]=r.x=s["margin-left"]-n.left:(u=s.right!==c?[n.left,-s.left]:[-n.left,s.left],(r.x=Math.max(u[0],u[1]))>u[0]&&(g.left-=n.left,r.left=e),t[s.right!==c?"right":"left"]=r.x);if(r.top=q==="shift"&&!!n.top)l.y==="center"?t["margin-top"]=r.y=s["margin-top"]-n.top:(u=s.bottom!==c?[n.top,-s.top]:[-n.top,s.top],(r.y=Math.max(u[0],u[1]))>u[0]&&(g.top-=n.top,r.top=e),t[s.bottom!==c?"bottom":"top"]=r.y);k.tip.css(t).toggle(!(r.x&&r.y||l.x==="center"&&r.y||l.y==="center"&&r.x)),g.left-=s.left.charAt?s.user:p!=="shift"||r.top||!r.left&&!r.top?s.left:0,g.top-=s.top.charAt?s.user:q!=="shift"||r.left||!r.left&&!r.top?s.top:0,m.left=n.left,m.top=n.top,m.corner=l.clone()}function u(a,b,c){b=b?b:a[a.precedance];var d=l.hasClass(r),e=k.titlebar&&a.y==="top",f=e?k.titlebar:k.content,g="border-"+b+"-width",h;return l.addClass(r),h=parseInt(f.css(g),10),h=(c?h||parseInt(l.css(g),10):h)||0,l.toggleClass(r,d),h}function v(b){var c=k.titlebar&&b.y==="top",d=c?k.titlebar:k.content,e=a.browser.mozilla,f=e?"-moz-":a.browser.webkit?"-webkit-":"",g=b.y+(e?"":"-")+b.x,h=f+(e?"border-radius-"+g:"border-"+g+"-radius");return parseInt(d.css(h),10)||parseInt(l.css(h),10)||0}function w(a){var b=a.precedance==="y",c=n[b?"width":"height"],d=n[b?"height":"width"],e=a.string().indexOf("center")>-1,f=c*(e?.5:1),g=Math.pow,h=Math.round,i,j,k,l=Math.sqrt(g(f,2)+g(d,2)),m=[p/f*l,p/d*l];return m[2]=Math.sqrt(g(m[0],2)-g(p,2)),m[3]=Math.sqrt(g(m[1],2)-g(p,2)),i=l+m[2]+m[3]+(e?0:m[0]),j=i/l,k=[h(j*d),h(j*c)],{height:k[b?0:1],width:k[b?1:0]}}var i=this,j=b.options.style.tip,k=b.elements,l=k.tooltip,m={top:0,left:0},n={width:j.width,height:j.height},o={},p=j.border||0,q=".qtip-tip",s=!!(a("<canvas />")[0]||{}).getContext;i.corner=f,i.mimic=f,i.border=p,i.offset=j.offset,i.size=n,b.checks.tip={"^position.my|style.tip.(corner|mimic|border)$":function(){i.init()||i.destroy(),b.reposition()},"^style.tip.(height|width)$":function(){n={width:j.width,height:j.height},i.create(),i.update(),b.reposition()},"^content.title.text|style.(classes|widget)$":function(){k.tip&&i.update()}},a.extend(i,{init:function(){var b=i.detectCorner()&&(s||a.browser.msie);return b&&(i.create(),i.update(),l.unbind(q).bind("tooltipmove"+q,t)),b},detectCorner:function(){var a=j.corner,c=b.options.position,f=c.at,g=c.my.string?c.my.string():c.my;return a===e||g===e&&f===e?e:(a===d?i.corner=new h.Corner(g):a.string||(i.corner=new h.Corner(a),i.corner.fixed=d),m.corner=new h.Corner(i.corner.string()),i.corner.string()!=="centercenter")},detectColours:function(c){var d,e,f,g=k.tip.css("cssText",""),h=c||i.corner,m=h[h.precedance],p="border-"+m+"-color",q="border"+m.charAt(0)+m.substr(1)+"Color",s=/rgba?\(0, 0, 0(, 0)?\)|transparent|#123456/i,t="background-color",u="transparent",v=" !important",w=a(document.body).css("color"),x=b.elements.content.css("color"),y=k.titlebar&&(h.y==="top"||h.y==="center"&&g.position().top+n.height/2+j.offset<k.titlebar.outerHeight(1)),z=y?k.titlebar:k.content;l.addClass(r),o.fill=e=g.css(t),o.border=f=g[0].style[q]||g.css(p)||l.css(p);if(!e||s.test(e))o.fill=z.css(t)||u,s.test(o.fill)&&(o.fill=l.css(t)||e);if(!f||s.test(f)||f===w)o.border=z.css(p)||u,s.test(o.border)&&(o.border=f);a("*",g).add(g).css("cssText",t+":"+u+v+";border:0"+v+";"),l.removeClass(r)},create:function(){var b=n.
width,c=n.height,d;k.tip&&k.tip.remove(),k.tip=a("<div />",{"class":"ui-tooltip-tip"}).css({width:b,height:c}).prependTo(l),s?a("<canvas />").appendTo(k.tip)[0].getContext("2d").save():(d='<vml:shape coordorigin="0,0" style="display:inline-block; position:absolute; behavior:url(#default#VML);"></vml:shape>',k.tip.html(d+d),a("*",k.tip).bind("click mousedown",function(a){a.stopPropagation()}))},update:function(b,c){var g=k.tip,l=g.children(),q=n.width,r=n.height,t="px solid ",v="px dashed transparent",x=j.mimic,y=Math.round,z,A,C,D,E;b||(b=m.corner||i.corner),x===e?x=b:(x=new h.Corner(x),x.precedance=b.precedance,x.x==="inherit"?x.x=b.x:x.y==="inherit"?x.y=b.y:x.x===x.y&&(x[b.precedance]=b[b.precedance])),z=x.precedance,i.detectColours(b),o.border!=="transparent"&&o.border!=="#123456"?(p=u(b,f,d),j.border===0&&p>0&&(o.fill=o.border),i.border=p=j.border!==d?j.border:p):i.border=p=0,C=B(x,q,r),i.size=E=w(b),g.css(E),b.precedance==="y"?D=[y(x.x==="left"?p:x.x==="right"?E.width-q-p:(E.width-q)/2),y(x.y==="top"?E.height-r:0)]:D=[y(x.x==="left"?E.width-q:0),y(x.y==="top"?p:x.y==="bottom"?E.height-r-p:(E.height-r)/2)],s?(l.attr(E),A=l[0].getContext("2d"),A.restore(),A.save(),A.clearRect(0,0,3e3,3e3),A.translate(D[0],D[1]),A.beginPath(),A.moveTo(C[0][0],C[0][1]),A.lineTo(C[1][0],C[1][1]),A.lineTo(C[2][0],C[2][1]),A.closePath(),A.fillStyle=o.fill,A.strokeStyle=o.border,A.lineWidth=p*2,A.lineJoin="miter",A.miterLimit=100,p&&A.stroke(),A.fill()):(C="m"+C[0][0]+","+C[0][1]+" l"+C[1][0]+","+C[1][1]+" "+C[2][0]+","+C[2][1]+" xe",D[2]=p&&/^(r|b)/i.test(b.string())?parseFloat(a.browser.version,10)===8?2:1:0,l.css({antialias:""+(x.string().indexOf("center")>-1),left:D[0]-D[2]*Number(z==="x"),top:D[1]-D[2]*Number(z==="y"),width:q+p,height:r+p}).each(function(b){var c=a(this);c[c.prop?"prop":"attr"]({coordsize:q+p+" "+(r+p),path:C,fillcolor:o.fill,filled:!!b,stroked:!b}).css({display:p||b?"block":"none"}),!b&&c.html()===""&&c.html('<vml:stroke weight="'+p*2+'px" color="'+o.border+'" miterlimit="1000" joinstyle="miter" '+' style="behavior:url(#default#VML); display:inline-block;" />')})),c!==e&&i.position(b)},position:function(b){var c=k.tip,f={},g=Math.max(0,j.offset),h,l,m;return j.corner===e||!c?e:(b=b||i.corner,h=b.precedance,l=w(b),m=[b.x,b.y],h==="x"&&m.reverse(),a.each(m,function(a,c){var e,i;c==="center"?(e=h==="y"?"left":"top",f[e]="50%",f["margin-"+e]=-Math.round(l[h==="y"?"width":"height"]/2)+g):(e=u(b,c,d),i=v(b),f[c]=a?p?u(b,c):0:g+(i>e?i:0))}),f[b[h]]-=l[h==="x"?"width":"height"],c.css({top:"",bottom:"",left:"",right:"",margin:""}).css(f),f)},destroy:function(){k.tip&&k.tip.remove(),l.unbind(q)}}),i.init()}function D(c){var f=this,g=c.options.show.modal,i=c.elements,j=i.tooltip,k="#qtip-overlay",l=".qtipmodal",m=l+c.id,o="is-modal-qtip",q=a(document.body),r;c.checks.modal={"^show.modal.(on|blur)$":function(){f.init(),i.overlay.toggle(j.is(":visible"))}},a.extend(f,{init:function(){return g.on?(r=f.create(),j.attr(o,d).css("z-index",h.modal.zindex+a(n+"["+o+"]").length).unbind(l).unbind(m).bind("tooltipshow"+l+" tooltiphide"+l,function(b,c,d){var e=b.originalEvent;if(e&&b.type==="tooltiphide"&&/mouse(leave|enter)/.test(e.type)&&a(e.relatedTarget).closest(r[0]).length)try{b.preventDefault()}catch(g){}else(!e||e&&!e.solo)&&f[b.type.replace("tooltip","")](b,d)}).bind("tooltipfocus"+l,function(b){if(b.isDefaultPrevented())return;var c=a(n).filter("["+o+"]"),d=h.modal.zindex+c.length,e=parseInt(j[0].style.zIndex,10);r[0].style.zIndex=d-1,c.each(function(){this.style.zIndex>e&&(this.style.zIndex-=1)}),c.end().filter("."+p).qtip("blur",b.originalEvent),j.addClass(p)[0].style.zIndex=d;try{b.preventDefault()}catch(f){}}).bind("tooltiphide"+l,function(b){a("["+o+"]").filter(":visible").not(j).last().qtip("focus",b)}),g.escape&&a(b).unbind(m).bind("keydown"+m,function(a){a.keyCode===27&&j.hasClass(p)&&c.hide(a)}),g.blur&&i.overlay.unbind(m).bind("click"+m,function(a){j.hasClass(p)&&c.hide(a)}),f):f},create:function(){function d(){r.css({height:a(b).height(),width:a(b).width()})}var c=a(k);return c.length?i.overlay=c.insertAfter(a(n).last()):(r=i.overlay=a("<div />",{id:k.substr(1),html:"<div></div>",mousedown:function(){return e}}).insertAfter(a(n).last()),a(b).unbind(l).bind("resize"+l,d),d(),r)},toggle:function(b,c,h){if(b&&b.isDefaultPrevented())return f;var i=g.effect,k=c?"show":"hide",l=r.is(":visible"),p=a("["+o+"]").filter(":visible").not(j),s;return r||(r=f.create()),r.is(":animated")&&l===c||!c&&p.length?f:(c?(r.css({left:0,top:0}),r.toggleClass("blurs",g.blur),q.bind("focusin"+m,function(b){var c=a(b.target),d=c.closest(".qtip"),f=d.length<1?e:parseInt(d[0].style.zIndex,10)>parseInt(j[0].style.zIndex,10);!f&&a(b.target).closest(n)[0]!==j[0]&&j.find("input:visible").filter(":first").focus()})):q.undelegate("*","focusin"+m),r.stop(d,e),a.isFunction(i)?i.call(r,c):i===e?r[k]():r.fadeTo(parseInt(h,10)||90,c?1:0,function(){c||a(this).hide()}),c||r.queue(function(a){r.css({left:"",top:""}),a()}),f)},show:function(a,b){return f.toggle(a,d,b)},hide:function(a,b){return f.toggle(a,e,b)},destroy:function(){var d=r;return d&&(d=a("["+o+"]").not(j).length<1,d?(i.overlay.remove(),a(b).unbind(l)):i.overlay.unbind(l+c.id),q.undelegate("*","focusin"+m)),j.removeAttr(o).unbind(l)}}),f.init()}"use strict";var d=!0,e=!1,f=null,g,h,i,j={},k="ui-tooltip",l="ui-widget",m="ui-state-disabled",n="div.qtip."+k,o=k+"-default",p=k+"-focus",q=k+"-hover",r=k+"-fluid",s="-31000px",t="_replacedByqTip",u="oldtitle",v;g=a.fn.qtip=function(b,h,i){var j=(""+b).toLowerCase(),k=f,l=a.makeArray(arguments).slice(1),m=l[l.length-1],n=this[0]?a.data(this[0],"qtip"):f;if(!arguments.length&&n||j==="api")return n;if("string"==typeof b)return this.each(function(){var b=a.data(this,"qtip");if(!b)return d;m&&m.timeStamp&&(b.cache.event=m);if(j!=="option"&&j!=="options"||!h)b[j]&&b[j].apply(b[j],l);else if(a.isPlainObject(h)||i!==c)b.set(h,i);else return k=b.get(h),e}),k!==f?k:this;if("object"==typeof b||!arguments.length)return n=x(a.extend(d,{},b)),g.bind.call(this,n,m)},g.bind=function(b,f){return this.each(function(k){function r(b){function d(){p.render(typeof b=="object"||l.show.ready),m.show.add(m.hide).unbind(o)}if(p.cache.disabled)return e;p.cache.event=a.extend({},b),p.cache.target=b?a(b.target):[c],l.show.delay>0?(clearTimeout(p.timers.show),p.timers.show=setTimeout(d,l.show.delay),n.show!==n.hide&&m.hide.bind(n.hide,function(){clearTimeout(p.timers.show)})):d()}var l,m,n,o,p,q;q=a.isArray(b.id)?b.id[k]:b.id,q=!q||q===e||q.length<1||j[q]?g.nextid++:j[q]=q,o=".qtip-"+q+"-create",p=z.call(this,q,b);if(p===e)return d;l=p.options,a.each(h,function(){this.initialize==="initialize"&&this(p)}),m={show:l.show.target,hide:l.hide.target},n={show:a.trim(""+l.show.event).replace(/ /g,o+" ")+o,hide:a.trim(""+l.hide.event).replace(/ /g,o+" ")+o},/mouse(over|enter)/i.test(n.show)&&!/mouse(out|leave)/i.test(n.hide)&&(n.hide+=" mouseleave"+o),m.show.bind("mousemove"+o,function(a){i={pageX:a.pageX,pageY:a.pageY,type:"mousemove"}}),m.show.bind(n.show,r),(l.show.ready||l.prerender)&&r(f)})},h=g.plugins={Corner:function(a){a=(""+a).replace(/([A-Z])/," $1").replace(/middle/gi,"center").toLowerCase(),this.x=(a.match(/left|right/i)||a.match(/center/)||["inherit"])[0].toLowerCase(),this.y=(a.match(/top|bottom|center/i)||["inherit"])[0].toLowerCase();var b=a.charAt(0);this.precedance=b==="t"||b==="b"?"y":"x",this.string=function(){return this.precedance==="y"?this.y+this.x:this.x+this.y},this.abbrev=function(){var a=this.x.substr(0,1),b=this.y.substr(0,1);return a===b?a:a==="c"||a!=="c"&&b!=="c"?b+a:a+b},this.clone=function(){return{x:this.x,y:this.y,precedance:this.precedance,string:this.string,abbrev:this.abbrev,clone:this.clone}}},offset:function(a,b){function i(a,b){c.left+=b*a.scrollLeft(),c.top+=b*a.scrollTop()}var c=a.offset(),d=b,e=0,f=document.body,g,h;if(d){do{d.css("position")!=="static"&&(g=d[0]===f?{left:parseInt(d.css("left"),10)||0,top:parseInt(d.css("top"),10)||0}:d.position(),c.left-=g.left+(parseInt(d.css("borderLeftWidth"),10)||0)+(parseInt(d.css("marginLeft"),10)||0),c.top-=g.top+(parseInt(d.css("borderTopWidth"),10)||0),h=d.css("overflow"),(h==="scroll"||h==="auto")&&e++);if(d[0]===f)break}while(d=d.offsetParent());b[0]!==f&&e&&i(b,1)}return c},iOS:parseFloat((""+(/CPU.*OS ([0-9_]{1,3})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_","."))||e,fn:{attr:function(b,c){if(this.length){var d=this[0],e="title",f=a.data(d,"qtip");if(b===e&&f&&"object"==typeof f&&f.options.suppress)return arguments.length<2?a.attr(d,u):(f&&f.options.content.attr===e&&f.cache.attr&&f.set("content.text",c),this.attr(u,c))}return a.fn["attr"+t].apply(this,arguments)},clone:function(b){var c=a([]),d="title",e=a.fn["clone"+t].apply(this,arguments);return b||e.filter("["+u+"]").attr("title",function(){return a.attr(this,u)}).removeAttr(u),e},remove:a.ui?f:function(b,c){if(a.ui)return;a(this).each(function(){c||(!b||a.filter(b,[this]).length)&&a("*",this).add(this).each(function(){a(this).triggerHandler("remove")})})}}},a.each(h.fn,function(b,c){if(!c||a.fn[b+t])return d;var e=a.fn[b+t]=a.fn[b];a.fn[b]=function(){return c.apply(this,arguments)||e.apply(this,arguments)}}),g.version="nightly",g.nextid=0,g.inactiveEvents="click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" "),g.zindex=15e3,g.defaults={prerender:e,id:e,overwrite:d,suppress:d,content:{text:d,attr:"title",title:{text:e,button:e}},position:{my:"top left",at:"bottom right",target:e,container:e,viewport:e,adjust:{x:0,y:0,mouse:d,resize:d,method:"flip flip"},effect:function(b,c,d){a(this).animate(c,{duration:200,queue:e})}},show:{target:e,event:"mouseenter",effect:d,delay:90,solo:e,ready:e,autofocus:e},hide:{target:e,event:"mouseleave",effect:d,delay:0,fixed:e,inactive:e,leave:"window",distance:e},style:{classes:"",widget:e,width:e,height:e,"default":d},events:{render:f,move:f,show:f,hide:f,toggle:f,visible:f,focus:f,blur:f}},h.ajax=function(a){var b=a.plugins.ajax;return"object"==typeof b?b:a.plugins.ajax=new A(a)},h.ajax.initialize="render",h.ajax.sanitize=function(a){var b=a.content,c;b&&"ajax"in b&&(c=b.ajax,typeof c!="object"&&(c=a.content.ajax={url:c}),"boolean"!=typeof c.once&&c.once&&(c.once=!!c.once))},a.extend(d,g.defaults,{content:{ajax:{loading:d,once:d}}}),h.tip=function(a){var b=a.plugins.tip;return"object"==typeof b?b:a.plugins.tip=new C(a)},h.tip.initialize="render",h.tip.sanitize=function(a){var b=a.style,c;b&&"tip"in b&&(c=a.style.tip,typeof c!="object"&&(a.style.tip={corner:c}),/string|boolean/i.test(typeof c.corner)||(c.corner=d),typeof c.width!="number"&&delete c.width,typeof c.height!="number"&&delete c.height,typeof c.border!="number"&&c.border!==d&&delete c.border,typeof c.offset!="number"&&delete c.offset)},a.extend(d,g.defaults,{style:{tip:{corner:d,mimic:e,width:6,height:6,border:d,offset:0}}}),h.modal=function(a){var b=a.plugins.modal;return"object"==typeof b?b:a.plugins.modal=new D(a)},h.modal.initialize="render",h.modal.sanitize=function(a){a.show&&(typeof a.show.modal!="object"?a.show.modal={on:!!a.show.modal}:typeof a.show.modal.on=="undefined"&&(a.show.modal.on=d))},h.modal.zindex=g.zindex+1e3,a.extend(d,g.defaults,{show:{modal:{on:e,effect:d,blur:d,escape:d}}})}(jQuery,window),function(a){function c(){var b=d(this);return isNaN(b.datetime)||a(this).text(e(b.datetime)),this}function d(c){c=a(c);if(!c.data("timeago")){c.data("timeago",{datetime:b.datetime(c)});var d=a.trim(c.text());d.length>0&&c.attr("title",d)}return c.data("timeago")}function e(a){return b.inWords(f(a))}function f(a){return(new Date).getTime()-a.getTime()}a.timeago=function(b){return b instanceof Date?e(b):typeof b=="string"?e(a.timeago.parse(b)):e(a.timeago.datetime(b))};var b=a.timeago;a.extend(a.timeago,{settings:{refreshMillis:6e4,allowFuture:!1,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",numbers:[]}},inWords:function(b){function k(d,e){var f=a.isFunction(d)?d(e,b):d,g=c.numbers&&c.numbers[e]||e;return f.replace(/%d/i,g)}var c=this.settings.strings,d=c.prefixAgo,e=c.suffixAgo;this.settings.allowFuture&&(b<0&&(d=c.prefixFromNow,e=c.suffixFromNow),b=Math.abs(b));var f=b/1e3,g=f/60,h=g/60,i=h/24,j=i/365,l=f<45&&k(c.seconds,Math.round(f))||f<90&&k(c.minute,1)||g<45&&k(c.minutes,Math.round(g))||g<90&&k(c.hour,1)||h<24&&k(c.hours,Math.round(h))||h<48&&k(c.day,1)||i<30&&k(c.days,Math.floor(i))||i<60&&k(c.month,1)||i<365&&k(c.months,Math.floor(i/30))||j<2&&k(c.year,1)||k(c.years,Math.floor(j));return a.trim([d,l,e].join(" "))},parse:function(b){var c=a.trim(b);return c=c.replace(/\.\d\d\d+/,""),c=c.replace(/-/,"/").replace(/-/,"/"),c=c.replace(/T/," ").replace(/Z/," UTC"),c=c.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(c)},datetime:function(c){var d=a(c).get(0).tagName.toLowerCase()==="time",e=d?a(c).attr("datetime"):a(c).attr("title");return b.parse(e)}}),a.fn.timeago=function(){var a=this;a.each(c);var d=b.settings;return d.refreshMillis>0&&setInterval(function(){a.each(c)},d.refreshMillis),a},document.createElement("abbr"),document.createElement("time")}(jQuery);var _target=null,_dragx=null,_dragy=null,_rotate=null,_resort=null,_dragging=!1,_sizing=!1,_animate=!1,_rotating=0,_width=0,_height=0,_left=0,_top=0,_xspeed=0,_yspeed=0,_zindex=1e3;jQuery.fn.touch=function(a){a=jQuery.extend({animate:!0,sticky:!1,dragx:!0,dragy:!0,rotate:!1,resort:!0,scale:!1},a);var b=[];b=$.extend({},$.fn.touch.defaults,a),this.each(function(){this.opts=b,this.ontouchstart=touchstart,this.ontouchend=touchend,this.ontouchmove=touchmove,this.ongesturestart=gesturestart,this.ongesturechange=gesturechange,this.ongestureend=gestureend})},function(a){a.extend(a.fn,{validate:function(b){if(!this.length){b&&b.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing");return}var c=a.data(this[0],"validator");if(c)return c;this.attr("novalidate","novalidate"),c=new a.validator(b,this[0]),a.data(this[0],"validator",c);if(c.settings.onsubmit){var d=this.find("input, button");d.filter(".cancel").click(function(){c.cancelSubmit=!0}),c.settings.submitHandler&&d.filter(":submit").click(function(){c.submitButton=this}),this.submit(function(b){function d(){if(c.settings.submitHandler){if(c.submitButton)var b=a("<input type='hidden'/>").attr("name",c.submitButton.name).val(c.submitButton.value).appendTo(c.currentForm);return c.settings.submitHandler.call(c,c.currentForm),c.submitButton&&b.remove(),!1}return!0}return c.settings.debug&&b.preventDefault(),c.cancelSubmit?(c.cancelSubmit=!1,d()):c.form()?c.pendingRequest?(c.formSubmitted=!0,!1):d():(c.focusInvalid(),!1)})}return c},valid:function(){if(a(this[0]).is("form"))return this.validate().form();var b=!0,c=a(this[0].form).validate();return this.each(function(){b&=c.element(this)}),b},removeAttrs:function(b){var c={},d=this;return a.each(b.split(/\s/),function(a,b){c[b]=d.attr(b),d.removeAttr(b)}),c},rules:function(b,c){var d=this[0];if(b){var e=a.data(d.form,"validator").settings,f=e.rules,g=a.validator.staticRules(d);switch(b){case"add":a.extend(g,a.validator.normalizeRule(c)),f[d.name]=g,c.messages&&(e.messages[d.name]=a.extend(e.messages[d.name],c.messages));break;case"remove":if(!c)return delete f[d.name],g;var h={};return a.each(c.split(/\s/),function(a,b){h[b]=g[b],delete g[b]}),h}}var i=a.validator.normalizeRules(a.extend({},a.validator.metadataRules(d),a.validator.classRules(d),a.validator.attributeRules(d),a.validator.staticRules(d)),d);if(i.required){var j=i.required;delete i.required,i=a.extend({required:j},i)}return i}}),a.extend(a.expr[":"],{blank:function(b){return!a.trim(""+b.value)},filled:function(b){return!!a.trim(""+b.value)},unchecked:function(a){return!a.checked}}),a.validator=function(b,c){this.settings=a.extend(!0,{},a.validator.defaults,b),this.currentForm=c,this.init()},a.validator.format=function(b,c){return arguments.length==1?function(){var c=a.makeArray(arguments);return c.unshift(b),a.validator.format.apply(this,c)}:(arguments.length>2&&c.constructor!=Array&&(c=a.makeArray(arguments).slice(1)),c.constructor!=Array&&(c=[c]),a.each(c,function(a,c){b=b.replace(new RegExp("\\{"+a+"\\}","g"),c)}),b)},a.extend(a.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:a([]),errorLabelContainer:a([]),onsubmit:!0,ignore:[],ignoreTitle:!1,onfocusin:function(a){this.lastActive=a,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,a,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(a)).hide())},onfocusout:function(a){!this.checkable(a)&&(a.name in this.submitted||!this.optional(a))&&this.element(a)},onkeyup:function(a){(a.name in this.submitted||a==this.lastElement)&&this.element(a)},onclick:function(a){a.name in this.submitted?this.element(a):a.parentNode.name in this.submitted&&this.element(a.parentNode)},highlight:function(b,c,d){b.type==="radio"?this.findByName(b.name).addClass(c).removeClass(d):a(b).addClass(c).removeClass(d)},unhighlight:function(b,c,d){b.type==="radio"?this.findByName(b.name).removeClass(c).addClass(d):a(b).removeClass(c).addClass(d)}},setDefaults:function(b){a.extend(a.validator.defaults,b)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:a.validator.format("Please enter no more than {0} characters."),minlength:a.validator.format("Please enter at least {0} characters."),rangelength:a.validator.format("Please enter a value between {0} and {1} characters long."),range:a.validator.format("Please enter a value between {0} and {1}."),max:a.validator.format("Please enter a value less than or equal to {0}."),min:a.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function d(b){var c=a.data(this[0].form,"validator"),d="on"+b.type.replace(/^validate/,"");c.settings[d]&&c.settings[d].call(c,this[0])}this.labelContainer=a(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||a(this.currentForm),this.containers=a(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var b=this.groups={};a.each(this.settings.groups,function(c,d){a.each(d.split(/\s/),function(a,d){b[d]=c})});var c=this.settings.rules;a.each(c,function(b,d){c[b]=a.validator.normalizeRule(d)}),a(this.currentForm).validateDelegate("[type='text'], [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",d).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",d),this.settings.invalidHandler&&a(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),a.extend(this.submitted,this.errorMap),this.invalid=a.extend({},this.errorMap),this.valid()||a(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var a=0,b=this.currentElements=this.elements();b[a];a++)this.check(b[a]);return this.valid()},element:function(b){b=this.clean(b),this.lastElement=b,this.prepareElement(b),this.currentElements=a(b);var c=this.check(b);return c?delete this.invalid[b.name]:this.invalid[b.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),c},showErrors:function(b){if(b){a.extend(this.errorMap,b),this.errorList=[];for(var c in b)this.errorList.push({message:b[c],element:this.findByName(c)[0]});this.successList=a.grep(this.successList,function(a){return!(a.name in b)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){a.fn.resetForm&&a(this.currentForm).resetForm(),this.submitted={},this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(a){var b=0;for(var c in a)b++;return b},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return this.size()==0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{a(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(b){}},findLastActive:function(){var b=this.lastActive;return b&&a.grep(this.errorList,function(a){return a.element.name==b.name}).length==1&&b},elements:function(){var b=this,c={};return a(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&b.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in c||!b.objectLength(a(this).rules())?!1:(c[this.name]=!0,!0)})},clean:function(b){return a(b)[0]},errors:function(){return a(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=a([]),this.toHide=a([]),this.currentElements=a([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(a){this.reset(),this.toHide=this.errorsFor(a)},check:function(b){b=this.clean(b),this.checkable(b)&&(b=this.findByName(b.name).not(this.settings.ignore)[0]);var c=a(b).rules(),d=!1;for(var e in c){var f={method:e,parameters:c[e]};try{var g=a.validator.methods[e].call(this,b.value.replace(/\r/g,""),b,f.parameters);if(g=="dependency-mismatch"){d=!0;continue}d=!1;if(g=="pending"){this.toHide=this.toHide.not(this.errorsFor(b));return}if(!g)return this.formatAndAdd(b,f),!1}catch(h){throw this.settings.debug&&window.console&&console.log("exception occured when checking element "+b.id+", check the '"+f.method+"' method",h),h}}if(d)return;return this.objectLength(c)&&this.successList.push(b),!0},customMetaMessage:function(b,c){if(!a.metadata)return;var d=this.settings.meta?a(b).metadata()[this.settings.meta]:a(b).metadata();return d&&d.messages&&d.messages[c]},customMessage:function(a,b){var c=this.settings.messages[a];return c&&(c.constructor==String?c:c[b])},findDefined:function(){for(var a=0;a<arguments.length;a++)if(arguments[a]!==undefined)return arguments[a];return undefined},defaultMessage:function(b,c){return this.findDefined(this.customMessage(b.name,c),this.customMetaMessage(b,c),!this.settings.ignoreTitle&&b.title||undefined,a.validator.messages[c],"<strong>Warning: No message defined for "+b.name+"</strong>")},formatAndAdd:function(a,b){var c=this.defaultMessage(a,b.method),d=/\$?\{(\d+)\}/g;typeof c=="function"?c=c.call(this,b.parameters,a):d.test(c)&&(c=jQuery.format(c.replace(d,"{$1}"),b.parameters)),this.errorList.push({message:c,element:a}),this.errorMap[a.name]=c,this.submitted[a.name]=c},addWrapper:function(a){return this.settings.wrapper&&(a=a.add(a.parent(this.settings.wrapper))),a},defaultShowErrors:function(){for(var a=0;this.errorList[a];a++){var b=this.errorList[a];this.settings.highlight&&this.settings.highlight.call(this,b.element,this.settings.errorClass,this.settings.validClass),this.showLabel(b.element,b.message)}this.errorList.length&&(this.toShow=this.toShow.add(this.containers));if(this.settings.success)for(var a=0;this.successList[a];a++)this.showLabel(this.successList[a]);if(this.settings.unhighlight)for(var a=0,c=this.validElements();c[a];a++)this.settings.unhighlight.call(this,c[a],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return a(this.errorList).map(function(){return this.element})},showLabel:function(b,c){var d=this.errorsFor(b);d.length?(d.removeClass(this.settings.validClass).addClass(this.settings.errorClass),d.attr("generated")&&d.html(c)):(d=a("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(b),generated:!0}).addClass(this.settings.errorClass).html(c||""),this.settings.wrapper&&(d=d.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(d).length||(this.settings.errorPlacement?this.settings.errorPlacement(d,a(b)):d.insertAfter(b))),!c&&this.settings.success&&(d.text(""),typeof this.settings.success=="string"?d.addClass(this.settings.success):this.settings.success(d)),this.toShow=this.toShow.add(d)},errorsFor:function(b){var c=this.idOrName(b);return this.errors().filter(function(){return a(this).attr("for")==c})},idOrName:function(a){return this.groups[a.name]||(this.checkable(a)?a.name:a.id||a.name)},checkable:function(a){return/radio|checkbox/i.test(a.type)},findByName:function(b){var c=this.currentForm;return a(document.getElementsByName(b)).map(function(a,d){return d.form==c&&d.name==b&&d||null})},getLength:function(b,c){switch(c.nodeName.toLowerCase()){case"select":return a("option:selected",c).length;case"input":if(this.checkable(c))return this.findByName(c.name).filter(":checked").length}return b.length},depend:function(a,b){return this.dependTypes[typeof a]?this.dependTypes[typeof a](a,b):!0},dependTypes:{"boolean":function(a,b){return a},string:function(b,c){return!!a(b,c.form).length},"function":function(a,b){return a(b)}},optional:function(b){return!a.validator.methods.required.call(this,a.trim(b.value),b)&&"dependency-mismatch"},startRequest:function(a){this.pending[a.name]||(this.pendingRequest++,this.pending[a.name]=!0)},stopRequest:function(b,c){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[b.name],c&&this.pendingRequest==0&&this.formSubmitted&&this.form()?(a(this.currentForm).submit(),this.formSubmitted=!1):!c&&this.pendingRequest==0&&this.formSubmitted&&(a(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(b){return a.data(b,"previousValue")||a.data(b,"previousValue",{old:null,valid:!0,message:this.defaultMessage(b,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},dateDE:{dateDE:!0},number:{number:!0},numberDE:{numberDE:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(b,c){b.constructor==String?this.classRuleSettings[b]=c:a.extend(this.classRuleSettings,b)},classRules:function(b){var c={},d=a(b).attr("class");return d&&a.each(d.split(" "),function(){this in a.validator.classRuleSettings&&a.extend(c,a.validator.classRuleSettings[this])}),c},attributeRules:function(b){var c={},d=a(b);for(var e in a.validator.methods){var f=d.attr(e);f?c[e]=f:d[0].getAttribute("type")===e&&(c[e]=!0)}return c.maxlength&&/-1|2147483647|524288/.test(c.maxlength)&&delete c.maxlength,c},metadataRules:function(b){if(!a.metadata)return{};var c=a.data(b.form,"validator").settings.meta;return c?a(b).metadata()[c]:a(b).metadata()},staticRules:function(b){var c={},d=a.data(b.form,"validator");return d.settings.rules&&(c=a.validator.normalizeRule(d.settings.rules[b.name])||{}),c},normalizeRules:function(b,c){return a.each(b,function(d,e){if(e===!1){delete b[d];return}if(e.param||e.depends){var f=!0;switch(typeof e.depends){case"string":f=!!a(e.depends,c.form).length;break;case"function":f=e.depends.call(c,c)}f?b[d]=e.param!==undefined?e.param:!0:delete b[d]}}),a.each(b,function(d,e){b[d]=a.isFunction(e)?e(c):e}),a.each(["minlength","maxlength","min","max"],function(){b[this]&&(b[this]=Number(b[this]))}),a.each(["rangelength","range"],function(){b[this]&&(b[this]=[Number(b[this][0]),Number(b[this][1])])}),a.validator.autoCreateRanges&&(b.min&&b.max&&(b.range=[b.min,b.max],delete b.min,delete b.max),b.minlength&&b.maxlength&&(b.rangelength=[b.minlength,b.maxlength],delete b.minlength,delete b.maxlength)),b.messages&&delete b.messages,b},normalizeRule:function(b){if(typeof b=="string"){var c={};a.each(b.split(/\s/),function(){c[this]=!0}),b=c}return b},addMethod:function(b,c,d){a.validator.methods[b]=c,a.validator.messages[b]=d!=undefined?d:a.validator.messages[b],c.length<3&&a.validator.addClassRules(b,a.validator.normalizeRule(b))},methods:{required:function(b,c,d){if(!this.depend(d,c))return"dependency-mismatch";switch(c.nodeName.toLowerCase()){case"select":var e=a(c).val();return e&&e.length>0;case"input":if(this.checkable(c))return this.getLength(b,c)>0;default:return a.trim(b).length>0}},remote:function(b,c,d){if(this.optional(c))return"dependency-mismatch";var e=this.previousValue(c);this.settings.messages[c.name]||(this.settings.messages[c.name]={}),e.originalMessage=this.settings.messages[c.name].remote,this.settings.messages[c.name].remote=e.message,d=typeof d=="string"&&{url:d}||d;if(this.pending[c.name])return"pending";if(e.old===b)return e.valid;e.old=b;var f=this;this.startRequest(c);var g={};return g[c.name]=b,a.ajax(a.extend(!0,{url:d,mode:"abort",port:"validate"+c.name,dataType:"json",data:g,success:function(d){f.settings.messages[c.name].remote=e.originalMessage;var g=d===!0;if(g){var h=f.formSubmitted;f.prepareElement(c),f.formSubmitted=h,f.successList.push(c),f.showErrors()}else{var i={},j=d||f.defaultMessage(c,"remote");i[c.name]=e.message=a.isFunction(j)?j(b):j,f.showErrors(i)}e.valid=g,f.stopRequest(c,g)}},d)),"pending"},minlength:function(b,c,d){return this.optional(c)||this.getLength(a.trim(b),c)>=d},maxlength:function(b,c,d){return this.optional(c)||this.getLength(a.trim(b),c)<=d},rangelength:function(b,c,d){var e=this.getLength(a.trim(b),c);return this.optional(c)||e>=d[0]&&e<=d[1]},min:function(a,b,c){return this.optional(b)||a>=c},max:function(a,b,c){return this.optional(b)||a<=c},range:function(a,b,c){return this.optional(b)||a>=c[0]&&a<=c[1]},email:function(a,b){return this.optional(b)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(a)},url:function(a,b){return this.optional(b)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i
.test(a)},date:function(a,b){return this.optional(b)||!/Invalid|NaN/.test(new Date(a))},dateISO:function(a,b){return this.optional(b)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(a)},number:function(a,b){return this.optional(b)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(a)},digits:function(a,b){return this.optional(b)||/^\d+$/.test(a)},creditcard:function(a,b){if(this.optional(b))return"dependency-mismatch";if(/[^0-9-]+/.test(a))return!1;var c=0,d=0,e=!1;a=a.replace(/\D/g,"");for(var f=a.length-1;f>=0;f--){var g=a.charAt(f),d=parseInt(g,10);e&&(d*=2)>9&&(d-=9),c+=d,e=!e}return c%10==0},accept:function(a,b,c){return c=typeof c=="string"?c.replace(/,/g,"|"):"png|jpe?g|gif",this.optional(b)||a.match(new RegExp(".("+c+")$","i"))},equalTo:function(b,c,d){var e=a(d).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){a(c).valid()});return b==e.val()}}}),a.format=a.validator.format}(jQuery),function(a){var b={};if(a.ajaxPrefilter)a.ajaxPrefilter(function(a,c,d){var e=a.port;a.mode=="abort"&&(b[e]&&b[e].abort(),b[e]=d)});else{var c=a.ajax;a.ajax=function(d){var e=("mode"in d?d:a.ajaxSettings).mode,f=("port"in d?d:a.ajaxSettings).port;return e=="abort"?(b[f]&&b[f].abort(),b[f]=c.apply(this,arguments)):c.apply(this,arguments)}}}(jQuery),function(a){!jQuery.event.special.focusin&&!jQuery.event.special.focusout&&document.addEventListener&&a.each({focus:"focusin",blur:"focusout"},function(b,c){function d(b){return b=a.event.fix(b),b.type=c,a.event.handle.call(this,b)}a.event.special[c]={setup:function(){this.addEventListener(b,d,!0)},teardown:function(){this.removeEventListener(b,d,!0)},handler:function(b){return arguments[0]=a.event.fix(b),arguments[0].type=c,a.event.handle.apply(this,arguments)}}}),a.extend(a.fn,{validateDelegate:function(b,c,d){return this.bind(c,function(c){var e=a(c.target);if(e.is(b))return d.apply(e,arguments)})}})}(jQuery),window.Modernizr=function(a,b,c){function B(a){k.cssText=a}function C(a,b){return B(o.join(a+";")+(b||""))}function D(a,b){return typeof a===b}function E(a,b){return!!~(""+a).indexOf(b)}function F(a,b){for(var d in a)if(k[a[d]]!==c)return b=="pfx"?a[d]:!0;return!1}function G(a,b){var c=a.charAt(0).toUpperCase()+a.substr(1),d=(a+" "+p.join(c+" ")+c).split(" ");return F(d,b)}function I(){e.input=function(a){for(var b=0,c=a.length;b<c;b++)t[a[b]]=a[b]in l;return t}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),e.inputtypes=function(a){for(var d=0,e,f,h,i=a.length;d<i;d++)l.setAttribute("type",f=a[d]),e=l.type!=="text",e&&(l.value=m,l.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(f)&&l.style.WebkitAppearance!==c?(g.appendChild(l),h=b.defaultView,e=h.getComputedStyle&&h.getComputedStyle(l,null).WebkitAppearance!=="textfield"&&l.offsetHeight!==0,g.removeChild(l)):/^(search|tel)$/.test(f)||(/^(url|email)$/.test(f)?e=l.checkValidity&&l.checkValidity()===!1:/^color$/.test(f)?(g.appendChild(l),g.offsetWidth,e=l.value!=m,g.removeChild(l)):e=l.value!=m)),s[a[d]]=!!e;return s}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var d="2.0.6",e={},f=!0,g=b.documentElement,h=b.head||b.getElementsByTagName("head")[0],i="modernizr",j=b.createElement(i),k=j.style,l=b.createElement("input"),m=":)",n=Object.prototype.toString,o=" -webkit- -moz- -o- -ms- -khtml- ".split(" "),p="Webkit Moz O ms Khtml".split(" "),q={svg:"http://www.w3.org/2000/svg"},r={},s={},t={},u=[],v,w=function(a,c,d,e){var f,h,j,k=b.createElement("div");if(parseInt(d,10))while(d--)j=b.createElement("div"),j.id=e?e[d]:i+(d+1),k.appendChild(j);return f=["&shy;","<style>",a,"</style>"].join(""),k.id=i,k.innerHTML+=f,g.appendChild(k),h=c(k,a),k.parentNode.removeChild(k),!!h},x=function(b){if(a.matchMedia)return matchMedia(b).matches;var c;return w("@media "+b+" { #"+i+" { position: absolute; } }",function(b){c=(a.getComputedStyle?getComputedStyle(b,null):b.currentStyle).position=="absolute"}),c},y=function(){function d(d,e){e=e||b.createElement(a[d]||"div"),d="on"+d;var f=d in e;return f||(e.setAttribute||(e=b.createElement("div")),e.setAttribute&&e.removeAttribute&&(e.setAttribute(d,""),f=D(e[d],"function"),D(e[d],c)||(e[d]=c),e.removeAttribute(d))),e=null,f}var a={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return d}(),z={}.hasOwnProperty,A;!D(z,c)&&!D(z.call,c)?A=function(a,b){return z.call(a,b)}:A=function(a,b){return b in a&&D(a.constructor.prototype[b],c)};var H=function(c,d){var f=c.join(""),g=d.length;w(f,function(c,d){var f=b.styleSheets[b.styleSheets.length-1],h=f.cssRules&&f.cssRules[0]?f.cssRules[0].cssText:f.cssText||"",i=c.childNodes,j={};while(g--)j[i[g].id]=i[g];e.touch="ontouchstart"in a||j.touch.offsetTop===9,e.csstransforms3d=j.csstransforms3d.offsetLeft===9,e.generatedcontent=j.generatedcontent.offsetHeight>=1,e.fontface=/src/i.test(h)&&h.indexOf(d.split(" ")[0])===0},g,d)}(['@font-face {font-family:"font";src:url("https://")}',["@media (",o.join("touch-enabled),("),i,")","{#touch{top:9px;position:absolute}}"].join(""),["@media (",o.join("transform-3d),("),i,")","{#csstransforms3d{left:9px;position:absolute}}"].join(""),['#generatedcontent:after{content:"',m,'";visibility:hidden}'].join("")],["fontface","touch","csstransforms3d","generatedcontent"]);r.flexbox=function(){function a(a,b,c,d){b+=":",a.style.cssText=(b+o.join(c+";"+b)).slice(0,-b.length)+(d||"")}function c(a,b,c,d){a.style.cssText=o.join(b+":"+c+";")+(d||"")}var d=b.createElement("div"),e=b.createElement("div");a(d,"display","box","width:42px;padding:0;"),c(e,"box-flex","1","width:10px;"),d.appendChild(e),g.appendChild(d);var f=e.offsetWidth===42;return d.removeChild(e),g.removeChild(d),f},r.canvas=function(){var a=b.createElement("canvas");return!!a.getContext&&!!a.getContext("2d")},r.canvastext=function(){return!!e.canvas&&!!D(b.createElement("canvas").getContext("2d").fillText,"function")},r.webgl=function(){return!!a.WebGLRenderingContext},r.touch=function(){return e.touch},r.geolocation=function(){return!!navigator.geolocation},r.postmessage=function(){return!!a.postMessage},r.websqldatabase=function(){var b=!!a.openDatabase;return b},r.indexedDB=function(){for(var b=-1,c=p.length;++b<c;)if(a[p[b].toLowerCase()+"IndexedDB"])return!0;return!!a.indexedDB},r.hashchange=function(){return y("hashchange",a)&&(b.documentMode===c||b.documentMode>7)},r.history=function(){return!!a.history&&!!history.pushState},r.draganddrop=function(){return y("dragstart")&&y("drop")},r.websockets=function(){for(var b=-1,c=p.length;++b<c;)if(a[p[b]+"WebSocket"])return!0;return"WebSocket"in a},r.rgba=function(){return B("background-color:rgba(150,255,150,.5)"),E(k.backgroundColor,"rgba")},r.hsla=function(){return B("background-color:hsla(120,40%,100%,.5)"),E(k.backgroundColor,"rgba")||E(k.backgroundColor,"hsla")},r.multiplebgs=function(){return B("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(k.background)},r.backgroundsize=function(){return G("backgroundSize")},r.borderimage=function(){return G("borderImage")},r.borderradius=function(){return G("borderRadius")},r.boxshadow=function(){return G("boxShadow")},r.textshadow=function(){return b.createElement("div").style.textShadow===""},r.opacity=function(){return C("opacity:.55"),/^0.55$/.test(k.opacity)},r.cssanimations=function(){return G("animationName")},r.csscolumns=function(){return G("columnCount")},r.cssgradients=function(){var a="background-image:",b="gradient(linear,left top,right bottom,from(#9f9),to(white));",c="linear-gradient(left top,#9f9, white);";return B((a+o.join(b+a)+o.join(c+a)).slice(0,-a.length)),E(k.backgroundImage,"gradient")},r.cssreflections=function(){return G("boxReflect")},r.csstransforms=function(){return!!F(["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"])},r.csstransforms3d=function(){var a=!!F(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]);return a&&"webkitPerspective"in g.style&&(a=e.csstransforms3d),a},r.csstransitions=function(){return G("transitionProperty")},r.fontface=function(){return e.fontface},r.generatedcontent=function(){return e.generatedcontent},r.video=function(){var a=b.createElement("video"),c=!1;try{if(c=!!a.canPlayType){c=new Boolean(c),c.ogg=a.canPlayType('video/ogg; codecs="theora"');var d='video/mp4; codecs="avc1.42E01E';c.h264=a.canPlayType(d+'"')||a.canPlayType(d+', mp4a.40.2"'),c.webm=a.canPlayType('video/webm; codecs="vp8, vorbis"')}}catch(e){}return c},r.audio=function(){var a=b.createElement("audio"),c=!1;try{if(c=!!a.canPlayType)c=new Boolean(c),c.ogg=a.canPlayType('audio/ogg; codecs="vorbis"'),c.mp3=a.canPlayType("audio/mpeg;"),c.wav=a.canPlayType('audio/wav; codecs="1"'),c.m4a=a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/aac;")}catch(d){}return c},r.localstorage=function(){try{return!!localStorage.getItem}catch(a){return!1}},r.sessionstorage=function(){try{return!!sessionStorage.getItem}catch(a){return!1}},r.webworkers=function(){return!!a.Worker},r.applicationcache=function(){return!!a.applicationCache},r.svg=function(){return!!b.createElementNS&&!!b.createElementNS(q.svg,"svg").createSVGRect},r.inlinesvg=function(){var a=b.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==q.svg},r.smil=function(){return!!b.createElementNS&&/SVG/.test(n.call(b.createElementNS(q.svg,"animate")))},r.svgclippaths=function(){return!!b.createElementNS&&/SVG/.test(n.call(b.createElementNS(q.svg,"clipPath")))};for(var J in r)A(r,J)&&(v=J.toLowerCase(),e[v]=r[J](),u.push((e[v]?"":"no-")+v));return e.input||I(),e.addTest=function(a,b){if(typeof a=="object")for(var d in a)A(a,d)&&e.addTest(d,a[d]);else{a=a.toLowerCase();if(e[a]!==c)return;b=typeof b=="boolean"?b:!!b(),g.className+=" "+(b?"":"no-")+a,e[a]=b}return e},B(""),j=l=null,a.attachEvent&&function(){var a=b.createElement("div");return a.innerHTML="<elem></elem>",a.childNodes.length!==1}()&&function(a,b){function s(a){var b=-1;while(++b<g)a.createElement(f[b])}a.iepp=a.iepp||{};var d=a.iepp,e=d.html5elements||"abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",f=e.split("|"),g=f.length,h=new RegExp("(^|\\s)("+e+")","gi"),i=new RegExp("<(/*)("+e+")","gi"),j=/^\s*[\{\}]\s*$/,k=new RegExp("(^|[^\\n]*?\\s)("+e+")([^\\n]*)({[\\n\\w\\W]*?})","gi"),l=b.createDocumentFragment(),m=b.documentElement,n=m.firstChild,o=b.createElement("body"),p=b.createElement("style"),q=/print|all/,r;d.getCSS=function(a,b){if(a+""===c)return"";var e=-1,f=a.length,g,h=[];while(++e<f){g=a[e];if(g.disabled)continue;b=g.media||b,q.test(b)&&h.push(d.getCSS(g.imports,b),g.cssText),b="all"}return h.join("")},d.parseCSS=function(a){var b=[],c;while((c=k.exec(a))!=null)b.push(((j.exec(c[1])?"\n":c[1])+c[2]+c[3]).replace(h,"$1.iepp_$2")+c[4]);return b.join("\n")},d.writeHTML=function(){var a=-1;r=r||b.body;while(++a<g){var c=b.getElementsByTagName(f[a]),d=c.length,e=-1;while(++e<d)c[e].className.indexOf("iepp_")<0&&(c[e].className+=" iepp_"+f[a])}l.appendChild(r),m.appendChild(o),o.className=r.className,o.id=r.id,o.innerHTML=r.innerHTML.replace(i,"<$1font")},d._beforePrint=function(){p.styleSheet.cssText=d.parseCSS(d.getCSS(b.styleSheets,"all")),d.writeHTML()},d.restoreHTML=function(){o.innerHTML="",m.removeChild(o),m.appendChild(r)},d._afterPrint=function(){d.restoreHTML(),p.styleSheet.cssText=""},s(b),s(l);if(d.disablePP)return;n.insertBefore(p,n.firstChild),p.media="print",p.className="iepp-printshim",a.attachEvent("onbeforeprint",d._beforePrint),a.attachEvent("onafterprint",d._afterPrint)}(a,b),e._version=d,e._prefixes=o,e._domPrefixes=p,e.mq=x,e.hasEvent=y,e.testProp=function(a){return F([a])},e.testAllProps=G,e.testStyles=w,e.prefixed=function(a){return G(a,"pfx")},g.className=g.className.replace(/\bno-js\b/,"")+(f?" js "+u.join(" "):""),e}(this,this.document);var transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"msTransitionEnd",transition:"transitionEnd"},CSS3_TRANSITION_END=transEndEventNames[Modernizr.prefixed("transition")];(function(){window.ForgeCraft={Models:{},Collections:{},Routers:{},Views:{},Config:{oreDim:64,attackDim:64,moveThreshold:12,dropInTimeout:500,highlightTimeout:1e3,sound:{music:!0,effects:!0},splash:{embiggenDelay:100,stickDelay:1e3,queueDelay:1400}}}}).call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b},c=function(a,b){return function(){return a.apply(b,arguments)}};ForgeCraft.Models.Attack=function(){function a(){a.__super__.constructor.apply(this,arguments)}return b(a,Backbone.Model),a.prototype.defaults={matched:!1,type:"warrior1",x:-1,y:-1},a.prototype.initialize=function(){return this.bind("add",this.cache,this),this.bind("change",this.cache,this)},a.prototype.cache=function(){return battle.grid.cache(this)},a.prototype.remove=function(){return battle.grid.consume(this),battle.grid.remove(this)},a.prototype.dropTo=function(a){return battle.grid.consume(this),this.set({y:a})},a.prototype.lock=function(){return this.set({type:battle.grid.LOCKED})},a.prototype.canMove=function(){return this.get("type")!==battle.grid.LOCKED},a}(),ForgeCraft.Collections.Grid=function(){function a(){a.__super__.constructor.apply(this,arguments)}return b(a,Backbone.Collection),a.prototype.model=ForgeCraft.Models.Attack,a.prototype.attackCache=[[]],a.prototype.ROWS=8,a.prototype.COLS=8,a.prototype.ATTACK_WIDTH=64,a.prototype.ATTACK_HEIGHT=64,a.prototype.WARRIOR1="warrior1",a.prototype.SHIELDBASH="shieldbash",a.prototype.THIEF1="thief1",a.prototype.THIEF2="thief2",a.prototype.RANGER="ranger",a.prototype.LOCKED="locked",a.prototype.initialize=function(){return this.locked=!1,this.holes=[],this.attackTypes=[this.WARRIOR1,this.WARRIOR1,this.WARRIOR1,this.SHIELDBASH,this.THIEF1,this.THIEF1,this.THIEF2,this.RANGER]},a.prototype.seed=function(){var a,b,c,d,e,f;this.prev=this.chooseRandomAttackType(),f=[];for(c=0,e=this.ROWS-1;0<=e?c<=e:c>=e;0<=e?c++:c--)f.push(function(){var e,f;f=[];for(b=0,e=this.COLS-1;0<=e?b<=e:b>=e;0<=e?b++:b--)d=this.chooseAttackType(c,b),a=new ForgeCraft.Models.Attack({x:b,y:c,type:d}),f.push(this.add(a));return f}.call(this));return f},a.prototype.lock=function(){return this.locked=!0,this.trigger("lock")},a.prototype.unlock=function(){return this.locked=!1,this.trigger("unlock")},a.prototype.chooseAttackType=function(a,b){var c;c=this.prev,this.prevAttack=this.attackAt(b,a-1),this.prevAttack!=null&&(this.prevRow=this.prevAttack.get("type"));while(c===this.prev||c===this.prevRow)c=this.chooseRandomAttackType();return this.prev=c},a.prototype.chooseRandomAttackType=function(){var a;return a=Math.floor(Math.random()*this.attackTypes.length),this.attackTypes[a]},a.prototype.cache=function(a){var b,c;return b=a.get("x"),c=a.get("y"),this.attackCache[b]==null&&(this.attackCache[b]=[]),this.attackCache[b][c]=a},a.prototype.uncache=function(a){var b,c;return b=a.get("x"),c=a.get("y"),this.attackCache[b]==null&&(this.attackCache[b]=[]),this.attackCache[b][c]=void 0},a.prototype.consume=function(a){var b;this.uncache(a),b=a.get("x");if(!_.include(this.holes,b))return this.holes.push(b)},a.prototype.fillHoles=function(){var a,b,d,e,f,g,h;if(this.holes.length>0){f=this.holes;for(d=0,e=f.length;d<e;d++){a=f[d];for(b=g=this.ROWS-2;g<=0?b<=0:b>=0;g<=0?b++:b--)this.applyGravityAt(a,b);for(b=h=this.ROWS-2;h<=0?b<=0:b>=0;h<=0?b++:b--)this.backFillAt(a,b);_.reject(this.holes,function(b){return b===a})}return setTimeout(c(function(){return this.detectMatches()},this),500)}return},a.prototype.applyGravityAt=function(a,b){var c,d,e;if(!(c=this.attackAt(a,b)))return;d=!1,e=b;while(!d)d=this.blockage(a,++e);if(d&&e-1!==b)return c.dropTo(e-1)},a.prototype.backFillAt=function(a,b){var c,d;if(this.attackAt(a,b))return;return d=this.chooseAttackType(b,a),c=new ForgeCraft.Models.Attack({type:d}),this.add(c),c.set({x:a,y:b})},a.prototype.blockage=function(a,b){return this.attackAt(a,b)!=null||b>=this.ROWS},a.prototype.attackAt=function(a,b){if(this.attackCache[a]==null)return;return this.attackCache[a][b]},a.prototype.attemptMove=function(a,b){var c,d,e;d=a.get("x"),e=a.get("y");switch(b){case"right":d+=1;break;case"left":d-=1;break;case"up":e-=1;break;case"down":e+=1}return c=this.attackAt(d,e),console.log("Swapping attack",a,b,c),this.swapAttacks(a,c)},a.prototype.swapAttacks=function(a,b){var c,d,e,f;c=a.get("x"),d=a.get("y"),e=b.get("x"),f=b.get("y"),a.set({x:e,y:f}),b.set({x:c,y:d});if(!this.detectMatches())return b.set({x:e,y:f}),a.set({x:c,y:d})},a.prototype.detectMatches=function(){return this.atLeastOneMatch=!1,this.matchSets=[],this.matches=[],this.detectRowMatches(),this.detectColMatches(),battle.queueAttacks(this.matchSets),this.atLeastOneMatch},a.prototype.detectRowMatches=function(){var a,b,c,d;d=[];for(b=0,c=this.ROWS-1;0<=c?b<=c:b>=c;0<=c?b++:b--)d.push(function(){var c,d;d=[];for(a=0,c=this.COLS-1;0<=c?a<=c:a>=c;0<=c?a++:a--)d.push(this.test(b,a,"right"));return d}.call(this));return d},a.prototype.detectColMatches=function(){var a,b,c,d;d=[];for(a=0,c=this.COLS-1;0<=c?a<=c:a>=c;0<=c?a++:a--)d.push(function(){var c,d;d=[];for(b=0,c=this.ROWS-1;0<=c?b<=c:b>=c;0<=c?b++:b--)d.push(this.test(b,a,"down"));return d}.call(this));return d},a.prototype.test=function(a,b,c){var d,e;return d=this.attackAt(b,a),c==="right"&&(e=this.attackAt(b+1,a)),c==="down"&&(e=this.attackAt(b,a+1)),d!=null&&d.canMove()&&e!=null&&e.canMove()&&d.get("type")===e.get("type")?this.addMatch(d,e):this.testMatches()},a.prototype.addMatch=function(a,b){_.include(this.matches,a)||this.matches.push(a);if(!_.include(this.matches,b))return this.matches.push(b)},a.prototype.testMatches=function(){var a,b,c,d;if(this.matches.length>2){this.atLeastOneMatch=!0,d=this.matches;for(b=0,c=d.length;b<c;b++)a=d[b],a.set({matched:!0});this.matchSets.push(this.matches)}return this.matches=[]},a.prototype.compress=function(){var a,b;b=[];for(a=0;a<=3;a++)b.push(this.lockRandomAttack());return b},a.prototype.lockRandomAttack=function(){var a;if(this.allLocked())return;a=this.randomAttack();while(!a.canMove())a=this.randomAttack();return a.lock()},a.prototype.allLocked=function(){var a,b,c,d;d=this.models;for(b=0,c=d.length;b<c;b++){a=d[b];if(a.canMove())return!1}return!0},a.prototype.randomAttack=function(){var a,b;return a=Math.floor(Math.random()*this.COLS),b=Math.floor(Math.random()*this.ROWS),this.attackAt(a,b)},a}()}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b},c=function(a,b){return function(){return a.apply(b,arguments)}};ForgeCraft.Models.Battle=function(){function a(){a.__super__.constructor.apply(this,arguments)}return b(a,Backbone.Model),a.prototype.PRE_STATE="pre",a.prototype.PLAY_STATE="play",a.prototype.PAUSE_STATE="pause",a.prototype.QUEUE_START_DELAY=500,a.prototype.QUEUE_SPEED=400,a.prototype.initialize=function(a){return this.attackQueue=[],this.processingAttackQueue=!1,this.enemy=new ForgeCraft.Models.Enemy(a.enemy),this.set({state:this.PRE_STATE}),player.set({defense:ForgeCraft.Config.player_defense})},a.prototype.start=function(){return this.grid=new ForgeCraft.Collections.Grid,this.grid.seed(),this.trigger("battle:start"),this.set({state:this.PLAY_STATE}),this.startCountDown()},a.prototype.stop=function(){return this.stopCountDown()},a.prototype.startCountDown=function(){return this.countDownInterval=setInterval(c(function(){return this.tick()},this),1e3)},a.prototype.stopCountDown=function(){return clearInterval(this.countDownInterval)},a.prototype.tick=function(){return this.enemy.trigger("tick")},a.prototype.play=function(){return this.set({state:this.PLAY_STATE})},a.prototype.isPlaying=function(){return this.get("state")===this.PLAY_STATE},a.prototype.pause=function(){return this.set({state:this.PAUSE_STATE})},a.prototype.isPaused=function(){return this.get("state")===this.PAUSE_STATE},a.prototype.queueEnemyAttack=function(){return this.attackQueue.push("enemy"),this.startAttackQueue()},a.prototype.queueAttacks=function(a){var b,d,e;for(d=0,e=a.length;d<e;d++)b=a[d],this.attackQueue.push(b);return setTimeout(c(function(){return this.startAttackQueue()},this),this.QUEUE_START_DELAY)},a.prototype.startAttackQueue=function(){if(this.processingAttackQueue)return;return this.processAttacks()},a.prototype.processAttacks=function(){var a;this.processingAttackQueue=this.attackQueue.length>0;if(!this.processingAttackQueue)return;return a=this.attackQueue.shift(),this.processAttack(a),this.attackQueue.length<1&&this.grid.fillHoles(),setTimeout(c(function(){return this.processAttacks()},this),this.QUEUE_SPEED)},a.prototype.processAttack=function(a){var b,c,d,e,f;if(a==="enemy")return this.processEnemyAttack();c=a[0].get("type"),console.log("Processing attack of type",c),this.enemy.takeAttack(c,a.length),f=[];for(d=0,e=a.length;d<e;d++)b=a[d],f.push(b.remove());return f},a.prototype.processEnemyAttack=function(){return this.enemy.attack()},a.prototype.win=function(){return this.stop(),this.attackQueue=[],this.set({winner:"player"})},a.prototype.lose=function(){return this.stop(),this.attackQueue=[],this.set({winner:"enemy"})},a}()}.call(this),function(){var a,b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};ForgeCraft.Models.Classification=function(){function a(){a.__super__.constructor.apply(this,arguments)}return c(a,Backbone.Model),a.prototype.defaults={name:"",priority:0,patterns:[]},a}(),a=100,ForgeCraft.Collections.ClassTemplates=function(){function a(){a.__super__.constructor.apply(this,arguments)}return c(a,Backbone.Collection),a}(),this.tunic=new ForgeCraft.Models.Classification({name:"Tunic",priority:a--,patterns:[[[1,0],[2,0],[0,1],[1,1],[2,1]],[[1,0],[0,1],[1,1],[0,2],[1,2]]]}),this.leggings=new ForgeCraft.Models.Classification({name:"Legging",priority:a--,patterns:[[[1,0],[0,1],[0,2],[1,2]],[[0,1],[1,1],[2,1],[2,0]],[[1,0],[1,1],[1,2],[0,2]],[[0,1],[1,0],[2,0],[2,1]]]}),this.crossbow=new ForgeCraft.Models.Classification({name:"Crossbow",priority:a--,patterns:[[[-1,1],[0,1],[1,1],[0,2],[0,3]],[[-1,1],[0,1],[1,1],[0,2],[-2,1]],[[-1,1],[0,1],[1,1],[0,2],[2,1]],[[-1,2],[0,1],[1,2],[0,2],[0,3]]]}),this.longsword=new ForgeCraft.Models.Classification({name:"Sword",priority:a--,patterns:[[[1,0],[2,0],[3,0]],[[0,1],[0,2],[0,3]]]}),this.axe=new ForgeCraft.Models.Classification({name:"Axe",priority:a--,patterns:[[[1,0],[2,0],[1,1],[1,2]],[[1,0],[2,0],[2,-1],[2,1]],[[0,1],[0,2],[1,1],[2,1]],[[0,1],[0,2],[-1,2],[1,2]]]}),this.shield=new ForgeCraft.Models.Classification({name:"Shield",priority:a--,patterns:[[[1,0],[0,1],[1,1]]]}),this.sword=new ForgeCraft.Models.Classification({name:"Sword",priority:a--,patterns:[[[1,0],[2,0]],[[0,1],[0,2]]]}),ForgeCraft.ClassTemplates=new ForgeCraft.Collections.ClassTemplates([this.tunic,this.leggings,this.crossbow,this.longsword,this.axe,this.shield])}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};ForgeCraft.Models.Enemy=function(){function a(){a.__super__.constructor.apply(this,arguments)}return b(a,Backbone.Model),a.prototype.initialize=function(){return this.bind("change:defense",this.detectDeath,this),this.bind("tick",this.tick)},a.prototype.takeAttack=function(a,b){var c,d,e,f;return console.log(this.get("name"),"taking",b,"x",a),a==="shieldbash"?this.takeShieldBash(b):(c=ForgeCraft.Config.attacks[a],b>3?(e=Math.round(Math.random()*2*c)+c,d=!0):(e=Math.round(Math.random()*c/2+c/2),d=!1),f=this.get("defense")-e,f<0&&(f=0),this.set({defense:f}),this.trigger("damage_taken",a,e,d),console.log("Taking damage",e))},a.prototype.lifePercent=function(){return Math.round(this.get("defense")/this.get("original_defense")*100)},a.prototype.takeShieldBash=function(a){var b;return b=this.get("next_attack")+a,this.set({next_attack:b}),this.trigger("shieldbash_taken")},a.prototype.detectDeath=function(){if(this.get("defense")<1)return this.die()},a.prototype.die=function(){return battle.win()},a.prototype.tick=function(){var a;return a=this.get("next_attack")-1,a===0?this.queueAttack():this.set({next_attack:a})},a.prototype.queueAttack=function(){return battle.queueEnemyAttack()},a.prototype.attack=function(){var a;return a=Math.round(this.get("attack")*Math.random()+this.get("attack")/2),player.takeDamage(a),this.set({next_attack:this.get("attack_interval")}),this.trigger("attack"),battle.grid.compress()},a}()}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b},c=function(a,b){return function(){return a.apply(b,arguments)}};ForgeCraft.Models.Event=function(){function a(){a.__super__.constructor.apply(this,arguments)}return b(a,Backbone.Model),a.prototype.defaults={message:""},a.prototype.initialize=function(){return this.bind("add",this.process,this)},a.prototype.process=function(){if(this.get("boss")!=null)return this.processBoss()},a.prototype.processBoss=function(){return setTimeout(c(function(){return window.appView.sendToBoss(this.get("boss"))},this),1e3)},a}(),ForgeCraft.Collections.Events=function(){function a(){a.__super__.constructor.apply(this,arguments)}return b(a,Backbone.Collection),a.prototype.model=ForgeCraft.Models.Event,a.prototype.url=function(){return"/forges/"+forge.get("id")+"/events"},a.prototype.lastEvent=function(){return this.at(this.length-1)},a.prototype.processLastEvent=function(){var a;a=this.lastEvent();if(a==null)return;return console.log("Processing event",a),a.process()},a}()}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b},c=function(a,b){return function(){return a.apply(b,arguments)}};ForgeCraft.Models.Forge=function(){function a(){a.__super__.constructor.apply(this,arguments)}return b(a,Backbone.Model),a.prototype.initialize=function(){return this.events=new ForgeCraft.Collections.Events(ForgeCraft.Config.latest_event)},a.prototype.hasEnoughFunds=function(a){return this.get("requires_funding")?this.get("funds")>a:!0},a.prototype.processEventResponse=function(a){var b;return a.player!=null&&player.set(a.player),a.loot!=null&&(b=new ForgeCraft.Models.Loot(a.loot),Loot.add(b)),forge.events.add(a.new_events.reverse()),eventsView.addEventsHTML(a.new_events_html)},a}(),ForgeCraft.Models.Forgeable=function(){function a(){a.__super__.constructor.apply(this,arguments)}return b(a,Backbone.Model),a.prototype.defaults={classification:"",ore:"",ores:[]},a.prototype.initialize=function(){return this.bind("change:ores",this.updateTileForgeables),this.trigger("change:ores",this,this.get("ores"))},a.prototype.updateTileForgeables=function(a,b){var c,d;return d=this,c=this.previous("ores"),$.each(c,function(a,c){return c.set({forgeable:_.include(b,c)?void 0:void 0})}),$.each(b,function(a,b){return b.set({forgeable:d}),d.setNeighbors(b)})},a.prototype.setNeighbors=function(a){var b,c,d;return c=a.get("x"),d=a.get("y"),b=[],this.hasOreAt(c,d-1)&&b.push("top"),this.hasOreAt(c+1,d)&&b.push("right"),this.hasOreAt(c,d+1)&&b.push("bottom"),this.hasOreAt(c-1,d)&&b.push("left"),a.set({neighbors:b})},a.prototype.hasOreAt=function(a,b){var c;return c=!1,$.each(this.get("ores"),function(d,e){c=e.get("x")===a&&e.get("y")===b;if(c)return!1}),c},a.prototype.toJSON=function(){return{forging:{classification:this.get("classification"),ore:this.get("ore"),ore_count:this.get("ores").length,accuracy:this.get("accuracy")}}},a.prototype.forge=function(a){if(this.forging)return;return this.forging=!0,this.set({accuracy:a}),Ores.clearForgeables(),this.markOres(),console.log("Forging with accuracy",this.get("accuracy")),this.save(this.toJSON,{success:this.convertToLootIfPurchased}),Sounds.play("forge_item")},a.prototype.markOres=function(){return $.each(this.get("ores"),function(a,b){return b.set({marked:!0})})},a.prototype.unmarkOres=function(){return $.each(this.get("ores"),function(a,b){return b.set({marked:!1})})},a.prototype.convertToLootIfPurchased=function(a,b){return console.log("Response from server is:",b),b.purchased?a.processEventResponse(b):a.unableToPurchase(b)},a.prototype.processEventResponse=function(a){var b;return Forgings.remove(this),player.set(a.player),forge.set(a.forge),this.consumeOres(),Ores.addReplacements(a.replacements),setTimeout(function(){return $(".ore").removeClass("unmarked")},500),b=new ForgeCraft.Models.Loot(a.loot),Loot.add(b),forge.events.add(a.new_events.reverse()),eventsView.addEventsHTML(a.new_events_html)},a.prototype.unableToPurchase=function(a){return this.unmarkOres(),forge.trigger("ForgeCraft:NeedMoreCoins"),player.set(a.player),Ores.refresh()},a.prototype.consumeOres=function(){return $.each(this.get("ores"),function(a,b){return b.clearForgeable(),b.destroy()}),setTimeout(c(function(){return Ores.refresh()},this),200)},a}(),ForgeCraft.Collections.Forgings=function(){function a(){a.__super__.constructor.apply(this,arguments)}return b(a,Backbone.Collection),a.prototype.model=ForgeCraft.Models.Forgeable,a.prototype.url=function(){return"/forges/"+window.forge.get("id")+"/loot"},a.prototype.onRender=function(){return this.reset()},a.prototype.forge=function(a){return console.log("Forging",a),a.forge()},a}()}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};ForgeCraft.Models.Loot=function(){function a(){a.__super__.constructor.apply(this,arguments)}return b(a,Backbone.Model),a.prototype.defaults={name:"",rarity:"",ore:""},a.prototype.sell=function(){var a;return a=this,this.destroy({success:function(a,b){return player.set(b.player),loadingView.hide()}})},a}(),ForgeCraft.Collections.Loot=function(){function a(){a.__super__.constructor.apply(this,arguments)}return b(a,Backbone.Collection),a.prototype.model=ForgeCraft.Models.Loot,a.prototype.url="/loot",a.prototype.fetchLootLock=!1,a.prototype.comparator=function(a){return-parseInt(a.get("id"))},a.prototype.fetchMore=function(a){var b;a==null&&(a=1),console.log("Attempting to fetch more loot",this.fetchLootLock);if(this.fetchLootLock===!0)return;return this.activateFetchLootLock(),b=this.at(this.length-1),this.fetch({data:{last:b.get("id"),forge_id:forge.get("id"),limit:a},add:!0,success:this.releaseFetchLootLock})},a.prototype.activateFetchLootLock=function(){return console.log("Activating fetch loot lock"),a.fetchLootLock=!0},a.prototype.releaseFetchLootLock=function(b,c){return console.log("Releasing fetch loot lock"),c.length<1&&forgeView.reflectBottomOfLootList(),a.fetchLootLock=!1},a.prototype.sell=function(a){var b;return loadingView.show(),b=this.get(a),b==null&&(b=new ForgeCraft.Models.Loot({id:a}),window.Loot.add(b)),b.sell()},a}()}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};ForgeCraft.Models.Map=function(){function a(){a.__super__.constructor.apply(this,arguments)}return b(a,Backbone.Model),a}()}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};ForgeCraft.Models.Ore=function(){function a(){a.__super__.constructor.apply(this,arguments)}return b(a,Backbone.Model),a.prototype.paramRoot="ore",a.prototype.defaults={rank:1,x:-1,y:-1,moveable:!0,neighbors:[]},a.prototype.initialize=function(){return this.bind("change",this.cache,this)},a.prototype.cache=function(){return Ores.cache(this)},a.prototype.clearForgeable=function(){return this.set({forgeable:void 0}),this.set({neighbors:[]})},a.prototype.dropTo=function(a){return Ores.consume(this),this.set({y:a})},a.prototype.forLog=function(){return this.get("name")+" ("+this.get("x")+", "+this.get("y")+")"+" in forgeable "+
this.get("forgeable")},a.prototype.useMovement=function(){return this.set({moveable:!1})},a}(),ForgeCraft.Collections.OresCollection=function(){function a(){a.__super__.constructor.apply(this,arguments)}return b(a,Backbone.Collection),a.prototype.model=ForgeCraft.Models.Ore,a.prototype.url=function(){return"/forges/"+forge.get("id")+"/ores"},a.prototype.numCols=0,a.prototype.numRows=0,a.prototype.oreCache=[[]],a.prototype.holes=[],a.prototype.replacements=[],a.prototype.oresInForgeables=[],a.prototype.workingForgeables=[],a.prototype.initialize=function(){return this.bind("destroy",this.consume,this),this.bind("reset",this.flush,this)},a.prototype.flush=function(){return console.log("Flushing Ores..."),this.oreCache=[[]],this.holes=[],this.replacements=[],this.oresInForgeables=[],this.workingForgeables=[]},a.prototype.initialFill=function(a){return this.reset(),this.fetch({data:{count:a},success:this.onInitialFill})},a.prototype.onInitialFill=function(a,b){var c,d;return console.log("On initial fill: ",a),c=0,d=0,Ores.forEach(function(a){a.set({x:c,y:d}),c++;if(c>=Ores.numCols)return c=0,d++}),Ores.trigger("reveal"),Ores.refresh()},a.prototype.cache=function(a){var b,c;return b=a.get("x"),c=a.get("y"),this.oreCache[b]==null&&(this.oreCache[b]=[]),this.oreCache[b][c]=a},a.prototype.uncache=function(a){var b,c;return b=a.get("x"),c=a.get("y"),this.oreCache[b]==null&&(this.oreCache[b]=[]),this.oreCache[b][c]=void 0},a.prototype.consume=function(a){var b;this.uncache(a),b=a.get("x");if(!_.include(this.holes,b))return this.holes.push(b)},a.prototype.oreAt=function(a,b){if(this.oreCache[a]==null)return;return this.oreCache[a][b]},a.prototype.oreInForgeable=function(a){return _.include(this.oresInForgeables,a)},a.prototype.swapOres=function(a,b){var c,d,e,f;return console.log("Swapping ore models",a,b),c=a.get("x"),d=a.get("y"),e=b.get("x"),f=b.get("y"),a.set({x:e,y:f}),b.set({x:c,y:d}),Sounds.play("ore_swap")},a.prototype.swapOresAndValidate=function(a,b){if(!a.get("moveable")||!b.get("moveable")){a.get("moveable")||a.trigger("ForgeCraft:MoveBlock"),b.get("moveable")||b.trigger("ForgeCraft:MoveBlock");return}if(!forge.hasEnoughFunds(0)){forge.trigger("ForgeCraft:NeedMoreCoins");return}return this.swapOres(a,b),a.useMovement(),b.useMovement(),Ores.refresh()},a.prototype.refresh=function(){return console.log("Refreshing board"),this.clearForgeables(),this.fillHoles(),this.detectForgeables()},a.prototype.fillHoles=function(){var a,b,c,d,e,f,g,h;if(this.holes.length>0){e=this.holes,h=[];for(c=0,d=e.length;c<d;c++){a=e[c];for(b=f=this.numRows-2;f<=0?b<=0:b>=0;f<=0?b++:b--)this.applyGravityAt(a,b);for(b=g=this.numRows-2;g<=0?b<=0:b>=0;g<=0?b++:b--)this.backFillAt(a,b);h.push(_.reject(this.holes,function(b){return b===a}))}return h}return},a.prototype.applyGravityAt=function(a,b){var c,d,e;if(!(e=this.oreAt(a,b)))return;c=!1,d=b;while(!c)c=this.blockage(a,++d);if(c&&d-1!==b)return e.dropTo(d-1)},a.prototype.backFillAt=function(a,b){var c;if(this.oreAt(a,b))return;return c=new ForgeCraft.Models.Ore(this.replacements.shift()),this.add(c),c.set({x:a,y:b})},a.prototype.blockage=function(a,b){return this.oreAt(a,b)!=null||b>=this.numRows},a.prototype.clearForgeables=function(){var a,b,c,d,e;this.oresInForgeables=[],d=this.models,e=[];for(b=0,c=d.length;b<c;b++)a=d[b],e.push(a.clearForgeable());return e},a.prototype.detectForgeables=function(){var a,b,c,d;window.Forgings=new ForgeCraft.Collections.Forgings;for(b=0,c=this.numRows-1;0<=c?b<=c:b>=c;0<=c?b++:b--)for(a=0,d=this.numCols-1;0<=d?a<=d:a>=d;0<=d?a++:a--)this.detectForgeable(this.oreAt(a,b));return this},a.prototype.detectForgeable=function(a){var b,c,d,e,f,g,h;if(this.oreInForgeable(a))return;e=this,this.workingOre=a,c=!1,d=0,h=[];for(b=0,g=ForgeCraft.ClassTemplates.length-1;0<=g?b<=g:b>=g;0<=g?b++:b--)f=ForgeCraft.ClassTemplates.at(b),c=e.testTemplate(f),c&&(d=f),c&&this.createForgeable(d,this.workingForgeable),h.push(!c);return h},a.prototype.testTemplate=function(a){var b,c,d;return c=this,b=a.get("patterns"),d=!1,$.each(b,function(a,b){return d=c.testPattern(b),!d}),d},a.prototype.testPattern=function(a){var b,c;return c=this,b=!0,this.workingForgeable=[this.workingOre],$.each(a,function(a,d){return b=c.testOreAt(d),b}),b},a.prototype.testOreAt=function(a){var b,c,d;return b=this.workingOre.get("x")+a[0],c=this.workingOre.get("y")+a[1],d=this.oreAt(b,c),d==null?!1:this.oreInForgeable(d)?!1:d.get("name")!==this.workingOre.get("name")?!1:(this.workingForgeable.push(d),!0)},a.prototype.createForgeable=function(a,b){var c;return c=new ForgeCraft.Models.Forgeable({ores:b,classification:a.get("name"),ore:b[0].get("name")}),Forgings.add(c),this.oresInForgeables=_.union(this.oresInForgeables,b)},a.prototype.addReplacements=function(a){return this.replacements||(this.replacements=[]),this.replacements=_.union(this.replacements,a)},a.prototype.unlockAllOres=function(){var a,b,c,d,e;d=this.models,e=[];for(b=0,c=d.length;b<c;b++)a=d[b],e.push(a.set({moveable:!0}));return e},a}()}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b},c=function(a,b){return function(){return a.apply(b,arguments)}};ForgeCraft.Models.Player=function(){function a(){a.__super__.constructor.apply(this,arguments)}return b(a,Backbone.Model),a.prototype.paramRoot="player",a.prototype.defaults={level:0,coins:0,setting:{}},a.prototype.initialize=function(){return this.bind("change:setting",this.updateSetting,this)},a.prototype.equip=function(a,b,c){var d;return console.log("Equipping loot",c),d={_method:"put",slot:b,loot_id:c},loadingView.show(),$.post("/heroes/"+a,d,function(a){console.log("Response from equpping loot",a),loadingView.hide();if($("#facebox").length>0)return $("#facebox").find(".content").html(a)})},a.prototype.updateSetting=function(){return ForgeCraft.Config.sound.music=this.get("setting").music,ForgeCraft.Config.sound.effects=this.get("setting").effects,Sounds.update()},a.prototype.takeDamage=function(a){var b;return b=this.get("defense")-a,b<=0&&(b=0,this.die()),this.set({defense:b})},a.prototype.die=function(){return battle.lose()},a.prototype.increaseSkill=function(a){return $.post("/skills.json",{_method:"PUT",skill:a},c(function(a){return this.set(a)},this))},a}(),ForgeCraft.Collections.PlayersCollection=function(){function a(){a.__super__.constructor.apply(this,arguments)}return b(a,Backbone.Collection),a.prototype.model=ForgeCraft.Models.Player,a.prototype.url="/players",a}()}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};ForgeCraft.Models.Sound=function(){function a(){a.__super__.constructor.apply(this,arguments)}return b(a,Backbone.Model),a.prototype.initialize=function(){return this.bind("add",this.register,this)},a.prototype.register=function(){return Crafty.audio.add(this.get("id"),[this.get("mp3_url"),this.get("ogg_url"),this.get("wav_url")])},a}(),ForgeCraft.Collections.Sounds=function(){function a(){a.__super__.constructor.apply(this,arguments)}return b(a,Backbone.Collection),a.prototype.model=ForgeCraft.Models.Sound,a.prototype.ORE_SWAP="ore_swap",a.prototype.FORGE_ITEM="forge_item",a.prototype.FORGE_MUSIC="forge_music",a.prototype.EQUIP_ITEM="equip_item",a.prototype.BATTLE_START="battle_start",a.prototype.BATTLE_WON="battle_won",a.prototype.BATTLE_LOST="battle_lost",a.prototype.BATTLE_MUSIC="battle_music",a.prototype.ENEMY_ATTACK="enemy_attack",a.prototype.WARRIOR1="warrior1_attack",a.prototype.SHIELDBASH="shieldbash_attack",a.prototype.THIEF1="thief1_attack",a.prototype.THIEF2="thief2_attack",a.prototype.RANGER="ranger_attack",a.prototype.CRITICAL_HIT="critical_hit",a.prototype.initialize=function(){return Crafty.audio.MAX_CHANNELS=1,this.bind("reset",this.registerAll,this),this.registerAll()},a.prototype.registerAll=function(){var a,b,c,d,e;Crafty.audio._elems={},d=this.models,e=[];for(b=0,c=d.length;b<c;b++)a=d[b],e.push(a.register());return e},a.prototype.prepareSounds=function(){},a.prototype.idByTag=function(a){var b,c,d,e,f,g;c=[],g=this.models;for(e=0,f=g.length;e<f;e++)d=g[e],d.get("tag")===a&&c.push(d);return b=Math.floor(Math.random()*c.length),d=c[b],d!=null?d.get("id"):null},a.prototype.play=function(a,b){var c;if(!ForgeCraft.Config.sound.effects)return;c=this.idByTag(a);if(c!=null)return Crafty.audio.play(c,b)},a.prototype.playMusic=function(){var a;if(!ForgeCraft.Config.sound.music)return;a=this.idByTag(this.FORGE_MUSIC);if(a!=null)return Crafty.audio.play(a,-1)},a.prototype.playBattleMusic=function(){var a;if(!ForgeCraft.Config.sound.music)return;a=this.idByTag(this.BATTLE_MUSIC);if(a!=null)return Crafty.audio.play(a,-1)},a.prototype.stopMusic=function(){return this.stop(this.FORGE_MUSIC),this.stop(this.BATTLE_MUSIC)},a.prototype.stop=function(a){var b,c,d,e,f,g;d=this.idByTag(a);if(d==null)return;c=Crafty.audio._elems[d],g=[];for(e=0,f=c.length;e<f;e++)b=c[e],g.push(b.pause());return g},a.prototype.update=function(){if(!ForgeCraft.Config.sound.music)return this.stopMusic();window.location.pathname.match("/forges/")&&this.playMusic();if(window.location.pathname.match("/enemies/"))return this.playBattleMusic()},a}()}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b},c=function(a,b){return function(){return a.apply(b,arguments)}};ForgeCraft.Views.AppView=function(){function a(){a.__super__.constructor.apply(this,arguments)}return b(a,Backbone.View),a.prototype.initialize=function(){return this.startHistory(),this.bindInternalLinks(),this.bindAlerts(),this.startAppContext(window.location.pathname),this.resetLoadTriggers()},a.prototype.resetLoadTriggers=function(){return this.faded=!1,this.loaded=!1},a.prototype.load=function(a,b){var c;return c=this,flashView.hide(),loadingView.show(),$(window).unbind("resize"),this.resetLoadTriggers(),$("#content").fadeOut("fast",function(){return $("body").scrollTop(0),c.faded=!0,c.reveal()}),$("#content").load(a,function(){c.loaded=!0,c.startAppContext(a);if(b!=null)return b.apply()})},a.prototype.reveal=function(){if(!this.faded||!this.loaded)return;return $("#content").fadeIn("fast")},a.prototype.startHistory=function(){return Backbone.history.start({pushState:!0,silent:!0})},a.prototype.startAppContext=function(a){console.log("Starting app context with",a),this.reveal(),loadingView.hide(),tooltipView.bindElements("#content"),Sounds.stopMusic();if(a.match("/logout"))return;return a.match("/forges/")&&this.startForge(),a.match("/map")&&this.startMap(),a.match("/enemies")?this.startBattle():this.stopBattle()},a.prototype.startForge=function(){return window.forge=new ForgeCraft.Models.Forge(ForgeCraft.Config.forge),window.forgeView=new ForgeCraft.Views.ForgeView({el:$("#forge").get(0),model:window.forge}),window.forge.events.processLastEvent()},a.prototype.startMap=function(){return mapView.start()},a.prototype.startBattle=function(){return window.battle=new ForgeCraft.Models.Battle({enemy:ForgeCraft.Config.enemy}),window.battleView=new ForgeCraft.Views.BattleView({model:window.battle})},a.prototype.stopBattle=function(){if(window.battle==null)return;return window.battle.stop()},a.prototype.sendToBoss=function(a){return splashView.queueMessage("Forging Complete!"),splashView.queueMessage("Boss Fight!"),setTimeout(c(function(){return Backbone.history.navigate("enemies/"+a.to_param,!0)},this),2500)},a.prototype.bindInternalLinks=function(){return $("a").live("click",function(){var a;if(!$(this).attr("data-external"))return a=$(this).attr("href").slice(1),Backbone.history.navigate(a,!0),!1})},a.prototype.bindAlerts=function(){return $(".notice").alert()},a}()}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};ForgeCraft.Views.ArmoryView=function(){function a(){a.__super__.constructor.apply(this,arguments)}return b(a,Backbone.View),a.prototype.initialize=function(){return this.bindItemDelete(),this.bindFilterChange(),this.bindItemCreateLink(),this.bindItemEditLink(),this.bindItemFormCallbacks(),this.bindItemSold()},a.prototype.bindItemDelete=function(){return $(".delete-item").live("ajax:complete",function(a){var b;return b=$(a.target).attr("data-item-id"),$("#row_item_"+b).remove()})},a.prototype.bindFilterChange=function(){return $("input[rel=filter]").live("change",this.applyFilter)},a.prototype.applyFilter=function(){var a,b,c,d,e,f;return f="armory?",a=$("input[name=classification]:checked").val(),f+="&classification="+a,b=[],c="",$('input[name="ores[]"]:checked').each(function(a,d){var e;return e=$(d).val(),b.push(e),c+="&ores[]="+e}),b.length!==$('input[name="ores[]"]').length&&b.length!==0&&(f+=c),d=[],e="",$('input[name="rarities[]"]:checked').each(function(a,b){var c;return c=$(b).val(),d.push(c),e+="&rarities[]="+c}),d.length!==$('input[name="rarities[]"]').length&&d.length!==0&&(f+=e),Backbone.history.navigate(f,!1),f="/"+f+"&filter=1",loadingView.show(),$("#item-table-wrap").load(f,function(){return loadingView.hide()})},a.prototype.bindItemCreateLink=function(){return $(".create-item").live("click",function(){return $.facebox({ajax:"/items/new"}),!1})},a.prototype.bindItemEditLink=function(){return $(".edit-item").live("click",function(){var a;return a=$(this).attr("rel"),$.facebox({ajax:"/items/"+a+"/edit"}),!1})},a.prototype.bindItemFormCallbacks=function(){return $("#new_item, .edit_item").live("ajax:beforeSend",function(){return loadingView.show()}),$("#new_item, .edit_item").live("ajax:complete",function(){return loadingView.hide(),$(document).trigger("close.facebox"),window.armoryView.applyFilter()})},a.prototype.bindItemSold=function(){return window.Loot.bind("destroy",this.removeItem,this)},a.prototype.removeItem=function(a){return $(".loot[data-id="+a.get("id")+"]").fadeOut(function(){return $(this).remove()})},a}()}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b},c=function(a,b){return function(){return a.apply(b,arguments)}};ForgeCraft.Views.AttackView=function(){function a(){a.__super__.constructor.apply(this,arguments)}return b(a,Backbone.View),a.prototype.tagName="div",a.prototype.className="attack",a.prototype.events={mousedown:"onDown",touchstart:"onDown",mousemove:"onMove",touchmove:"onMove",mouseup:"onUp",touchend:"onUp",mouseout:"onUp",touchcancel:"onUp"},a.prototype.initialize=function(){return this.model.bind("change:x",this.updateCoordinates,this),this.model.bind("change:y",this.updateCoordinates,this),this.model.bind("change:matched",this.matched,this),this.model.bind("remove",this.remove,this),this.model.bind("change:type",this.lock,this)},a.prototype.render=function(a){$(this.el).addClass(this.model.get("type")),$(this.el).data("view",this);if(!a)return $(this.el).css({left:this.leftPos(),top:this.topPos()})},a.prototype.updateCoordinates=function(){return this.animateToPosition(!1)},a.prototype.animateToPosition=function(a){var b,c;return a==null&&(a=!1),b=this,c=parseInt(Math.random()*ForgeCraft.Config.dropInTimeout),$(this.el).animate({left:this.leftPos()},"fast"),$(b.el).animate({top:b.topPos()},"fast")},a.prototype.leftPos=function(){var a;return a=$("#grid").position().left,a+ForgeCraft.Config.attackDim*this.model.get("x")},a.prototype.topPos=function(){var a,b,c;return c=this.model.get("y"),c===-1?b=-2*ForgeCraft.Config.attackDim:(a=$("#grid").position().top,b=a+ForgeCraft.Config.attackDim*this.model.get("y"))},a.prototype.canMove=function(){return this.model.canMove()&&!battle.grid.locked},a.prototype.onDown=function(a){return this.canMove()?(this.watching=!0,this.ref={x:a.pageX,y:a.pageY},this.refAttack=this.model,a.preventDefault(),!1):!1},a.prototype.onMove=function(a){return this.canMove()?this.watching?(this.delta={x:a.pageX-this.ref.x,y:a.pageY-this.ref.y},console.log("delta is",this.delta.x,this.delta.y),this.delta.x>=ForgeCraft.Config.moveThreshold&&this.refAttack.get("x")<battle.grid.COLS-1&&(this.direction="right"),this.delta.x<=-ForgeCraft.Config.moveThreshold&&this.refAttack.get("x")>0&&(this.direction="left"),this.delta.y>=ForgeCraft.Config.moveThreshold&&this.refAttack.get("y")<battle.grid.ROWS-1&&(this.direction="down"),this.delta.y<=-ForgeCraft.Config.moveThreshold&&this.refAttack.get("y")>0&&(this.direction="up"),this.direction!=null&&(battle.grid.attemptMove(this.refAttack,this.direction),this.onUp()),a.preventDefault(),!1):!1:!1},a.prototype.onUp=function(){return this.canMove()?this.watching?(this.watching=!1,this.ref=void 0,this.refAttack=void 0,this.direction=void 0):!1:!1},a.prototype.matched=function(){return this.model.get("matched")?$(this.el).addClass("matched"):$(this.el).removeClass("matched")},a.prototype.remove=function(){return $(this.el).fadeOut(c(function(){return $(this.el).remove()},this))},a.prototype.lock=function(){return $(this.el).addClass("locked")},a}(),ForgeCraft.Views.GridView=function(){function a(){a.__super__.constructor.apply(this,arguments)}return b(a,Backbone.View),a.prototype.tagName="div",a.prototype.id="attacks",a.prototype.initialize=function(){return $(this.el).show(),this.createAttackViews(),this.model.bind("add",this.createAttackView,this)},a.prototype.createAttackViews=function(){var a,b,c,d,e;d=battle.grid.models,e=[];for(b=0,c=d.length;b<c;b++)a=d[b],e.push(this.createAttackView(a,!1));return e},a.prototype.createAttackView=function(a,b){var c;return b==null&&(b=!0),c=new ForgeCraft.Views.AttackView({model:a,el:this.generateAttackElement()}),c.gridView=this,c.render(b)},a.prototype.generateAttackElement=function(){var a,b;return a=$('<div class="attack"><div class="icon" /></div>'),b=a.get(0),$("#grid").append(b),b},a}()}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b},c=function(a,b){return function(){return a.apply(b,arguments)}};ForgeCraft.Views.BattleView=function(){function a(){a.__super__.constructor.apply(this,arguments)}return b(a,Backbone.View),a.prototype.tagName="div",a.prototype.id="battle",a.prototype.initialize=function(){return this.model.bind("battle:start",this.onBattleStart,this),this.model.bind("change:state",this.onStateChange,this),this.model.bind("change:winner",this.endBattle,this),this.renderBattle(),Modernizr.touch||$(window).unbind("resize").resize(c(function(){return this.renderBattle()},this)),$(document).unbind("orientationchange").bind("orientationchange",c(function(){return this.renderBattle()},this)),this.enemyView=new ForgeCraft.Views.EnemyView({model:this.model.enemy}),Sounds.playBattleMusic()},a.prototype.renderBattle=function(){return this.resizeBattle(),this.bindStart()},a.prototype.resizeBattle=function(){return this.topBarHeight=$(".topbar").height(),this.htmlHeight=$("html").height(),this.battleHeight=this.htmlHeight-this.topBarHeight,$("#sidebar").css({minHeight:this.battleHeight}),this.fullWidth=$("#enemy").width(),this.sidebarWidth=$("#sidebar").width(),$("#battle").css({width:this.fullWidth-this.sidebarWidth-20,height:this.battleHeight})},a.prototype.bindStart=function(){var a;return a=this,$(".start").click(c(function(){return this.model.start(),!1},this))},a.prototype.onStateChange=function(){this.model.isPlaying()&&this["continue"]();if(this.model.isPaused())return this.pause()},a.prototype.onBattleStart=function(){var a;return a=this,$(".restart").fadeIn().click(function(){return window.location.reload()}),$("#pre-battle").fadeOut(c(function(){return a.gridView=new ForgeCraft.Views.GridView({el:$("#grid").get(0),model:this.model.grid})},this))},a.prototype["continue"]=function(){},a.prototype.pause=function(){},a.prototype.endBattle=function(){var a;return this.model.get("winner")==="player"?(splashView.queueMessage("Victory!"),a="/enemies/"+this.model.enemy.get("to_param")+".json",$.post(a,{_method:"PUT",winner:this.model.get("winner")},function(a){return Backbone.history.navigate("forges/"+a.id,!0)})):(splashView.queueMessage("Defeat!"),window.location.reload())},a}()}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b},c=function(a,b){return function(){return a.apply(b,arguments)}};ForgeCraft.Views.EnemyView=function(){function a(){a.__super__.constructor.apply(this,arguments)}return b(a,Backbone.View),a.prototype.initialize=function(){return this.model.bind("change:defense",this.reflectCurrentDefense,this),this.model.bind("damage_taken",this.takeDamage,this),this.model.bind("shieldbash_taken",this.takeShieldBash,this),this.model.bind("change:next_attack",this.reflectNextAttack,this),this.model.bind("attack",this.announceAttack,this)},a.prototype.takeDamage=function(a,b,c){return c==null&&(c=!1),this.lifebarReflectDamage(b,c),Sounds.play(a)},a.prototype.lifebarReflectDamage=function(a,b){var c;return b==null&&(b=!1),$("#enemy-lifebar").effect("pulsate",{times:3},50),b?this.showCombatText("Critical Hit! -"+a,c=!0):this.showCombatText("-"+a)},a.prototype.takeShieldBash=function(){return this.showCombatText("Shield Bash!")},a.prototype.showCombatText=function(a,b){var d;return b==null&&(b=!1),d=Math.round(Math.random()*1e4),$(".enemy").find(".combat-text").append('<span class="damage" id="'+d+'">'+a+"</span>"),b&&$("#"+d).addClass("big"),setTimeout(c(function(){return this.floatCombatText(d)},this),300)},a.prototype.floatCombatText=function(a){return $("#"+a).addClass("displayed").bind(CSS3_TRANSITION_END,function(){return $(this).fadeOut(function(){return $(this).remove()})})},a.prototype.reflectCurrentDefense=function(){return $(".enemy").find(".defense").html(this.model.get("defense")),$("#enemy-lifebar").find(".bar").css({width:this.model.lifePercent()+"%"})},a.prototype.reflectNextAttack=function(){return $(".counter").html(this.model.get("next_attack"))},a.prototype.announceAttack=function(){return splashView.queueMessage(this.model.get("name")+" Attacks!")},a}()}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};ForgeCraft.Views.EquipperView=function(){function a(){a.__super__.constructor.apply(this,arguments)}return b(a,Backbone.View),a.prototype.initialize=function(){return this.bindLootClicks(),this.bindSellClicks(),this.bindEquipClicks()},a.prototype.bindLootClicks=function(){var a;return a=this,$(".launch-equipper").live("click",function(){var b;return b=$(this).attr("data-id"),a.activateEquipper(b),!1})},a.prototype.bindSellClicks=function(){var a;return a=this,$(".loot").find(".sell-action").live("click",function(a){var b;return b=$(this).parent().attr("data-id"),Loot.sell(b),$(document).trigger("close.facebox"),a.preventDefault(),!1})},a.prototype.bindEquipClicks=function(){var a;return a=this,$(".slot.enabled").live("click",function(a){var b,c,d;return c=$("#equipper").find(".loot").attr("data-id"),d=$(this).attr("rel"),b=$(this).attr("data-hero-id"),player.equip(b,d,c),!1})},a.prototype.activateEquipper=function(a){return $.facebox({ajax:"/loot/"+a})},a}()}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};ForgeCraft.Views.FlashView=function(){function a(){a.__super__.constructor.apply(this,arguments)}return b(a,Backbone.View),a.prototype.tagName="div",a.prototype.id="flash-wrap",a.prototype.initialize=function(){},a.prototype.show=function(){return $(this.el).fadeIn()},a.prototype.hide=function(){return $(this.el).fadeOut()},a}()}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b},c=function(a,b){return function(){return a.apply(b,arguments)}};ForgeCraft.Views.ActiveForgeView=function(){function a(){a.__super__.constructor.apply(this,arguments)}return b(a,Backbone.View),a.prototype.tagName="div",a.prototype.className="active-forge",a.prototype.id="#active-forge",a.prototype.initialize=function(){var a;return a=this,this.bind("ForgeCraft:checkpointActivated",this.checkpointActivated,this),this.reset()},a.prototype.shouldTrigger=function(){return Math.floor(Math.random()*6)===1},a.prototype.bar=function(){return $("#bar")},a.prototype.bindKeyDown=function(){var a;return a=this,$(window).bind("keydown",this.activateCheckpoint)},a.prototype.activateCheckpoint=function(a){console.log("Triggering key down");if(!activeForgeView.active)return;if(a.which!==32&&a.keyCode!==32)return;return activeForgeView.checkpointViews[0].activateCheckpoint(),a.preventDefault(),!1},a.prototype.unbindKeyDown=function(){return $(window).unbind("keydown",this.activateCheckpoint)},a.prototype.reset=function(){return this.clearTimeouts(),this.bar().remove(),$(this.el).find("#bar-container").html('<div id="bar" />'),$(this.el).find(".checkpoint img").show(),$(this.el).find(".marker").removeClass("activated"),$(this.el).find(".message").css({fontSize:"100%"}).hide()},a.prototype.start=function(){return this.active=!0,this.positionCheckpoints(),$(this.el).show(),this.bindKeyDown(),this.activateBarTimeout=setTimeout(c(function(){return this.activateBar()},this),1e3)},a.prototype.accuracy=function(){var a,b;return b=$(this.el).find(".marker").offset().left,a=this.bar().offset().left+this.bar().width(),console.log("marker position: ",b,"bar position:",a),100-Math.abs(b-a)},a.prototype.activateBar=function(){return this.bar().removeClass("new").addClass("activated"),this.bar().bind(CSS3_TRANSITION_END,c(function(){if(this.active)return this.finish()},this))},a.prototype.calculateCheckpoints=function(){return this.checkpoints=[],this.checkpoints.push(40+Math.random()*20)},a.prototype.positionCheckpoints=function(){var a,b,c,d;this.calculateCheckpoints(),this.checkpointViews||(this.checkpointViews=[]),d=[];for(a=0,c=this.checkpoints.length-1;0<=c?a<=c:a>=c;0<=c?a++:a--)(b=this.checkpointViews)[a]||(b[a]=new ForgeCraft.Views.CheckPointView({el:$("#checkpoint-"+a).get(0)})),d.push(this.checkpointViews[a].setPosition(this.checkpoints[a]));return d},a.prototype.checkpointActivated=function(){return console.log("Checkpoint activated"),this.finish()},a.prototype.stop=function(){return this.clearTimeouts(),this.bar().css({left:this.bar().css("left")}),this.unbindKeyDown()},a.prototype.clearTimeouts=function(){return clearTimeout(this.activateBarTimeout),clearTimeout(this.finishTimeout)},a.prototype.finish=function(){var a;this.clearTimeouts();if(!this.active)return;a=this.accuracy(),this.active=!1,this.stop(),setTimeout(c(function(){return $(this.el).fadeOut(c(function(){return this.reset(),this.trigger("ForgeCraft:activeForgeComplete",a)},this))},this),500),a>=ForgeCraft.Config.perfect_accuracy&&splashView.queueMessage("Perfect!");if(a>=ForgeCraft.Config.unlock_accuracy)return Ores.unlockAllOres(),splashView.queueMessage("Ores Unlocked!")},a}()}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};ForgeCraft.Views.CheckPointView=function(){function a(){a.__super__.constructor.apply(this,arguments)}return b(a,Backbone.View),a.prototype.tagName="div",a.prototype.className="checkpoint",a.prototype.events={"mousedown a":"activateCheckpoint","touchstart a":"activateCheckpoint"},a.prototype.setPosition=function(a){return $(this.el).css({left:a+"%"})},a.prototype.activateCheckpoint=function(a){return activeForgeView.trigger("ForgeCraft:checkpointActivated"),$(this.el).find(".marker").addClass("activated"),a&&a.preventDefault(),!1},a}()}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};ForgeCraft.Views.EventsView=function(){function a(){a.__super__.constructor.apply(this,arguments)}return b(a,Backbone.View),a.prototype.initialize=function(){return this.el=$("#event-list").get(0)},a.prototype.addEventsHTML=function(a){var b;return b=$(a).hide(),$(this.el).prepend(b),b.fadeIn()},a}()}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b},c=function(a,b){return function(){return a.apply(b,arguments)}};ForgeCraft.Views.ForgeView=function(){function a(){a.__super__.constructor.apply(this,arguments)}return b(a,Backbone.View),a.prototype.tagName="div",a.prototype.id="forge",a.prototype.events={mousedown:"beginWatchingMovement",touchstart:"beginWatchingMovement",mousemove:"watchMovement",touchmove:"watchMovement",mouseup:"attemptForge",touchend:"attemptForge",mouseout:"stopWatchingMovement",touchcancel:"stopWatchingMovement"},a.prototype.initialize=function(){return this.model.bind("change:funds",this.updateFunds,this),this.model.bind("change:progress_percent",this.updateProgressPercent,this),this.model.bind("change:complete",this.complete,this),this.model.bind("ForgeCraft:NeedMoreCoins",this.shakeFunds,this),window.Ores=new ForgeCraft.Collections.OresCollection,Ores.bind("add",this.displayOre,this),Ores.bind("reveal",this.displayAllOres,this),Ores.bind("reset",this.clearOres,this),this.initializeActiveForge(),this.renderForge(),this.renderEvents(),Modernizr.touch||$(window).unbind("resize").resize(c(function(){return this.renderForge()},this)),$(document).unbind("orientationchange").bind("orientationchange",c(function(){return this.renderForge()},this)),Sounds.playMusic()},a.prototype.initializeActiveForge=function(){return window.activeForgeView=new ForgeCraft.Views.ActiveForgeView({el:$("#active-forge").get(0)}),activeForgeView.bind("ForgeCraft:activeForgeComplete",this.forgeWithAccuracy,this)},a.prototype.renderForge=function(){if(this.renderHold)return;return this.clearOres(),loadingView.show(),this.correctSidebarHeight(),clearTimeout(this.redrawTimeout),this.redrawTimeout=setTimeout(c(function(){return this.calculateDimensions(),this.initializeOres(),loadingView.hide()},this),500)},a.prototype.correctSidebarHeight=function(){return this.topBarHeight=$(".topbar").height(),this.htmlHeight=$("html").height(),$("#sidebar").css({minHeight:this.htmlHeight-this.topBarHeight})},a.prototype.renderEvents=function(){return window.eventsView=new ForgeCraft.Views.EventsView},a.prototype.clearOres=function(){return $("#ores").html("")},a.prototype.calculateDimensions=function(){return this.topBarHeight=$(".topbar").height(),this.htmlHeight=$("html").height(),this.forgeHeight=this.htmlHeight-this.topBarHeight,$("#forge").css({height:this.forgeHeight}),this.forgeWidth=$("#forge").width(),this.sidebarWidth=$("#sidebar").width(),$("#ores").css({width:this.forgeWidth-this.sidebarWidth-20,height:this.forgeHeight}),$("#enemy").css({width:this.forgeWidth-this.sidebarWidth-20,height:this.forgeHeight}),this.topOffset=parseInt($("#ores").css("paddingTop")),this.oresHeight=$("#forge").height()-this.topOffset+10,this.oresWidth=$("#ores").width(),this.hMargin=this.oresWidth%ForgeCraft.Config.oreDim/2,this.cols=Math.floor(this.oresWidth/ForgeCraft.Config.oreDim),this.rows=Math.floor(this.oresHeight/ForgeCraft.Config.oreDim),this.numOres=this.cols*this.rows,Ores.numCols=this.cols,Ores.numRows=this.rows},a.prototype.initializeOres=function(){if(!$("#ores").is(":visible"))return;return console.log("Initializing Ores for",this.numOres,"ores"),Ores.initialFill(this.numOres)},a.prototype.displayOre=function(a){var b;return b=new ForgeCraft.Views.OreView({model:a}),b.renderAndPosition()},a.prototype.displayAllOres=function(){return this.clearOres(),Ores.forEach(c(function(a){return this.displayOre(a)},this))},a.prototype.beginWatchingMovement=function(a){var b
,c,d;if(this.oreLock)return;this.watching=!0,this.ref={x:a.pageX,y:a.pageY};if(!$(a.target).hasClass("ore")||!(b=$(a.target).data("view"))){this.watching=!1;return}return c=b.model.get("x"),d=b.model.get("y"),this.refOre=Ores.oreAt(c,d),console.log("Clicked ore is ",this.refOre.forLog()),a.preventDefault(),!1},a.prototype.watchMovement=function(a){if(this.oreLock)return;if(!this.watching)return;return this.delta={x:a.pageX-this.ref.x,y:a.pageY-this.ref.y},this.delta.x>=ForgeCraft.Config.moveThreshold&&this.refOre.get("x")<Ores.numCols-1&&(this.swapOre=Ores.oreAt(this.refOre.get("x")+1,this.refOre.get("y"))),this.delta.x<=-ForgeCraft.Config.moveThreshold&&this.refOre.get("x")>0&&(this.swapOre=Ores.oreAt(this.refOre.get("x")-1,this.refOre.get("y"))),this.delta.y>=ForgeCraft.Config.moveThreshold&&this.refOre.get("y")<Ores.numRows-1&&(this.swapOre=Ores.oreAt(this.refOre.get("x"),this.refOre.get("y")+1)),this.delta.y<=-ForgeCraft.Config.moveThreshold&&this.refOre.get("y")>0&&(this.swapOre=Ores.oreAt(this.refOre.get("x"),this.refOre.get("y")-1)),this.swapOre!=null&&(Ores.swapOresAndValidate(this.refOre,this.swapOre),this.stopWatchingMovement()),a.preventDefault(),!1},a.prototype.attemptForge=function(){if(this.oreLock)return;if(!forge.hasEnoughFunds(2)){forge.trigger("ForgeCraft:NeedMoreCoins");return}return this.refOre&&!this.swapOre&&(this.forgeable=this.refOre.get("forgeable"))&&($(".ore").addClass("unmarked"),activeForgeView.shouldTrigger()?activeForgeView.start():this.forgeable.forge()),this.stopWatchingMovement()},a.prototype.forgeWithAccuracy=function(a){if(this.forgeable!=null)return this.forgeable.forge(a)},a.prototype.stopWatchingMovement=function(){if(!this.watching)return;return this.ref=void 0,this.refOre=void 0,this.swapOre=void 0,this.watching=!1},a.prototype.updateFunds=function(){if(!this.model.get("requires_funding"))return;return console.log("Updating funds to",this.model.get("funds")),$(".funds").find(".amount").html(number_with_delimiter(this.model.get("funds")))},a.prototype.updateProgressPercent=function(){var a;return console.log("Updating progress percent to",this.model.get("progress_percent")),$(".percent").find(".amount").html(this.model.get("progress_percent")),$(".progress").find(".bar").css({width:this.model.get("progress_percent")+"%"}),a=this.model.get("progresses"),_.each(a,function(a){var b,c,d;return c=a._id,d=a.quantity,b=a.complete,$("#quantity_progress_"+c).html(d),b?$("#progress_"+c).addClass("complete"):$("#progress_"+c).removeClass("complete")})},a.prototype.complete=function(){return $("#ores").fadeOut(function(){return splashView.queueMessage("Forge Complete!"),$.get("/forges/"+forge.get("id")+"/complete",function(a){return $("#ores").html(a).fadeIn()})})},a}()}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b},c=function(a,b){return function(){return a.apply(b,arguments)}};ForgeCraft.Views.LootView=function(){function a(){a.__super__.constructor.apply(this,arguments)}return b(a,Backbone.View),a.prototype.tagName="div",a.prototype.className="loot",a.prototype.initialize=function(){return this.model.bind("destroy",this.destroy,this)},a.prototype.render=function(){var a;return $(this.el).addClass(this.model.get("item_attributes").type).attr("id","loot-"+this.model.get("id")),$(this.el).attr("data-id",this.model.get("id")),$(this.el).find(".icon").attr("src",this.model.get("item_attributes").icon_url),$(this.el).find(".name").addClass(this.model.get("item_attributes").type),$(this.el).find(".name").html(this.model.get("item_attributes").name),$(this.el).data("view",this),a=this.model.get("level"),$(this.el).find(".level").find(".val").html(a),player.get("level")<a&&$(this.el).find(".level").addClass("toohigh"),this.model.get("attack")>0?$(this.el).find(".attack").find(".val").html(this.model.get("attack")):$(this.el).find(".attack").remove(),this.model.get("defense")>0?$(this.el).find(".defense").find(".val").html(this.model.get("defense")):$(this.el).find(".defense").remove(),this.model.get("equipped?")?($(this.el).find(".equipped-indicator").removeClass("hidden"),$(this.el).find(".sell-action").addClass("hidden")):($(this.el).find(".equipped-indicator").addClass("hidden"),$(this.el).find(".sell-action").removeClass("hidden"))},a.prototype.addToLootList=function(){var a,b;$(this.el).hide(),Loot.length>0&&Loot.at(1)!=null?a=Loot.at(1).get("id"):a=0,b=this.model.get("id"),b>a?$("#loot-list").prepend($(this.el)):$("#loot-list").append($(this.el)),$(this.el).fadeIn();if(this.model.get("battle_required?"))return this.startBattle(this.model.get("battle_id"))},a.prototype.startBattle=function(a){var b,c;return c=this,$(this.el).effect("shake",{times:3,distance:10},50),b=new ForgeCraft.Models.Battle({id:a}),setTimeout(function(){return b.forfeit(),alert("(Placeholder) You've been attacked! This is where a battle would start, if battles were in the game! Just make some clanging and slashing noises for now...")},1e3)},a.prototype.fleeBattle=function(){},a.prototype.makeDraggable=function(){return $(this.el).draggable({revert:"invalid"}),$(this.el).touch({animate:!1,sticky:!1,dragx:!0,dragy:!0,rotate:!1,resort:!0,scale:!1})},a.prototype.destroy=function(){return $(this.el).find(".sell-action").twipsy("hide"),$(this.el).fadeOut(c(function(){return $(this.el).remove()},this))},a}()}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};ForgeCraft.Views.OreView=function(){function a(){a.__super__.constructor.apply(this,arguments)}return b(a,Backbone.View),a.prototype.tagName="div",a.prototype.className="ore",a.prototype.initialize=function(){return this.model.bind("change:forgeable",this.updateHighlight,this),this.model.bind("change:x",this.updateCoordinates,this),this.model.bind("change:y",this.updateCoordinates,this),this.model.bind("change:neighbors",this.updateNeighbors,this),this.model.bind("destroy",this.consume,this),this.model.bind("change:marked",this.mark,this),this.model.bind("change:moveable",this.updateMoveability,this),this.model.bind("ForgeCraft:MoveBlock",this.moveBlocked,this)},a.prototype.render=function(){return this.el=$('<div class="ore" />').get(0),$(this.el).addClass(this.model.get("to_class")),$(this.el).data({view:this}),this.addSides(),this},a.prototype.addSides=function(){return $(this.el).append('<div class="side top" />').append('<div class="side right" />').append('<div class="side bottom" />').append('<div class="side left" />')},a.prototype.oreUrl=function(){return ForgeCraft.Config.ores[this.model.get("rank")]},a.prototype.renderAndPosition=function(){return this.render(),$("#ores").append(this.el),this.jumpToPosition()},a.prototype.leftPos=function(){var a;return a=$("#ores").position().left+forgeView.hMargin,a+ForgeCraft.Config.oreDim*this.model.get("x")},a.prototype.topPos=function(){var a,b,c,d;return d=this.model.get("y"),d===-1?c=-2*ForgeCraft.Config.oreDim:(a=forgeView.topOffset,b=a+ForgeCraft.Config.oreDim*this.model.get("y"))},a.prototype.updateCoordinates=function(){return this.animateToPosition(!1)},a.prototype.jumpToPosition=function(){return $(this.el).css({left:this.leftPos(),top:this.topPos()})},a.prototype.animateToPosition=function(a){var b,c,d;return a==null&&(a=!1),c=this,d=parseInt(Math.random()*ForgeCraft.Config.dropInTimeout),$(this.el).animate({left:this.leftPos()},"fast"),b=function(){return $(c.el).animate({top:c.topPos()},"fast")},a?setTimeout(b,d):b()},a.prototype.updateHighlight=function(){var a;return(a=this.model.get("forgeable")!=null)?$(this.el).addClass("forgeable"):$(this.el).removeClass("forgeable")},a.prototype.updateNeighbors=function(){var a,b;return b=this.model.get("neighbors"),a=["top","right","bottom","left"],$(this.el).removeClass(a.join(" ")),$(this.el).addClass(b.join(" "))},a.prototype.mark=function(){return this.model.get("marked")?$(this.el).addClass("marked"):$(this.el).removeClass("marked")},a.prototype.consume=function(){return $(this.el).fadeOut("slow",function(){return $(this).remove()})},a.prototype.updateMoveability=function(){return console.log("Updating moveability"),this.model.get("moveable")?$(this.el).removeClass("immoveable"):$(this.el).addClass("immoveable")},a.prototype.moveBlocked=function(){return $(this.el).effect("shake",{times:3,distance:10},50)},a}()}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};ForgeCraft.Views.LoadingView=function(){function a(){a.__super__.constructor.apply(this,arguments)}return b(a,Backbone.View),a.prototype.tagName="div",a.prototype.id="loading",a.prototype.show=function(){return $(this.el).fadeIn()},a.prototype.hide=function(){return $(this.el).fadeOut()},a}()}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};ForgeCraft.Views.MapView=function(){function a(){a.__super__.constructor.apply(this,arguments)}return b(a,Backbone.View),a.prototype.tagName="div",a.prototype.className="map",a.prototype.initialize=function(){},a.prototype.start=function(){return this.bindTravelActions(),this.refresh()},a.prototype.refresh=function(){return this.topBarHeight=$(".topbar").height(),this.htmlHeight=$("html").height(),$(".sidebar").css({minHeight:this.htmlHeight-this.topBarHeight}),$("#map").find(".map").css({minHeight:this.htmlHeight-this.topBarHeight})},a.prototype.showMine=function(){},a.prototype.bindTravelActions=function(){var a;return a=this,$(".travel").click(function(){var b;return b=$(this).attr("data-mine-id"),a.changeMine(b),!1})},a.prototype.changeMine=function(a){return console.log("Starting travel with mine id",a),loadingView.show(),$.post("/players/"+player.get("name")+"/mine",{_method:"PUT",player:{mine_id:a}},this.onMineChange)},a.prototype.onMineChange=function(a){var b;return console.log("Travelling!",a),loadingView.hide(),b=a.id,mapView.travelTo(b)},a.prototype.travelTo=function(a){return Backbone.history.navigate("forges/"+a,!0)},a}()}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};ForgeCraft.Views.MenuView=function(){function a(){a.__super__.constructor.apply(this,arguments)}return b(a,Backbone.View),a.prototype.tagName="div",a.prototype.initialize=function(){return this.bindMenu()},a.prototype.bindMenu=function(){var a;return a=this,$(".menu").click(function(){return a.activateMenu()})},a.prototype.selectNav=function(a){return $("#navigation").find("a").removeClass("selected"),$("#navigation").find("a."+a).addClass("selected")},a.prototype.activateMenu=function(){return console.log("Activating Menu"),$.facebox({ajax:"/menu"}),!1},a}()}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};ForgeCraft.Views.PlayerView=function(){function a(){a.__super__.constructor.apply(this,arguments)}return b(a,Backbone.View),a.prototype.tagName="div",a.prototype.initialize=function(){return this.model.bind("change:defense",this.reflectDefense,this),this.model.bind("change:skills",this.reflectSkills,this),this.bindSkillClick()},a.prototype.reflectDefense=function(){return $("#defense").find(".val").html(this.model.get("defense")),$("#defense").find(".stat").effect("shake",{times:3,distance:10},50)},a.prototype.reflectSkills=function(){var a;$(".skill.accuracy").find(".value").html(this.model.get("skills").accuracy),$(".skill.craftsmanship").find(".value").html(this.model.get("skills").craftsmanship),$(".skill.perception").find(".value").html(this.model.get("skills").perception),a=this.model.get("skills").available_points,$(".unspent").find(".remaining").html(a);if(a<1)return this.showSkills()},a.prototype.showSkillSelector=function(){return $("#skills").fadeOut(function(){return $("#skills").load("/skills?type=unspent",function(){return $("#skills").fadeIn()})})},a.prototype.showSkills=function(){return $("#skills").fadeOut(function(){return $("#skills").load("/skills",function(){return $("#skills").fadeIn()})})},a.prototype.bindSkillClick=function(){return $(".increase-skill").live("click",function(){var a;return a=$(this).attr("data-skill"),player.increaseSkill(a),!1})},a}()}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b},c=function(a,b){return function(){return a.apply(b,arguments)}};ForgeCraft.Views.SplashView=function(){function a(){a.__super__.constructor.apply(this,arguments)}return b(a,Backbone.View),a.prototype.initialize=function(){return this.queue=[],this.running=!1},a.prototype.queueMessage=function(a){return this.queue.push(a),this.startQueue()},a.prototype.startQueue=function(){if(this.running)return;return this.showMessages()},a.prototype.showMessages=function(){var a;this.running=this.queue.length>0;if(!this.running)return;return a=this.queue.shift(),this.showMessage(a),setTimeout(c(function(){return this.showMessages()},this),ForgeCraft.Config.splash.queueDelay)},a.prototype.showMessage=function(a){return $(this.el).html(a).show(),setTimeout(c(function(){return $(this.el).css({fontSize:"800%"})},this),ForgeCraft.Config.splash.embiggenDelay),setTimeout(c(function(){return $(this.el).fadeOut("fast",c(function(){return $(this.el).css({fontSize:"10px"})},this))},this),ForgeCraft.Config.splash.stickDelay)},a}()}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};ForgeCraft.Views.TooltipView=function(){function a(){a.__super__.constructor.apply(this,arguments)}return b(a,Backbone.View),a.prototype.initialize=function(){},a.prototype.bindElements=function(a){return a==null&&(a="body"),this.bindTooltips(a),this.bindTips(a),this.bindTimeago(a)},a.prototype.bindTooltips=function(a){return a==null&&(a="body"),$(a).find("*[rel=tooltip]").facebox()},a.prototype.bindTips=function(a){return a==null&&(a="body"),$(a).find("*[data-tip]").qtip({content:{attr:"data-tip"},position:{target:"mouse"},style:{classes:"ui-tooltip-dark ui-tooltip-shadow ui-tooltip-tipsy"}})},a.prototype.bindTimeago=function(a){return a==null&&(a="body"),$(a).find("abbr.timeago").timeago()},a}()}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};ForgeCraft.Routers.Router=function(){function a(){a.__super__.constructor.apply(this,arguments)}return b(a,Backbone.Router),a.prototype.initialize=function(a){},a.prototype.load=function(a,b){return appView.load(a,b)},a.prototype.routes={"":"home",login:"login",register:"register","forges/:ident":"forge",armory:"armory","armory/:class":"class",colosseum:"colosseum","enemies/:id":"enemy",ladder:"ladder","loot/:id":"loot","items/:ident":"item",map:"map","map/:ident":"mapShow",logout:"logout",":player":"player"},a.prototype.home=function(){return menuView.selectNav("profile"),this.load("/")},a.prototype.login=function(){return this.load("/login")},a.prototype.register=function(){return this.load("/register")},a.prototype.player=function(a){return menuView.selectNav("profile"),this.load("/"+a)},a.prototype.forge=function(a){return menuView.selectNav("forge"),this.load("/forges/"+a)},a.prototype.armory=function(){return menuView.selectNav("armory"),this.load("/armory")},a.prototype["class"]=function(a){return menuView.selectNav("armory"),this.load("/armory/"+a)},a.prototype.item=function(a){return menuView.selectNav("armory"),this.load("/items/"+a)},a.prototype.map=function(){return menuView.selectNav("map"),this.load("/map")},a.prototype.mapShow=function(a){return menuView.selectNav("map"),this.load("/map/"+a)},a.prototype.ladder=function(){return menuView.selectNav("ladder"),this.load("/ladder")},a.prototype.colosseum=function(){return menuView.selectNav("colosseum"),this.load("/colosseum")},a.prototype.enemy=function(a){return menuView.selectNav("colosseum"),this.load("/enemies/"+a)},a.prototype.logout=function(){return this.load("/logout",function(){return $(document).trigger("close.facebox"),Backbone.history.navigate("/")})},a}()}.call(this),function(){ForgeCraft.start=function(){return window.router=new ForgeCraft.Routers.Router,window.Loot=new ForgeCraft.Collections.Loot,window.Sounds=new ForgeCraft.Collections.Sounds(ForgeCraft.Config.sounds),window.player=new ForgeCraft.Models.Player(ForgeCraft.Config.player),window.map=new ForgeCraft.Models.Map,window.flashView=new ForgeCraft.Views.FlashView({el:$("#flash-wrap").get(0)}),window.loadingView=new ForgeCraft.Views.LoadingView({el:$("#loading").get(0)}),window.playerView=new ForgeCraft.Views.PlayerView({el:$("#profile").get(0),model:player}),window.menuView=new ForgeCraft.Views.MenuView,window.equipperView=new ForgeCraft.Views.EquipperView,window.armoryView=new ForgeCraft.Views.ArmoryView,window.mapView=new ForgeCraft.Views.MapView,window.tooltipView=new ForgeCraft.Views.TooltipView,window.splashView=new ForgeCraft.Views.SplashView({el:$("#splash-message").get(0)}),window.appView=new ForgeCraft.Views.AppView}}.call(this)